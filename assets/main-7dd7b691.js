var dr=Object.defineProperty;var pr=(t,n,e)=>n in t?dr(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var Y=(t,n,e)=>(pr(t,typeof n!="symbol"?n+"":n,e),e);import"./modulepreload-polyfill-3cfb730f.js";import{S as Bt,r as Ne,a as yr,d as Ee,e as ze,R as $e,C as Fe,b as Mr,c as _r,i as wn,f as On,g as Bn,h as xr,n as rn,j as vr,k as wr,l as Lt,T as on,m as an,o as Le}from"./transform-21680f05.js";import{c as Tr}from"./csv-26976831.js";function Ot(t,n){return t==null||n==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function Sr(t,n){return t==null||n==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function En(t){let n,e,r;t.length!==2?(n=Ot,e=(u,s)=>Ot(t(u),s),r=(u,s)=>t(u)-s):(n=t===Ot||t===Sr?t:kr,e=t,r=t);function i(u,s,c=0,m=u.length){if(c<m){if(n(s,s)!==0)return m;do{const h=c+m>>>1;e(u[h],s)<0?c=h+1:m=h}while(c<m)}return c}function a(u,s,c=0,m=u.length){if(c<m){if(n(s,s)!==0)return m;do{const h=c+m>>>1;e(u[h],s)<=0?c=h+1:m=h}while(c<m)}return c}function o(u,s,c=0,m=u.length){const h=i(u,s,c,m-1);return h>c&&r(u[h-1],s)>-r(u[h],s)?h-1:h}return{left:i,center:o,right:a}}function kr(){return 0}function br(t){return t===null?NaN:+t}const Cr=En(Ot),Dr=Cr.right;En(br).center;const Ar=Dr;function Ur(t,n){let e,r;if(n===void 0)for(const i of t)i!=null&&(e===void 0?i>=i&&(e=r=i):(e>i&&(e=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=n(a,++i,t))!=null&&(e===void 0?a>=a&&(e=r=a):(e>a&&(e=a),r<a&&(r=a)))}return[e,r]}class Nr extends Map{constructor(n,e=$r){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),n!=null)for(const[r,i]of n)this.set(r,i)}get(n){return super.get(jn(this,n))}has(n){return super.has(jn(this,n))}set(n,e){return super.set(Er(this,n),e)}delete(n){return super.delete(zr(this,n))}}function jn({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):e}function Er({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):(t.set(r,e),e)}function zr({_intern:t,_key:n},e){const r=n(e);return t.has(r)&&(e=t.get(r),t.delete(r)),e}function $r(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Gn(t){return t}function Zn(t,...n){return Fr(t,Gn,Gn,n)}function Fr(t,n,e,r){return function i(a,o){if(o>=r.length)return e(a);const u=new Nr,s=r[o++];let c=-1;for(const m of a){const h=s(m,++c,a),l=u.get(h);l?l.push(m):u.set(h,[m])}for(const[m,h]of u)u.set(m,i(h,o));return n(u)}(t,0)}const Lr=Math.sqrt(50),Ir=Math.sqrt(10),Hr=Math.sqrt(2);function jt(t,n,e){const r=(n-t)/Math.max(0,e),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=Lr?10:a>=Ir?5:a>=Hr?2:1;let u,s,c;return i<0?(c=Math.pow(10,-i)/o,u=Math.round(t*c),s=Math.round(n*c),u/c<t&&++u,s/c>n&&--s,c=-c):(c=Math.pow(10,i)*o,u=Math.round(t/c),s=Math.round(n/c),u*c<t&&++u,s*c>n&&--s),s<u&&.5<=e&&e<2?jt(t,n,e*2):[u,s,c]}function Yr(t,n,e){if(n=+n,t=+t,e=+e,!(e>0))return[];if(t===n)return[t];const r=n<t,[i,a,o]=r?jt(n,t,e):jt(t,n,e);if(!(a>=i))return[];const u=a-i+1,s=new Array(u);if(r)if(o<0)for(let c=0;c<u;++c)s[c]=(a-c)/-o;else for(let c=0;c<u;++c)s[c]=(a-c)*o;else if(o<0)for(let c=0;c<u;++c)s[c]=(i+c)/-o;else for(let c=0;c<u;++c)s[c]=(i+c)*o;return s}function Tn(t,n,e){return n=+n,t=+t,e=+e,jt(t,n,e)[2]}function Sn(t,n,e){n=+n,t=+t,e=+e;const r=n<t,i=r?Tn(n,t,e):Tn(t,n,e);return(r?-1:1)*(i<0?1/-i:i)}function Ie(t,n){let e;if(n===void 0)for(const r of t)r!=null&&(e<r||e===void 0&&r>=r)&&(e=r);else{let r=-1;for(let i of t)(i=n(i,++r,t))!=null&&(e<i||e===void 0&&i>=i)&&(e=i)}return e}function Pr(t,n){let e;if(n===void 0)for(const r of t)r!=null&&(e>r||e===void 0&&r>=r)&&(e=r);else{let r=-1;for(let i of t)(i=n(i,++r,t))!=null&&(e>i||e===void 0&&i>=i)&&(e=i)}return e}function Rr(t){return t}var un=1,sn=2,kn=3,$t=4,qn=1e-6;function Wr(t){return"translate("+t+",0)"}function Or(t){return"translate(0,"+t+")"}function Br(t){return n=>+t(n)}function jr(t,n){return n=Math.max(0,t.bandwidth()-n*2)/2,t.round()&&(n=Math.round(n)),e=>+t(e)+n}function Gr(){return!this.__axis}function He(t,n){var e=[],r=null,i=null,a=6,o=6,u=3,s=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=t===un||t===$t?-1:1,m=t===$t||t===sn?"x":"y",h=t===un||t===kn?Wr:Or;function l(d){var T=r??(n.ticks?n.ticks.apply(n,e):n.domain()),$=i??(n.tickFormat?n.tickFormat.apply(n,e):Rr),F=Math.max(a,0)+u,_=n.range(),I=+_[0]+s,D=+_[_.length-1]+s,N=(n.bandwidth?jr:Br)(n.copy(),s),C=d.selection?d.selection():d,y=C.selectAll(".domain").data([null]),b=C.selectAll(".tick").data(T,n).order(),O=b.exit(),q=b.enter().append("g").attr("class","tick"),j=b.select("line"),S=b.select("text");y=y.merge(y.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),b=b.merge(q),j=j.merge(q.append("line").attr("stroke","currentColor").attr(m+"2",c*a)),S=S.merge(q.append("text").attr("fill","currentColor").attr(m,c*F).attr("dy",t===un?"0em":t===kn?"0.71em":"0.32em")),d!==C&&(y=y.transition(d),b=b.transition(d),j=j.transition(d),S=S.transition(d),O=O.transition(d).attr("opacity",qn).attr("transform",function(R){return isFinite(R=N(R))?h(R+s):this.getAttribute("transform")}),q.attr("opacity",qn).attr("transform",function(R){var P=this.parentNode.__axis;return h((P&&isFinite(P=P(R))?P:N(R))+s)})),O.remove(),y.attr("d",t===$t||t===sn?o?"M"+c*o+","+I+"H"+s+"V"+D+"H"+c*o:"M"+s+","+I+"V"+D:o?"M"+I+","+c*o+"V"+s+"H"+D+"V"+c*o:"M"+I+","+s+"H"+D),b.attr("opacity",1).attr("transform",function(R){return h(N(R)+s)}),j.attr(m+"2",c*a),S.attr(m,c*F).text($),C.filter(Gr).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===sn?"start":t===$t?"end":"middle"),C.each(function(){this.__axis=N})}return l.scale=function(d){return arguments.length?(n=d,l):n},l.ticks=function(){return e=Array.from(arguments),l},l.tickArguments=function(d){return arguments.length?(e=d==null?[]:Array.from(d),l):e.slice()},l.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),l):r&&r.slice()},l.tickFormat=function(d){return arguments.length?(i=d,l):i},l.tickSize=function(d){return arguments.length?(a=o=+d,l):a},l.tickSizeInner=function(d){return arguments.length?(a=+d,l):a},l.tickSizeOuter=function(d){return arguments.length?(o=+d,l):o},l.tickPadding=function(d){return arguments.length?(u=+d,l):u},l.offset=function(d){return arguments.length?(s=+d,l):s},l}function Vn(t){return He(kn,t)}function Xn(t){return He($t,t)}function B(t){return typeof t=="string"?new Bt([[document.querySelector(t)]],[document.documentElement]):new Bt([[t]],Ne)}function Zr(t){let n;for(;n=t.sourceEvent;)t=n;return t}function dt(t,n){if(t=Zr(t),n===void 0&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(n.getScreenCTM().inverse()),[r.x,r.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}}return[t.pageX,t.pageY]}function Ht(t){return typeof t=="string"?new Bt([document.querySelectorAll(t)],[document.documentElement]):new Bt([yr(t)],Ne)}const bn={capture:!0,passive:!1};function Cn(t){t.preventDefault(),t.stopImmediatePropagation()}function qr(t){var n=t.document.documentElement,e=B(t).on("dragstart.drag",Cn,bn);"onselectstart"in n?e.on("selectstart.drag",Cn,bn):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Vr(t,n){var e=t.document.documentElement,r=B(t).on("dragstart.drag",null);n&&(r.on("click.drag",Cn,bn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}const Xr=Math.PI/180,Qr=180/Math.PI,Gt=18,Ye=.96422,Pe=1,Re=.82521,We=4/29,kt=6/29,Oe=3*kt*kt,Kr=kt*kt*kt;function Be(t){if(t instanceof ut)return new ut(t.l,t.a,t.b,t.opacity);if(t instanceof st)return je(t);t instanceof $e||(t=Mr(t));var n=fn(t.r),e=fn(t.g),r=fn(t.b),i=cn((.2225045*n+.7168786*e+.0606169*r)/Pe),a,o;return n===e&&e===r?a=o=i:(a=cn((.4360747*n+.3850649*e+.1430804*r)/Ye),o=cn((.0139322*n+.0971045*e+.7141733*r)/Re)),new ut(116*i-16,500*(a-i),200*(i-o),t.opacity)}function Jr(t,n,e,r){return arguments.length===1?Be(t):new ut(t,n,e,r??1)}function ut(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}Ee(ut,Jr,ze(Fe,{brighter(t){return new ut(this.l+Gt*(t??1),this.a,this.b,this.opacity)},darker(t){return new ut(this.l-Gt*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return n=Ye*ln(n),t=Pe*ln(t),e=Re*ln(e),new $e(hn(3.1338561*n-1.6168667*t-.4906146*e),hn(-.9787684*n+1.9161415*t+.033454*e),hn(.0719453*n-.2289914*t+1.4052427*e),this.opacity)}}));function cn(t){return t>Kr?Math.pow(t,1/3):t/Oe+We}function ln(t){return t>kt?t*t*t:Oe*(t-We)}function hn(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function fn(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ti(t){if(t instanceof st)return new st(t.h,t.c,t.l,t.opacity);if(t instanceof ut||(t=Be(t)),t.a===0&&t.b===0)return new st(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*Qr;return new st(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Dn(t,n,e,r){return arguments.length===1?ti(t):new st(t,n,e,r??1)}function st(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}function je(t){if(isNaN(t.h))return new ut(t.l,0,0,t.opacity);var n=t.h*Xr;return new ut(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}Ee(st,Dn,ze(Fe,{brighter(t){return new st(this.h,this.c,this.l+Gt*(t??1),this.opacity)},darker(t){return new st(this.h,this.c,this.l-Gt*(t??1),this.opacity)},rgb(){return je(this).rgb()}}));function ni(t,n){n||(n=[]);var e=t?Math.min(n.length,t.length):0,r=n.slice(),i;return function(a){for(i=0;i<e;++i)r[i]=t[i]*(1-a)+n[i]*a;return r}}function ei(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ri(t,n){var e=n?n.length:0,r=t?Math.min(e,t.length):0,i=new Array(r),a=new Array(e),o;for(o=0;o<r;++o)i[o]=zn(t[o],n[o]);for(;o<e;++o)a[o]=n[o];return function(u){for(o=0;o<r;++o)a[o]=i[o](u);return a}}function ii(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function oi(t,n){var e={},r={},i;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(i in n)i in t?e[i]=zn(t[i],n[i]):r[i]=n[i];return function(a){for(i in e)r[i]=e[i](a);return r}}function zn(t,n){var e=typeof n,r;return n==null||e==="boolean"?_r(n):(e==="number"?wn:e==="string"?(r=On(n))?(n=r,Bn):xr:n instanceof On?Bn:n instanceof Date?ii:ei(n)?ni:Array.isArray(n)?ri:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?oi:wn)(t,n)}function ai(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}var ui=1e-12;function Qn(t){return((t=Math.exp(t))+1/t)/2}function si(t){return((t=Math.exp(t))-1/t)/2}function ci(t){return((t=Math.exp(2*t))-1)/(t+1)}const Ge=function t(n,e,r){function i(a,o){var u=a[0],s=a[1],c=a[2],m=o[0],h=o[1],l=o[2],d=m-u,T=h-s,$=d*d+T*T,F,_;if($<ui)_=Math.log(l/c)/n,F=function(b){return[u+b*d,s+b*T,c*Math.exp(n*b*_)]};else{var I=Math.sqrt($),D=(l*l-c*c+r*$)/(2*c*e*I),N=(l*l-c*c-r*$)/(2*l*e*I),C=Math.log(Math.sqrt(D*D+1)-D),y=Math.log(Math.sqrt(N*N+1)-N);_=(y-C)/n,F=function(b){var O=b*_,q=Qn(C),j=c/(e*I)*(q*ci(n*O+C)-si(C));return[u+j*d,s+j*T,c*q/Qn(n*O+C)]}}return F.duration=_*1e3*n/Math.SQRT2,F}return i.rho=function(a){var o=Math.max(.001,+a),u=o*o,s=u*u;return t(o,u,s)},i}(Math.SQRT2,2,4);function li(t){return function(n,e){var r=t((n=Dn(n)).h,(e=Dn(e)).h),i=rn(n.c,e.c),a=rn(n.l,e.l),o=rn(n.opacity,e.opacity);return function(u){return n.h=r(u),n.c=i(u),n.l=a(u),n.opacity=o(u),n+""}}}const hi=li(vr),An=Math.PI,Un=2*An,pt=1e-6,fi=Un-pt;function Ze(t){this._+=t[0];for(let n=1,e=t.length;n<e;++n)this._+=arguments[n]+t[n]}function mi(t){let n=Math.floor(t);if(!(n>=0))throw new Error(`invalid digits: ${t}`);if(n>15)return Ze;const e=10**n;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*e)/e+r[i]}}class gi{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?Ze:mi(n)}moveTo(n,e){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,e){this._append`L${this._x1=+n},${this._y1=+e}`}quadraticCurveTo(n,e,r,i){this._append`Q${+n},${+e},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(n,e,r,i,a,o){this._append`C${+n},${+e},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(n,e,r,i,a){if(n=+n,e=+e,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,u=this._y1,s=r-n,c=i-e,m=o-n,h=u-e,l=m*m+h*h;if(this._x1===null)this._append`M${this._x1=n},${this._y1=e}`;else if(l>pt)if(!(Math.abs(h*s-c*m)>pt)||!a)this._append`L${this._x1=n},${this._y1=e}`;else{let d=r-o,T=i-u,$=s*s+c*c,F=d*d+T*T,_=Math.sqrt($),I=Math.sqrt(l),D=a*Math.tan((An-Math.acos(($+l-F)/(2*_*I)))/2),N=D/I,C=D/_;Math.abs(N-1)>pt&&this._append`L${n+N*m},${e+N*h}`,this._append`A${a},${a},0,0,${+(h*d>m*T)},${this._x1=n+C*s},${this._y1=e+C*c}`}}arc(n,e,r,i,a,o){if(n=+n,e=+e,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),s=r*Math.sin(i),c=n+u,m=e+s,h=1^o,l=o?i-a:a-i;this._x1===null?this._append`M${c},${m}`:(Math.abs(this._x1-c)>pt||Math.abs(this._y1-m)>pt)&&this._append`L${c},${m}`,r&&(l<0&&(l=l%Un+Un),l>fi?this._append`A${r},${r},0,1,${h},${n-u},${e-s}A${r},${r},0,1,${h},${this._x1=c},${this._y1=m}`:l>pt&&this._append`A${r},${r},0,${+(l>=An)},${h},${this._x1=n+r*Math.cos(a)},${this._y1=e+r*Math.sin(a)}`)}rect(n,e,r,i){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function di(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function pi(t,n){return fetch(t,n).then(di)}function yi(t){return function(n,e,r){return arguments.length===2&&typeof e=="function"&&(r=e,e=void 0),pi(n,e).then(function(i){return t(i,r)})}}var Kn=yi(Tr);function Mi(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Zt(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function bt(t){return t=Zt(Math.abs(t)),t?t[1]:NaN}function _i(t,n){return function(e,r){for(var i=e.length,a=[],o=0,u=t[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),a.push(e.substring(i-=u,i+u)),!((s+=u+1)>r));)u=t[o=(o+1)%t.length];return a.reverse().join(n)}}function xi(t){return function(n){return n.replace(/[0-9]/g,function(e){return t[+e]})}}var vi=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function qt(t){if(!(n=vi.exec(t)))throw new Error("invalid format: "+t);var n;return new $n({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}qt.prototype=$n.prototype;function $n(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}$n.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function wi(t){t:for(var n=t.length,e=1,r=-1,i;e<n;++e)switch(t[e]){case".":r=i=e;break;case"0":r===0&&(r=e),i=e;break;default:if(!+t[e])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var qe;function Ti(t,n){var e=Zt(t,n);if(!e)return t+"";var r=e[0],i=e[1],a=i-(qe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Zt(t,Math.max(0,n+a-1))[0]}function Jn(t,n){var e=Zt(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const te={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Mi,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>Jn(t*100,n),r:Jn,s:Ti,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ne(t){return t}var ee=Array.prototype.map,re=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Si(t){var n=t.grouping===void 0||t.thousands===void 0?ne:_i(ee.call(t.grouping,Number),t.thousands+""),e=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?ne:xi(ee.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"−":t.minus+"",s=t.nan===void 0?"NaN":t.nan+"";function c(h){h=qt(h);var l=h.fill,d=h.align,T=h.sign,$=h.symbol,F=h.zero,_=h.width,I=h.comma,D=h.precision,N=h.trim,C=h.type;C==="n"?(I=!0,C="g"):te[C]||(D===void 0&&(D=12),N=!0,C="g"),(F||l==="0"&&d==="=")&&(F=!0,l="0",d="=");var y=$==="$"?e:$==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",b=$==="$"?r:/[%p]/.test(C)?o:"",O=te[C],q=/[defgprs%]/.test(C);D=D===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,D)):Math.max(0,Math.min(20,D));function j(S){var R=y,P=b,f,x,g;if(C==="c")P=O(S)+P,S="";else{S=+S;var v=S<0||1/S<0;if(S=isNaN(S)?s:O(Math.abs(S),D),N&&(S=wi(S)),v&&+S==0&&T!=="+"&&(v=!1),R=(v?T==="("?T:u:T==="-"||T==="("?"":T)+R,P=(C==="s"?re[8+qe/3]:"")+P+(v&&T==="("?")":""),q){for(f=-1,x=S.length;++f<x;)if(g=S.charCodeAt(f),48>g||g>57){P=(g===46?i+S.slice(f+1):S.slice(f))+P,S=S.slice(0,f);break}}}I&&!F&&(S=n(S,1/0));var k=R.length+S.length+P.length,w=k<_?new Array(_-k+1).join(l):"";switch(I&&F&&(S=n(w+S,w.length?_-P.length:1/0),w=""),d){case"<":S=R+S+P+w;break;case"=":S=R+w+S+P;break;case"^":S=w.slice(0,k=w.length>>1)+R+S+P+w.slice(k);break;default:S=w+R+S+P;break}return a(S)}return j.toString=function(){return h+""},j}function m(h,l){var d=c((h=qt(h),h.type="f",h)),T=Math.max(-8,Math.min(8,Math.floor(bt(l)/3)))*3,$=Math.pow(10,-T),F=re[8+T/3];return function(_){return d($*_)+F}}return{format:c,formatPrefix:m}}var Yt,Fn,Ve;ki({thousands:",",grouping:[3],currency:["$",""]});function ki(t){return Yt=Si(t),Fn=Yt.format,Ve=Yt.formatPrefix,Yt}function bi(t){return Math.max(0,-bt(Math.abs(t)))}function Ci(t,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(bt(n)/3)))*3-bt(Math.abs(t)))}function Di(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,bt(n)-bt(t))+1}function Ai(t,n){return t.parent===n.parent?1:2}function Ui(t){return t.reduce(Ni,0)/t.length}function Ni(t,n){return t+n.x}function Ei(t){return 1+t.reduce(zi,0)}function zi(t,n){return Math.max(t,n.y)}function $i(t){for(var n;n=t.children;)t=n[0];return t}function Fi(t){for(var n;n=t.children;)t=n[n.length-1];return t}function Li(){var t=Ai,n=1,e=1,r=!1;function i(a){var o,u=0;a.eachAfter(function(l){var d=l.children;d?(l.x=Ui(d),l.y=Ei(d)):(l.x=o?u+=t(l,o):0,l.y=0,o=l)});var s=$i(a),c=Fi(a),m=s.x-t(s,c)/2,h=c.x+t(c,s)/2;return a.eachAfter(r?function(l){l.x=(l.x-a.x)*n,l.y=(a.y-l.y)*e}:function(l){l.x=(l.x-m)/(h-m)*n,l.y=(1-(a.y?l.y/a.y:1))*e})}return i.separation=function(a){return arguments.length?(t=a,i):t},i.size=function(a){return arguments.length?(r=!1,n=+a[0],e=+a[1],i):r?null:[n,e]},i.nodeSize=function(a){return arguments.length?(r=!0,n=+a[0],e=+a[1],i):r?[n,e]:null},i}function Ii(t){var n=0,e=t.children,r=e&&e.length;if(!r)n=1;else for(;--r>=0;)n+=e[r].value;t.value=n}function Hi(){return this.eachAfter(Ii)}function Yi(t,n){let e=-1;for(const r of this)t.call(n,r,++e,this);return this}function Pi(t,n){for(var e=this,r=[e],i,a,o=-1;e=r.pop();)if(t.call(n,e,++o,this),i=e.children)for(a=i.length-1;a>=0;--a)r.push(i[a]);return this}function Ri(t,n){for(var e=this,r=[e],i=[],a,o,u,s=-1;e=r.pop();)if(i.push(e),a=e.children)for(o=0,u=a.length;o<u;++o)r.push(a[o]);for(;e=i.pop();)t.call(n,e,++s,this);return this}function Wi(t,n){let e=-1;for(const r of this)if(t.call(n,r,++e,this))return r}function Oi(t){return this.eachAfter(function(n){for(var e=+t(n.data)||0,r=n.children,i=r&&r.length;--i>=0;)e+=r[i].value;n.value=e})}function Bi(t){return this.eachBefore(function(n){n.children&&n.children.sort(t)})}function ji(t){for(var n=this,e=Gi(n,t),r=[n];n!==e;)n=n.parent,r.push(n);for(var i=r.length;t!==e;)r.splice(i,0,t),t=t.parent;return r}function Gi(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;for(t=e.pop(),n=r.pop();t===n;)i=t,t=e.pop(),n=r.pop();return i}function Zi(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n}function qi(){return Array.from(this)}function Vi(){var t=[];return this.eachBefore(function(n){n.children||t.push(n)}),t}function Xi(){var t=this,n=[];return t.each(function(e){e!==t&&n.push({source:e.parent,target:e})}),n}function*Qi(){var t=this,n,e=[t],r,i,a;do for(n=e.reverse(),e=[];t=n.pop();)if(yield t,r=t.children)for(i=0,a=r.length;i<a;++i)e.push(r[i]);while(e.length)}function tn(t,n){t instanceof Map?(t=[void 0,t],n===void 0&&(n=to)):n===void 0&&(n=Ji);for(var e=new Vt(t),r,i=[e],a,o,u,s;r=i.pop();)if((o=n(r.data))&&(s=(o=Array.from(o)).length))for(r.children=o,u=s-1;u>=0;--u)i.push(a=o[u]=new Vt(o[u])),a.parent=r,a.depth=r.depth+1;return e.eachBefore(eo)}function Ki(){return tn(this).eachBefore(no)}function Ji(t){return t.children}function to(t){return Array.isArray(t)?t[1]:null}function no(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function eo(t){var n=0;do t.height=n;while((t=t.parent)&&t.height<++n)}function Vt(t){this.data=t,this.depth=this.height=0,this.parent=null}Vt.prototype=tn.prototype={constructor:Vt,count:Hi,each:Yi,eachAfter:Ri,eachBefore:Pi,find:Wi,sum:Oi,sort:Bi,path:ji,ancestors:Zi,descendants:qi,leaves:Vi,links:Xi,copy:Ki,[Symbol.iterator]:Qi};function ro(t){return t==null?null:io(t)}function io(t){if(typeof t!="function")throw new Error;return t}function ie(){return 0}function oo(t){return function(){return t}}const ao=1664525,uo=1013904223,oe=4294967296;function so(){let t=1;return()=>(t=(ao*t+uo)%oe)/oe}function co(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function lo(t,n){let e=t.length,r,i;for(;e;)i=n()*e--|0,r=t[e],t[e]=t[i],t[i]=r;return t}function ho(t,n){for(var e=0,r=(t=lo(Array.from(t),n)).length,i=[],a,o;e<r;)a=t[e],o&&Xe(o,a)?++e:(o=mo(i=fo(i,a)),e=0);return o}function fo(t,n){var e,r;if(mn(n,t))return[n];for(e=0;e<t.length;++e)if(Pt(n,t[e])&&mn(Ft(t[e],n),t))return[t[e],n];for(e=0;e<t.length-1;++e)for(r=e+1;r<t.length;++r)if(Pt(Ft(t[e],t[r]),n)&&Pt(Ft(t[e],n),t[r])&&Pt(Ft(t[r],n),t[e])&&mn(Qe(t[e],t[r],n),t))return[t[e],t[r],n];throw new Error}function Pt(t,n){var e=t.r-n.r,r=n.x-t.x,i=n.y-t.y;return e<0||e*e<r*r+i*i}function Xe(t,n){var e=t.r-n.r+Math.max(t.r,n.r,1)*1e-9,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function mn(t,n){for(var e=0;e<n.length;++e)if(!Xe(t,n[e]))return!1;return!0}function mo(t){switch(t.length){case 1:return go(t[0]);case 2:return Ft(t[0],t[1]);case 3:return Qe(t[0],t[1],t[2])}}function go(t){return{x:t.x,y:t.y,r:t.r}}function Ft(t,n){var e=t.x,r=t.y,i=t.r,a=n.x,o=n.y,u=n.r,s=a-e,c=o-r,m=u-i,h=Math.sqrt(s*s+c*c);return{x:(e+a+s/h*m)/2,y:(r+o+c/h*m)/2,r:(h+i+u)/2}}function Qe(t,n,e){var r=t.x,i=t.y,a=t.r,o=n.x,u=n.y,s=n.r,c=e.x,m=e.y,h=e.r,l=r-o,d=r-c,T=i-u,$=i-m,F=s-a,_=h-a,I=r*r+i*i-a*a,D=I-o*o-u*u+s*s,N=I-c*c-m*m+h*h,C=d*T-l*$,y=(T*N-$*D)/(C*2)-r,b=($*F-T*_)/C,O=(d*D-l*N)/(C*2)-i,q=(l*_-d*F)/C,j=b*b+q*q-1,S=2*(a+y*b+O*q),R=y*y+O*O-a*a,P=-(Math.abs(j)>1e-6?(S+Math.sqrt(S*S-4*j*R))/(2*j):R/S);return{x:r+y+b*P,y:i+O+q*P,r:P}}function ae(t,n,e){var r=t.x-n.x,i,a,o=t.y-n.y,u,s,c=r*r+o*o;c?(a=n.r+e.r,a*=a,s=t.r+e.r,s*=s,a>s?(i=(c+s-a)/(2*c),u=Math.sqrt(Math.max(0,s/c-i*i)),e.x=t.x-i*r-u*o,e.y=t.y-i*o+u*r):(i=(c+a-s)/(2*c),u=Math.sqrt(Math.max(0,a/c-i*i)),e.x=n.x+i*r-u*o,e.y=n.y+i*o+u*r)):(e.x=n.x+e.r,e.y=n.y)}function ue(t,n){var e=t.r+n.r-1e-6,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function se(t){var n=t._,e=t.next._,r=n.r+e.r,i=(n.x*e.r+e.x*n.r)/r,a=(n.y*e.r+e.y*n.r)/r;return i*i+a*a}function Rt(t){this._=t,this.next=null,this.previous=null}function po(t,n){if(!(a=(t=co(t)).length))return 0;var e,r,i,a,o,u,s,c,m,h,l;if(e=t[0],e.x=0,e.y=0,!(a>1))return e.r;if(r=t[1],e.x=-r.r,r.x=e.r,r.y=0,!(a>2))return e.r+r.r;ae(r,e,i=t[2]),e=new Rt(e),r=new Rt(r),i=new Rt(i),e.next=i.previous=r,r.next=e.previous=i,i.next=r.previous=e;t:for(s=3;s<a;++s){ae(e._,r._,i=t[s]),i=new Rt(i),c=r.next,m=e.previous,h=r._.r,l=e._.r;do if(h<=l){if(ue(c._,i._)){r=c,e.next=r,r.previous=e,--s;continue t}h+=c._.r,c=c.next}else{if(ue(m._,i._)){e=m,e.next=r,r.previous=e,--s;continue t}l+=m._.r,m=m.previous}while(c!==m.next);for(i.previous=e,i.next=r,e.next=r.previous=r=i,o=se(e);(i=i.next)!==r;)(u=se(i))<o&&(e=i,o=u);r=e.next}for(e=[r._],i=r;(i=i.next)!==r;)e.push(i._);for(i=ho(e,n),s=0;s<a;++s)e=t[s],e.x-=i.x,e.y-=i.y;return i.r}function yo(t){return Math.sqrt(t.value)}function Mo(){var t=null,n=1,e=1,r=ie;function i(a){const o=so();return a.x=n/2,a.y=e/2,t?a.eachBefore(ce(t)).eachAfter(gn(r,.5,o)).eachBefore(le(1)):a.eachBefore(ce(yo)).eachAfter(gn(ie,1,o)).eachAfter(gn(r,a.r/Math.min(n,e),o)).eachBefore(le(Math.min(n,e)/(2*a.r))),a}return i.radius=function(a){return arguments.length?(t=ro(a),i):t},i.size=function(a){return arguments.length?(n=+a[0],e=+a[1],i):[n,e]},i.padding=function(a){return arguments.length?(r=typeof a=="function"?a:oo(+a),i):r},i}function ce(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function gn(t,n,e){return function(r){if(i=r.children){var i,a,o=i.length,u=t(r)*n||0,s;if(u)for(a=0;a<o;++a)i[a].r+=u;if(s=po(i,e),u)for(a=0;a<o;++a)i[a].r-=u;r.r=s+u}}}function le(t){return function(n){var e=n.parent;n.r*=t,e&&(n.x=e.x+t*n.x,n.y=e.y+t*n.y)}}function Ke(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}function _o(t){return function(){return t}}function xo(t){return+t}var he=[0,1];function Tt(t){return t}function Nn(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:_o(isNaN(n)?NaN:.5)}function vo(t,n){var e;return t>n&&(e=t,t=n,n=e),function(r){return Math.max(t,Math.min(n,r))}}function wo(t,n,e){var r=t[0],i=t[1],a=n[0],o=n[1];return i<r?(r=Nn(i,r),a=e(o,a)):(r=Nn(r,i),a=e(a,o)),function(u){return a(r(u))}}function To(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++o<r;)i[o]=Nn(t[o],t[o+1]),a[o]=e(n[o],n[o+1]);return function(u){var s=Ar(t,u,1,r)-1;return a[s](i[s](u))}}function Je(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function So(){var t=he,n=he,e=zn,r,i,a,o=Tt,u,s,c;function m(){var l=Math.min(t.length,n.length);return o!==Tt&&(o=vo(t[0],t[l-1])),u=l>2?To:wo,s=c=null,h}function h(l){return l==null||isNaN(l=+l)?a:(s||(s=u(t.map(r),n,e)))(r(o(l)))}return h.invert=function(l){return o(i((c||(c=u(n,t.map(r),wn)))(l)))},h.domain=function(l){return arguments.length?(t=Array.from(l,xo),m()):t.slice()},h.range=function(l){return arguments.length?(n=Array.from(l),m()):n.slice()},h.rangeRound=function(l){return n=Array.from(l),e=ai,m()},h.clamp=function(l){return arguments.length?(o=l?!0:Tt,m()):o!==Tt},h.interpolate=function(l){return arguments.length?(e=l,m()):e},h.unknown=function(l){return arguments.length?(a=l,h):a},function(l,d){return r=l,i=d,m()}}function tr(){return So()(Tt,Tt)}function ko(t,n,e,r){var i=Sn(t,n,e),a;switch(r=qt(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(n));return r.precision==null&&!isNaN(a=Ci(i,o))&&(r.precision=a),Ve(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Di(i,Math.max(Math.abs(t),Math.abs(n))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=bi(i))&&(r.precision=a-(r.type==="%")*2);break}}return Fn(r)}function bo(t){var n=t.domain;return t.ticks=function(e){var r=n();return Yr(r[0],r[r.length-1],e??10)},t.tickFormat=function(e,r){var i=n();return ko(i[0],i[i.length-1],e??10,r)},t.nice=function(e){e==null&&(e=10);var r=n(),i=0,a=r.length-1,o=r[i],u=r[a],s,c,m=10;for(u<o&&(c=o,o=u,u=c,c=i,i=a,a=c);m-- >0;){if(c=Tn(o,u,e),c===s)return r[i]=o,r[a]=u,n(r);if(c>0)o=Math.floor(o/c)*c,u=Math.ceil(u/c)*c;else if(c<0)o=Math.ceil(o*c)/c,u=Math.floor(u*c)/c;else break;s=c}return t},t}function nn(){var t=tr();return t.copy=function(){return Je(t,nn())},Ke.apply(t,arguments),bo(t)}function Co(t,n){t=t.slice();var e=0,r=t.length-1,i=t[e],a=t[r],o;return a<i&&(o=e,e=r,r=o,o=i,i=a,a=o),t[e]=n.floor(i),t[r]=n.ceil(a),t}const dn=new Date,pn=new Date;function Z(t,n,e,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),n(a,1),t(a),a),i.round=a=>{const o=i(a),u=i.ceil(a);return a-o<u-a?o:u},i.offset=(a,o)=>(n(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,u)=>{const s=[];if(a=i.ceil(a),u=u==null?1:Math.floor(u),!(a<o)||!(u>0))return s;let c;do s.push(c=new Date(+a)),n(a,u),t(a);while(c<a&&a<o);return s},i.filter=a=>Z(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,u)=>{if(o>=o)if(u<0)for(;++u<=0;)for(;n(o,-1),!a(o););else for(;--u>=0;)for(;n(o,1),!a(o););}),e&&(i.count=(a,o)=>(dn.setTime(+a),pn.setTime(+o),t(dn),t(pn),Math.floor(e(dn,pn))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Xt=Z(()=>{},(t,n)=>{t.setTime(+t+n)},(t,n)=>n-t);Xt.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Z(n=>{n.setTime(Math.floor(n/t)*t)},(n,e)=>{n.setTime(+n+e*t)},(n,e)=>(e-n)/t):Xt);Xt.range;const ct=1e3,et=ct*60,lt=et*60,ht=lt*24,Ln=ht*7,fe=ht*30,yn=ht*365,St=Z(t=>{t.setTime(t-t.getMilliseconds())},(t,n)=>{t.setTime(+t+n*ct)},(t,n)=>(n-t)/ct,t=>t.getUTCSeconds());St.range;const In=Z(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ct)},(t,n)=>{t.setTime(+t+n*et)},(t,n)=>(n-t)/et,t=>t.getMinutes());In.range;const Do=Z(t=>{t.setUTCSeconds(0,0)},(t,n)=>{t.setTime(+t+n*et)},(t,n)=>(n-t)/et,t=>t.getUTCMinutes());Do.range;const Hn=Z(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ct-t.getMinutes()*et)},(t,n)=>{t.setTime(+t+n*lt)},(t,n)=>(n-t)/lt,t=>t.getHours());Hn.range;const Ao=Z(t=>{t.setUTCMinutes(0,0,0)},(t,n)=>{t.setTime(+t+n*lt)},(t,n)=>(n-t)/lt,t=>t.getUTCHours());Ao.range;const It=Z(t=>t.setHours(0,0,0,0),(t,n)=>t.setDate(t.getDate()+n),(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*et)/ht,t=>t.getDate()-1);It.range;const Yn=Z(t=>{t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n)},(t,n)=>(n-t)/ht,t=>t.getUTCDate()-1);Yn.range;const Uo=Z(t=>{t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n)},(t,n)=>(n-t)/ht,t=>Math.floor(t/ht));Uo.range;function Mt(t){return Z(n=>{n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)},(n,e)=>{n.setDate(n.getDate()+e*7)},(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*et)/Ln)}const en=Mt(0),Qt=Mt(1),No=Mt(2),Eo=Mt(3),Ct=Mt(4),zo=Mt(5),$o=Mt(6);en.range;Qt.range;No.range;Eo.range;Ct.range;zo.range;$o.range;function _t(t){return Z(n=>{n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e*7)},(n,e)=>(e-n)/Ln)}const nr=_t(0),Kt=_t(1),Fo=_t(2),Lo=_t(3),Dt=_t(4),Io=_t(5),Ho=_t(6);nr.range;Kt.range;Fo.range;Lo.range;Dt.range;Io.range;Ho.range;const Pn=Z(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,n)=>{t.setMonth(t.getMonth()+n)},(t,n)=>n.getMonth()-t.getMonth()+(n.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Pn.range;const Yo=Z(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCMonth(t.getUTCMonth()+n)},(t,n)=>n.getUTCMonth()-t.getUTCMonth()+(n.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Yo.range;const ft=Z(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n)},(t,n)=>n.getFullYear()-t.getFullYear(),t=>t.getFullYear());ft.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Z(n=>{n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e*t)});ft.range;const yt=Z(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n)},(t,n)=>n.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());yt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Z(n=>{n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e*t)});yt.range;function Po(t,n,e,r,i,a){const o=[[St,1,ct],[St,5,5*ct],[St,15,15*ct],[St,30,30*ct],[a,1,et],[a,5,5*et],[a,15,15*et],[a,30,30*et],[i,1,lt],[i,3,3*lt],[i,6,6*lt],[i,12,12*lt],[r,1,ht],[r,2,2*ht],[e,1,Ln],[n,1,fe],[n,3,3*fe],[t,1,yn]];function u(c,m,h){const l=m<c;l&&([c,m]=[m,c]);const d=h&&typeof h.range=="function"?h:s(c,m,h),T=d?d.range(c,+m+1):[];return l?T.reverse():T}function s(c,m,h){const l=Math.abs(m-c)/h,d=En(([,,F])=>F).right(o,l);if(d===o.length)return t.every(Sn(c/yn,m/yn,h));if(d===0)return Xt.every(Math.max(Sn(c,m,h),1));const[T,$]=o[l/o[d-1][2]<o[d][2]/l?d-1:d];return T.every($)}return[u,s]}const[Ro,Wo]=Po(ft,Pn,en,It,Hn,In);function Mn(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function _n(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function At(t,n,e){return{y:t,m:n,d:e,H:0,M:0,S:0,L:0}}function Oo(t){var n=t.dateTime,e=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,u=t.months,s=t.shortMonths,c=Ut(i),m=Nt(i),h=Ut(a),l=Nt(a),d=Ut(o),T=Nt(o),$=Ut(u),F=Nt(u),_=Ut(s),I=Nt(s),D={a:v,A:k,b:w,B:A,c:null,d:Me,e:Me,f:fa,g:wa,G:Sa,H:ca,I:la,j:ha,L:er,m:ma,M:ga,p:L,q:W,Q:ve,s:we,S:da,u:pa,U:ya,V:Ma,w:_a,W:xa,x:null,X:null,y:va,Y:Ta,Z:ka,"%":xe},N={a:nt,A:G,b:Q,B:rt,c:null,d:_e,e:_e,f:Aa,g:Ya,G:Ra,H:ba,I:Ca,j:Da,L:ir,m:Ua,M:Na,p:K,q:it,Q:ve,s:we,S:Ea,u:za,U:$a,V:Fa,w:La,W:Ia,x:null,X:null,y:Ha,Y:Pa,Z:Wa,"%":xe},C={a:j,A:S,b:R,B:P,c:f,d:pe,e:pe,f:oa,g:de,G:ge,H:ye,I:ye,j:na,L:ia,m:ta,M:ea,p:q,q:Jo,Q:ua,s:sa,S:ra,u:qo,U:Vo,V:Xo,w:Zo,W:Qo,x,X:g,y:de,Y:ge,Z:Ko,"%":aa};D.x=y(e,D),D.X=y(r,D),D.c=y(n,D),N.x=y(e,N),N.X=y(r,N),N.c=y(n,N);function y(M,U){return function(E){var p=[],X=-1,H=0,J=M.length,tt,gt,Wn;for(E instanceof Date||(E=new Date(+E));++X<J;)M.charCodeAt(X)===37&&(p.push(M.slice(H,X)),(gt=me[tt=M.charAt(++X)])!=null?tt=M.charAt(++X):gt=tt==="e"?" ":"0",(Wn=U[tt])&&(tt=Wn(E,gt)),p.push(tt),H=X+1);return p.push(M.slice(H,X)),p.join("")}}function b(M,U){return function(E){var p=At(1900,void 0,1),X=O(p,M,E+="",0),H,J;if(X!=E.length)return null;if("Q"in p)return new Date(p.Q);if("s"in p)return new Date(p.s*1e3+("L"in p?p.L:0));if(U&&!("Z"in p)&&(p.Z=0),"p"in p&&(p.H=p.H%12+p.p*12),p.m===void 0&&(p.m="q"in p?p.q:0),"V"in p){if(p.V<1||p.V>53)return null;"w"in p||(p.w=1),"Z"in p?(H=_n(At(p.y,0,1)),J=H.getUTCDay(),H=J>4||J===0?Kt.ceil(H):Kt(H),H=Yn.offset(H,(p.V-1)*7),p.y=H.getUTCFullYear(),p.m=H.getUTCMonth(),p.d=H.getUTCDate()+(p.w+6)%7):(H=Mn(At(p.y,0,1)),J=H.getDay(),H=J>4||J===0?Qt.ceil(H):Qt(H),H=It.offset(H,(p.V-1)*7),p.y=H.getFullYear(),p.m=H.getMonth(),p.d=H.getDate()+(p.w+6)%7)}else("W"in p||"U"in p)&&("w"in p||(p.w="u"in p?p.u%7:"W"in p?1:0),J="Z"in p?_n(At(p.y,0,1)).getUTCDay():Mn(At(p.y,0,1)).getDay(),p.m=0,p.d="W"in p?(p.w+6)%7+p.W*7-(J+5)%7:p.w+p.U*7-(J+6)%7);return"Z"in p?(p.H+=p.Z/100|0,p.M+=p.Z%100,_n(p)):Mn(p)}}function O(M,U,E,p){for(var X=0,H=U.length,J=E.length,tt,gt;X<H;){if(p>=J)return-1;if(tt=U.charCodeAt(X++),tt===37){if(tt=U.charAt(X++),gt=C[tt in me?U.charAt(X++):tt],!gt||(p=gt(M,E,p))<0)return-1}else if(tt!=E.charCodeAt(p++))return-1}return p}function q(M,U,E){var p=c.exec(U.slice(E));return p?(M.p=m.get(p[0].toLowerCase()),E+p[0].length):-1}function j(M,U,E){var p=d.exec(U.slice(E));return p?(M.w=T.get(p[0].toLowerCase()),E+p[0].length):-1}function S(M,U,E){var p=h.exec(U.slice(E));return p?(M.w=l.get(p[0].toLowerCase()),E+p[0].length):-1}function R(M,U,E){var p=_.exec(U.slice(E));return p?(M.m=I.get(p[0].toLowerCase()),E+p[0].length):-1}function P(M,U,E){var p=$.exec(U.slice(E));return p?(M.m=F.get(p[0].toLowerCase()),E+p[0].length):-1}function f(M,U,E){return O(M,n,U,E)}function x(M,U,E){return O(M,e,U,E)}function g(M,U,E){return O(M,r,U,E)}function v(M){return o[M.getDay()]}function k(M){return a[M.getDay()]}function w(M){return s[M.getMonth()]}function A(M){return u[M.getMonth()]}function L(M){return i[+(M.getHours()>=12)]}function W(M){return 1+~~(M.getMonth()/3)}function nt(M){return o[M.getUTCDay()]}function G(M){return a[M.getUTCDay()]}function Q(M){return s[M.getUTCMonth()]}function rt(M){return u[M.getUTCMonth()]}function K(M){return i[+(M.getUTCHours()>=12)]}function it(M){return 1+~~(M.getUTCMonth()/3)}return{format:function(M){var U=y(M+="",D);return U.toString=function(){return M},U},parse:function(M){var U=b(M+="",!1);return U.toString=function(){return M},U},utcFormat:function(M){var U=y(M+="",N);return U.toString=function(){return M},U},utcParse:function(M){var U=b(M+="",!0);return U.toString=function(){return M},U}}}var me={"-":"",_:" ",0:"0"},V=/^\s*\d+/,Bo=/^%/,jo=/[\\^$*+?|[\]().{}]/g;function z(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<e?new Array(e-a+1).join(n)+i:i)}function Go(t){return t.replace(jo,"\\$&")}function Ut(t){return new RegExp("^(?:"+t.map(Go).join("|")+")","i")}function Nt(t){return new Map(t.map((n,e)=>[n.toLowerCase(),e]))}function Zo(t,n,e){var r=V.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function qo(t,n,e){var r=V.exec(n.slice(e,e+1));return r?(t.u=+r[0],e+r[0].length):-1}function Vo(t,n,e){var r=V.exec(n.slice(e,e+2));return r?(t.U=+r[0],e+r[0].length):-1}function Xo(t,n,e){var r=V.exec(n.slice(e,e+2));return r?(t.V=+r[0],e+r[0].length):-1}function Qo(t,n,e){var r=V.exec(n.slice(e,e+2));return r?(t.W=+r[0],e+r[0].length):-1}function ge(t,n,e){var r=V.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function de(t,n,e){var r=V.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function Ko(t,n,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function Jo(t,n,e){var r=V.exec(n.slice(e,e+1));return r?(t.q=r[0]*3-3,e+r[0].length):-1}function ta(t,n,e){var r=V.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function pe(t,n,e){var r=V.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function na(t,n,e){var r=V.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function ye(t,n,e){var r=V.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function ea(t,n,e){var r=V.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function ra(t,n,e){var r=V.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function ia(t,n,e){var r=V.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function oa(t,n,e){var r=V.exec(n.slice(e,e+6));return r?(t.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function aa(t,n,e){var r=Bo.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function ua(t,n,e){var r=V.exec(n.slice(e));return r?(t.Q=+r[0],e+r[0].length):-1}function sa(t,n,e){var r=V.exec(n.slice(e));return r?(t.s=+r[0],e+r[0].length):-1}function Me(t,n){return z(t.getDate(),n,2)}function ca(t,n){return z(t.getHours(),n,2)}function la(t,n){return z(t.getHours()%12||12,n,2)}function ha(t,n){return z(1+It.count(ft(t),t),n,3)}function er(t,n){return z(t.getMilliseconds(),n,3)}function fa(t,n){return er(t,n)+"000"}function ma(t,n){return z(t.getMonth()+1,n,2)}function ga(t,n){return z(t.getMinutes(),n,2)}function da(t,n){return z(t.getSeconds(),n,2)}function pa(t){var n=t.getDay();return n===0?7:n}function ya(t,n){return z(en.count(ft(t)-1,t),n,2)}function rr(t){var n=t.getDay();return n>=4||n===0?Ct(t):Ct.ceil(t)}function Ma(t,n){return t=rr(t),z(Ct.count(ft(t),t)+(ft(t).getDay()===4),n,2)}function _a(t){return t.getDay()}function xa(t,n){return z(Qt.count(ft(t)-1,t),n,2)}function va(t,n){return z(t.getFullYear()%100,n,2)}function wa(t,n){return t=rr(t),z(t.getFullYear()%100,n,2)}function Ta(t,n){return z(t.getFullYear()%1e4,n,4)}function Sa(t,n){var e=t.getDay();return t=e>=4||e===0?Ct(t):Ct.ceil(t),z(t.getFullYear()%1e4,n,4)}function ka(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+z(n/60|0,"0",2)+z(n%60,"0",2)}function _e(t,n){return z(t.getUTCDate(),n,2)}function ba(t,n){return z(t.getUTCHours(),n,2)}function Ca(t,n){return z(t.getUTCHours()%12||12,n,2)}function Da(t,n){return z(1+Yn.count(yt(t),t),n,3)}function ir(t,n){return z(t.getUTCMilliseconds(),n,3)}function Aa(t,n){return ir(t,n)+"000"}function Ua(t,n){return z(t.getUTCMonth()+1,n,2)}function Na(t,n){return z(t.getUTCMinutes(),n,2)}function Ea(t,n){return z(t.getUTCSeconds(),n,2)}function za(t){var n=t.getUTCDay();return n===0?7:n}function $a(t,n){return z(nr.count(yt(t)-1,t),n,2)}function or(t){var n=t.getUTCDay();return n>=4||n===0?Dt(t):Dt.ceil(t)}function Fa(t,n){return t=or(t),z(Dt.count(yt(t),t)+(yt(t).getUTCDay()===4),n,2)}function La(t){return t.getUTCDay()}function Ia(t,n){return z(Kt.count(yt(t)-1,t),n,2)}function Ha(t,n){return z(t.getUTCFullYear()%100,n,2)}function Ya(t,n){return t=or(t),z(t.getUTCFullYear()%100,n,2)}function Pa(t,n){return z(t.getUTCFullYear()%1e4,n,4)}function Ra(t,n){var e=t.getUTCDay();return t=e>=4||e===0?Dt(t):Dt.ceil(t),z(t.getUTCFullYear()%1e4,n,4)}function Wa(){return"+0000"}function xe(){return"%"}function ve(t){return+t}function we(t){return Math.floor(+t/1e3)}var xt,Jt,ar;Oa({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Oa(t){return xt=Oo(t),Jt=xt.format,ar=xt.parse,xt.utcFormat,xt.utcParse,xt}function Ba(t){return new Date(t)}function ja(t){return t instanceof Date?+t:+new Date(+t)}function ur(t,n,e,r,i,a,o,u,s,c){var m=tr(),h=m.invert,l=m.domain,d=c(".%L"),T=c(":%S"),$=c("%I:%M"),F=c("%I %p"),_=c("%a %d"),I=c("%b %d"),D=c("%B"),N=c("%Y");function C(y){return(s(y)<y?d:u(y)<y?T:o(y)<y?$:a(y)<y?F:r(y)<y?i(y)<y?_:I:e(y)<y?D:N)(y)}return m.invert=function(y){return new Date(h(y))},m.domain=function(y){return arguments.length?l(Array.from(y,ja)):l().map(Ba)},m.ticks=function(y){var b=l();return t(b[0],b[b.length-1],y??10)},m.tickFormat=function(y,b){return b==null?C:c(b)},m.nice=function(y){var b=l();return(!y||typeof y.range!="function")&&(y=n(b[0],b[b.length-1],y??10)),y?l(Co(b,y)):m},m.copy=function(){return Je(m,ur(t,n,e,r,i,a,o,u,s,c))},m}function Ga(){return Ke.apply(ur(Ro,Wo,ft,Pn,en,It,Hn,In,St,Jt).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function vt(t){return function(){return t}}function Za(t){let n=3;return t.digits=function(e){if(!arguments.length)return n;if(e==null)n=null;else{const r=Math.floor(e);if(!(r>=0))throw new RangeError(`invalid digits: ${e}`);n=r}return t},()=>new gi(n)}function qa(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function sr(t){this._context=t}sr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n);break}}};function cr(t){return new sr(t)}function Va(t){return t[0]}function Xa(t){return t[1]}function lr(t,n){var e=vt(!0),r=null,i=cr,a=null,o=Za(u);t=typeof t=="function"?t:t===void 0?Va:vt(t),n=typeof n=="function"?n:n===void 0?Xa:vt(n);function u(s){var c,m=(s=qa(s)).length,h,l=!1,d;for(r==null&&(a=i(d=o())),c=0;c<=m;++c)!(c<m&&e(h=s[c],c,s))===l&&((l=!l)?a.lineStart():a.lineEnd()),l&&a.point(+t(h,c,s),+n(h,c,s));if(d)return a=null,d+""||null}return u.x=function(s){return arguments.length?(t=typeof s=="function"?s:vt(+s),u):t},u.y=function(s){return arguments.length?(n=typeof s=="function"?s:vt(+s),u):n},u.defined=function(s){return arguments.length?(e=typeof s=="function"?s:vt(!!s),u):e},u.curve=function(s){return arguments.length?(i=s,r!=null&&(a=i(r)),u):i},u.context=function(s){return arguments.length?(s==null?r=a=null:a=i(r=s),u):r},u}var Qa=fr(cr);function hr(t){this._curve=t}hr.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}};function fr(t){function n(e){return new hr(t(e))}return n._curve=t,n}function Ka(t){var n=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(e){return arguments.length?n(fr(e)):n()._curve},t}function Te(){return Ka(lr().curve(Qa))}function Se(t,n,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+e)/6)}function Rn(t){this._context=t}Rn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Se(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Se(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function mr(t,n){this._basis=new Rn(t),this._beta=n}mr.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,e=t.length-1;if(e>0)for(var r=t[0],i=n[0],a=t[e]-r,o=n[e]-i,u=-1,s;++u<=e;)s=u/e,this._basis.point(this._beta*t[u]+(1-this._beta)*(r+s*a),this._beta*n[u]+(1-this._beta)*(i+s*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};const ke=function t(n){function e(r){return n===1?new Rn(r):new mr(r,n)}return e.beta=function(r){return t(+r)},e}(.85),Wt=t=>()=>t;function Ja(t,{sourceEvent:n,target:e,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function xn(t){t.stopImmediatePropagation()}function Et(t){t.preventDefault(),t.stopImmediatePropagation()}function tu(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function nu(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function be(){return this.__zoom||Lt}function eu(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function ru(){return navigator.maxTouchPoints||"ontouchstart"in this}function iu(t,n,e){var r=t.invertX(n[0][0])-e[0][0],i=t.invertX(n[1][0])-e[1][0],a=t.invertY(n[0][1])-e[0][1],o=t.invertY(n[1][1])-e[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function ou(){var t=tu,n=nu,e=iu,r=eu,i=ru,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],u=250,s=Ge,c=wr("start","zoom","end"),m,h,l,d=500,T=150,$=0,F=10;function _(f){f.property("__zoom",be).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",q).on("dblclick.zoom",j).filter(i).on("touchstart.zoom",S).on("touchmove.zoom",R).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(f,x,g,v){var k=f.selection?f.selection():f;k.property("__zoom",be),f!==k?C(f,x,g,v):k.interrupt().each(function(){y(this,arguments).event(v).start().zoom(null,typeof x=="function"?x.apply(this,arguments):x).end()})},_.scaleBy=function(f,x,g,v){_.scaleTo(f,function(){var k=this.__zoom.k,w=typeof x=="function"?x.apply(this,arguments):x;return k*w},g,v)},_.scaleTo=function(f,x,g,v){_.transform(f,function(){var k=n.apply(this,arguments),w=this.__zoom,A=g==null?N(k):typeof g=="function"?g.apply(this,arguments):g,L=w.invert(A),W=typeof x=="function"?x.apply(this,arguments):x;return e(D(I(w,W),A,L),k,o)},g,v)},_.translateBy=function(f,x,g,v){_.transform(f,function(){return e(this.__zoom.translate(typeof x=="function"?x.apply(this,arguments):x,typeof g=="function"?g.apply(this,arguments):g),n.apply(this,arguments),o)},null,v)},_.translateTo=function(f,x,g,v,k){_.transform(f,function(){var w=n.apply(this,arguments),A=this.__zoom,L=v==null?N(w):typeof v=="function"?v.apply(this,arguments):v;return e(Lt.translate(L[0],L[1]).scale(A.k).translate(typeof x=="function"?-x.apply(this,arguments):-x,typeof g=="function"?-g.apply(this,arguments):-g),w,o)},v,k)};function I(f,x){return x=Math.max(a[0],Math.min(a[1],x)),x===f.k?f:new on(x,f.x,f.y)}function D(f,x,g){var v=x[0]-g[0]*f.k,k=x[1]-g[1]*f.k;return v===f.x&&k===f.y?f:new on(f.k,v,k)}function N(f){return[(+f[0][0]+ +f[1][0])/2,(+f[0][1]+ +f[1][1])/2]}function C(f,x,g,v){f.on("start.zoom",function(){y(this,arguments).event(v).start()}).on("interrupt.zoom end.zoom",function(){y(this,arguments).event(v).end()}).tween("zoom",function(){var k=this,w=arguments,A=y(k,w).event(v),L=n.apply(k,w),W=g==null?N(L):typeof g=="function"?g.apply(k,w):g,nt=Math.max(L[1][0]-L[0][0],L[1][1]-L[0][1]),G=k.__zoom,Q=typeof x=="function"?x.apply(k,w):x,rt=s(G.invert(W).concat(nt/G.k),Q.invert(W).concat(nt/Q.k));return function(K){if(K===1)K=Q;else{var it=rt(K),M=nt/it[2];K=new on(M,W[0]-it[0]*M,W[1]-it[1]*M)}A.zoom(null,K)}})}function y(f,x,g){return!g&&f.__zooming||new b(f,x)}function b(f,x){this.that=f,this.args=x,this.active=0,this.sourceEvent=null,this.extent=n.apply(f,x),this.taps=0}b.prototype={event:function(f){return f&&(this.sourceEvent=f),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(f,x){return this.mouse&&f!=="mouse"&&(this.mouse[1]=x.invert(this.mouse[0])),this.touch0&&f!=="touch"&&(this.touch0[1]=x.invert(this.touch0[0])),this.touch1&&f!=="touch"&&(this.touch1[1]=x.invert(this.touch1[0])),this.that.__zoom=x,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(f){var x=B(this.that).datum();c.call(f,this.that,new Ja(f,{sourceEvent:this.sourceEvent,target:_,type:f,transform:this.that.__zoom,dispatch:c}),x)}};function O(f,...x){if(!t.apply(this,arguments))return;var g=y(this,x).event(f),v=this.__zoom,k=Math.max(a[0],Math.min(a[1],v.k*Math.pow(2,r.apply(this,arguments)))),w=dt(f);if(g.wheel)(g.mouse[0][0]!==w[0]||g.mouse[0][1]!==w[1])&&(g.mouse[1]=v.invert(g.mouse[0]=w)),clearTimeout(g.wheel);else{if(v.k===k)return;g.mouse=[w,v.invert(w)],an(this),g.start()}Et(f),g.wheel=setTimeout(A,T),g.zoom("mouse",e(D(I(v,k),g.mouse[0],g.mouse[1]),g.extent,o));function A(){g.wheel=null,g.end()}}function q(f,...x){if(l||!t.apply(this,arguments))return;var g=f.currentTarget,v=y(this,x,!0).event(f),k=B(f.view).on("mousemove.zoom",W,!0).on("mouseup.zoom",nt,!0),w=dt(f,g),A=f.clientX,L=f.clientY;qr(f.view),xn(f),v.mouse=[w,this.__zoom.invert(w)],an(this),v.start();function W(G){if(Et(G),!v.moved){var Q=G.clientX-A,rt=G.clientY-L;v.moved=Q*Q+rt*rt>$}v.event(G).zoom("mouse",e(D(v.that.__zoom,v.mouse[0]=dt(G,g),v.mouse[1]),v.extent,o))}function nt(G){k.on("mousemove.zoom mouseup.zoom",null),Vr(G.view,v.moved),Et(G),v.event(G).end()}}function j(f,...x){if(t.apply(this,arguments)){var g=this.__zoom,v=dt(f.changedTouches?f.changedTouches[0]:f,this),k=g.invert(v),w=g.k*(f.shiftKey?.5:2),A=e(D(I(g,w),v,k),n.apply(this,x),o);Et(f),u>0?B(this).transition().duration(u).call(C,A,v,f):B(this).call(_.transform,A,v,f)}}function S(f,...x){if(t.apply(this,arguments)){var g=f.touches,v=g.length,k=y(this,x,f.changedTouches.length===v).event(f),w,A,L,W;for(xn(f),A=0;A<v;++A)L=g[A],W=dt(L,this),W=[W,this.__zoom.invert(W),L.identifier],k.touch0?!k.touch1&&k.touch0[2]!==W[2]&&(k.touch1=W,k.taps=0):(k.touch0=W,w=!0,k.taps=1+!!m);m&&(m=clearTimeout(m)),w&&(k.taps<2&&(h=W[0],m=setTimeout(function(){m=null},d)),an(this),k.start())}}function R(f,...x){if(this.__zooming){var g=y(this,x).event(f),v=f.changedTouches,k=v.length,w,A,L,W;for(Et(f),w=0;w<k;++w)A=v[w],L=dt(A,this),g.touch0&&g.touch0[2]===A.identifier?g.touch0[0]=L:g.touch1&&g.touch1[2]===A.identifier&&(g.touch1[0]=L);if(A=g.that.__zoom,g.touch1){var nt=g.touch0[0],G=g.touch0[1],Q=g.touch1[0],rt=g.touch1[1],K=(K=Q[0]-nt[0])*K+(K=Q[1]-nt[1])*K,it=(it=rt[0]-G[0])*it+(it=rt[1]-G[1])*it;A=I(A,Math.sqrt(K/it)),L=[(nt[0]+Q[0])/2,(nt[1]+Q[1])/2],W=[(G[0]+rt[0])/2,(G[1]+rt[1])/2]}else if(g.touch0)L=g.touch0[0],W=g.touch0[1];else return;g.zoom("touch",e(D(A,L,W),g.extent,o))}}function P(f,...x){if(this.__zooming){var g=y(this,x).event(f),v=f.changedTouches,k=v.length,w,A;for(xn(f),l&&clearTimeout(l),l=setTimeout(function(){l=null},d),w=0;w<k;++w)A=v[w],g.touch0&&g.touch0[2]===A.identifier?delete g.touch0:g.touch1&&g.touch1[2]===A.identifier&&delete g.touch1;if(g.touch1&&!g.touch0&&(g.touch0=g.touch1,delete g.touch1),g.touch0)g.touch0[1]=this.__zoom.invert(g.touch0[0]);else if(g.end(),g.taps===2&&(A=dt(A,this),Math.hypot(h[0]-A[0],h[1]-A[1])<F)){var L=B(this).on("dblclick.zoom");L&&L.apply(this,arguments)}}}return _.wheelDelta=function(f){return arguments.length?(r=typeof f=="function"?f:Wt(+f),_):r},_.filter=function(f){return arguments.length?(t=typeof f=="function"?f:Wt(!!f),_):t},_.touchable=function(f){return arguments.length?(i=typeof f=="function"?f:Wt(!!f),_):i},_.extent=function(f){return arguments.length?(n=typeof f=="function"?f:Wt([[+f[0][0],+f[0][1]],[+f[1][0],+f[1][1]]]),_):n},_.scaleExtent=function(f){return arguments.length?(a[0]=+f[0],a[1]=+f[1],_):[a[0],a[1]]},_.translateExtent=function(f){return arguments.length?(o[0][0]=+f[0][0],o[1][0]=+f[1][0],o[0][1]=+f[0][1],o[1][1]=+f[1][1],_):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},_.constrain=function(f){return arguments.length?(e=f,_):e},_.duration=function(f){return arguments.length?(u=+f,_):u},_.interpolate=function(f){return arguments.length?(s=f,_):s},_.on=function(){var f=c.on.apply(c,arguments);return f===c?_:f},_.clickDistance=function(f){return arguments.length?($=(f=+f)*f,_):Math.sqrt($)},_.tapDistance=function(f){return arguments.length?(F=+f,_):F},_}const au="data/circle_packing_data.json",uu="circle_packing",su=800,cu=800;class lu{constructor(){Y(this,"data");Y(this,"width",su);Y(this,"height",cu);this.loadData().then(()=>{this.initPacking()})}async loadData(){return new Promise((n,e)=>{Le(au).then(r=>{this.data=r,n()})})}initPacking(){const n=h=>Mo().size([this.width,this.height]).padding(3)(tn(h).sum(l=>l.value).sort((l,d)=>d.value-l.value));Fn(",d");const e=nn().domain([0,2]).range(["#F6F6F6","#2D327D"]).interpolate(hi),r=n(this.data);let i=r,a;const o=B(`#${uu}`).append("svg").attr("viewBox",`-${this.width/2} -${this.height/2} ${this.width} ${this.height}`).style("display","block").style("margin","0 -14px").style("background",e(0)).style("cursor","pointer").on("click",h=>m(h,r)),u=o.append("g").selectAll("circle").data(r.descendants().slice(1)).join("circle").attr("fill",h=>h.children?e(h.depth):"#FFFFFF").attr("pointer-events",h=>h.children?null:"none").on("mouseover",function(){B(this).attr("stroke","#000")}).on("mouseout",function(){B(this).attr("stroke",null)}).on("click",(h,l)=>i!==l&&(m(h,l),h.stopPropagation())),s=o.append("g").style("font","10px sans-serif").attr("pointer-events","none").attr("text-anchor","middle").selectAll("text").data(r.descendants()).join("text").style("fill-opacity",h=>h.parent===r?1:0).style("display",h=>h.parent===r?"inline":"none").text(h=>h.data.name),c=h=>{const l=this.width/h[2];a=h,s.attr("transform",d=>`translate(${(d.x-h[0])*l},${(d.y-h[1])*l})`),u.attr("transform",d=>`translate(${(d.x-h[0])*l},${(d.y-h[1])*l})`),u.attr("r",d=>d.r*l)};c([r.x,r.y,r.r*2]);function m(h,l){i=l;const d=o.transition().duration(h.altKey?7500:750).tween("zoom",T=>{const $=Ge(a,[i.x,i.y,i.r*2]);return F=>c($(F))});s.filter(function(T){return T.parent===i||this.style.display==="inline"}).transition(d).style("fill-opacity",T=>T.parent===i?1:0).on("start",function(T){T.parent===i&&(this.style.display="inline")}).on("end",function(T){T.parent!==i&&(this.style.display="none")})}}}const gr="data/network/networks/transports/web_data/",hu=gr+"network_edges.csv",fu=gr+"network_nodes.csv",mu="select_cantons",gu="hierarchy",du=200,pu=20,yu=800,Mu=800,_u=1,xu=10,vu=.1,wu=10,mt={ZH:"#c94be1",BE:"#b2e431",LU:"#8547e4",UR:"#6cd44c",SZ:"#5527b6",OW:"#ccc842",NW:"#8270f6",GL:"#57dc84",ZG:"#d63ebf",FR:"#6eae45",SO:"#7557d3",BS:"#db9326",BL:"#5581f2",SH:"#e4441c",AR:"#3d1b7f",AI:"#c85d2c",SG:"#7d6cd5",GR:"#d13f3c",AG:"#7638a1",TG:"#da305f",TI:"#d077dd",VD:"#e85684",GE:"#a93a99",NE:"#d22e75",VS:"#d940a3",JU:"#d53e8d"},vn="#EB0000",Ce=5,ot=750;class Tu{constructor(){Y(this,"root");Y(this,"edges");Y(this,"nodes");Y(this,"selectedEdges");Y(this,"selectedNodes");Y(this,"width",yu);Y(this,"height",Mu);Y(this,"radius");Y(this,"margin",du);Y(this,"svg");Y(this,"g");Y(this,"zoomBehavior");Y(this,"weightScale");Y(this,"defaultZoomState",Lt);this.loadData().then(()=>{this.initStaticElements(),this.updateBundle()})}async loadData(){return new Promise((n,e)=>{Kn(fu).then(r=>{Kn(hu).then(i=>{r=r.filter(function(s){return s.is_train_stop==="True"}),i=i.filter(function(s){return r.some(function(c){return c.id===s.source&&c.is_train_stop==="True"})&&r.some(function(c){return c.id===s.target&&c.is_train_stop==="True"})});const a=Pr(i,function(s){return parseInt(s.weight)})??0,o=Ie(i,function(s){return parseInt(s.weight)})??0;if(this.weightScale=nn().domain([a,o]).range([_u,xu]),document.getElementById(mu)!==null){const s=Object.keys(mt).map(m=>{const h=document.createElement("div");return h.classList.add("custom-option"),h.dataset.value=m,h.textContent=m,h}),c=document.getElementById("select_cantons");for(const m of s)c.appendChild(m);c.addEventListener("click",m=>{const h=m.target;if(h.classList.contains("custom-option")){h.classList.toggle("selected"),h.classList.contains("selected")?h.style.backgroundColor=mt[h.dataset.value]:h.style.backgroundColor="";const l=c.querySelectorAll(".custom-option.selected"),d=Array.from(l).map(T=>T.dataset.value);this.filterByCantons(d,!0)}})}this.nodes=r,this.edges=i,this.filterByCantons([],!1),n()})})})}initStaticElements(){this.zoomBehavior=ou().scaleExtent([vu,wu]).on("zoom",n=>this.zoomed(n)),this.svg=B(`#${gu}`).append("svg").attr("width",this.width).attr("height",this.height).call(this.zoomBehavior),this.g=this.svg.append("g"),this.g.append("g").attr("class","links"),this.g.append("g").attr("class","nodes")}buildRoot(){const n={name:"Network",children:[]};Zn(this.selectedNodes,o=>o.canton).forEach((o,u)=>{const s={name:u,children:[]};Zn(o,m=>m.city).forEach((m,h)=>{const l={name:h,children:[]};m.forEach(d=>{l.children.push({name:d.label,canton:d.canton,city:d.city})}),s.children.push(l)}),n.children.push(s)});const r={};this.selectedNodes.forEach(function(o){r[o.id]=o.label}),this.selectedEdges=this.selectedEdges.map(function(o){return[{name:r[o.source],id:o.source,weight:o.weight},{name:r[o.target],id:o.target,weight:o.weight}]}),this.root=tn(n),Li().size([360,this.radius])(this.root);const a=new Map(this.root.leaves().map(o=>[o.data.name,o]));for(const o of this.root.leaves())o.incoming=[],o.outgoing=[],this.selectedEdges.filter(s=>s[0].name===o.data.name).forEach(s=>{const c=a.get(s[1].name);c&&o.outgoing.push({nodes:[o,c],weight:s[0].weight})});for(const o of this.root.leaves())for(const u of o.outgoing)u.nodes[1].incoming.push(u)}updateBundle(){this.radius=pu*this.selectedNodes.length/(2*Math.PI);const n=Math.min(this.width,this.height)/(2*(this.radius+this.margin)),e=this.width/2,r=this.height/2;this.defaultZoomState=Lt.translate(e,r).scale(n),this.zoomBehavior.transform(this.svg.transition().duration(ot),this.defaultZoomState),this.g.transition().duration(ot).attr("transform",this.defaultZoomState.toString()),this.buildRoot(),this.g.select("g.nodes").selectAll("g.node").data(this.root.descendants().filter(o=>o.children===void 0&&o.parent!==null),o=>`${o.data.name},${o.data.city},${o.data.canton}`).join(o=>{const u=o.append("g").filter(s=>s.children===void 0&&s.parent!==null).attr("class","node").attr("transform","rotate(0)translate(0)");u.append("circle").attr("r",4.5).attr("fill",function(s){return mt[s.data.canton]}),u.append("text").attr("dy",".31em").attr("x",function(s){return s.x<180?8:-8}).style("text-anchor",function(s){return s.x<180?"start":"end"}).attr("transform",function(s){return s.x<180?null:"rotate(180)"}).text(function(s){return s.data.name}).each(function(s){s.text=this}).attr("fill",function(s){return mt[s.data.canton]}),u.each(function(s){s.text=this}),u.on("mouseover",(s,c)=>this.overed(s,c)).on("mouseout",(s,c)=>this.outed(s,c)),u.transition().duration(ot).attr("transform",function(s){return"rotate("+(s.x-90)+")translate("+s.y+")"})},o=>{o.transition().duration(ot).attr("transform",function(u){return"rotate("+(u.x-90)+")translate("+u.y+")"}),o.each(function(u){u.text=this}),o.on("mouseover",(u,s)=>this.overed(u,s)).on("mouseout",(u,s)=>this.outed(u,s)),o.select("circle").transition().duration(ot).attr("fill",function(u){return mt[u.data.canton]}),o.select("text").transition().duration(ot).attr("x",function(u){return u.x<180?8:-8}).style("text-anchor",function(u){return u.x<180?"start":"end"}).attr("transform",function(u){return u.x<180?null:"rotate(180)"}).text(function(u){return u.data.name}).attr("fill",function(u){return mt[u.data.canton]})},o=>o.transition().duration(ot).attr("transform",u=>{const s=this.radius+1e3;return"rotate("+(u.x-90)+")translate("+s+")"}).remove());const i=Te().curve(ke.beta(.5)).radius(o=>o.y).angle(o=>o.x*Math.PI/180),a=Te().curve(ke.beta(.5)).radius(0).angle(o=>o.x*Math.PI/180);this.g.select("g.links").selectAll("path").data(this.root.leaves().flatMap(o=>o.outgoing),o=>`${o.nodes[0].data.name},${o.nodes[0].data.city},${o.nodes[0].data.canton}->${o.nodes[1].data.name},${o.nodes[1].data.city},${o.nodes[1].data.canton}`).join(o=>{const u=o.append("path").attr("stroke","black").attr("fill","none").attr("stroke-width",s=>this.weightScale(s.weight)).attr("d",s=>a(s.nodes[0].path(s.nodes[1]))).attr("stroke-opacity",0);u.each(function(s){s.path=this}),u.transition().duration(ot).attr("d",s=>i(s.nodes[0].path(s.nodes[1]))).attr("stroke-opacity",1)},o=>{o.transition().duration(ot).attr("d",u=>i(u.nodes[0].path(u.nodes[1]))).attr("stroke-width",u=>this.weightScale(u.weight))},o=>{o.transition().duration(ot/2).attr("stroke-opacity",0).remove()})}overed(n,e){this.g.select("g.links").style("mix-blend-mode",null);const i=n.currentTarget,a=parseFloat(B(i).style("font-size"));B(i).attr("font-weight","bold").attr("font-size",a*1.5),this.g.selectAll("path").filter(o=>e.incoming.some(u=>u===o)||e.outgoing.some(u=>u===o)).each(function(){const o=parseFloat(B(this).style("stroke-width"));B(this).attr("stroke",vn).attr("stroke-width",o+Ce)}),Ht(e.incoming.map(o=>o.nodes[0].text)).attr("fill",vn).attr("font-weight","bold"),Ht(e.outgoing.map(o=>o.nodes[1].text)).attr("fill",vn).attr("font-weight","bold")}outed(n,e){this.g.select("g.links").style("mix-blend-mode","multiply");const i=n.currentTarget,a=parseFloat(B(i).style("font-size"));B(i).attr("font-weight",null).attr("font-size",a/1.5),this.g.selectAll("path").filter(o=>e.incoming.some(u=>u===o)||e.outgoing.some(u=>u===o)).each(function(){const o=parseFloat(B(this).style("stroke-width"));B(this).attr("stroke","black").attr("stroke-width",o-Ce)}),Ht(e.incoming.map(o=>o.nodes[0].text)).attr("fill",function(o){return mt[o.data.canton]}).attr("font-weight",null),Ht(e.outgoing.map(o=>o.nodes[1].text)).attr("fill",function(o){return mt[o.data.canton]}).attr("font-weight",null)}filterByCantons(n,e=!1){this.selectedNodes=this.nodes.filter(r=>n.includes(r.canton)),this.selectedEdges=this.edges.filter(r=>this.selectedNodes.some(i=>i.id===r.source)&&this.selectedNodes.some(i=>i.id===r.target)),e&&this.updateBundle()}zoomed(n){const e=Lt.translate(n.transform.x,n.transform.y).scale(n.transform.k);B("#hierarchy svg g").attr("transform",e)}}const wt=15,De=20,Su="data/hourly_plot",at={top:20,right:20,bottom:30,left:50},Ae=960-at.left-at.right,zt=500-at.top-at.bottom,Ue={Train:"#00A59B",Bus:"#6F2282",Boat:"#E84E10",Metro:"#FCBB00",Tram:"#143A85","Rack Railway":"#00973B"},ku="Train";class bu{constructor(){Y(this,"svg");Y(this,"data");Y(this,"parseTime",ar("%H:%M:%S"));Y(this,"xScale");Y(this,"yScale");Y(this,"startTime");Y(this,"endTime");Y(this,"bars");this.initStaticElements(),this.initPlot()}initStaticElements(){this.svg=B("#chart").append("svg").attr("width",Ae+at.left+at.right).attr("height",zt+at.top+at.bottom).append("g").attr("transform",`translate(${at.left},${at.top})`)}async loadData(n){const e=`${Su}/df_${n.toLowerCase().replace(" ","_")}.json`;return new Promise((r,i)=>{Le(e).then(a=>{r(a)})})}initData(){this.data.forEach(e=>{e.departure_time=this.parseTime(e.departure_time),e.departure_time.setYear(1970)});const n=Ur(this.data,e=>e.departure_time);this.startTime=new Date(n[0]),this.startTime.setMinutes(this.startTime.getMinutes()-De),this.endTime=new Date(n[1]),this.endTime.setMinutes(this.endTime.getMinutes()+De),this.xScale=Ga().domain([this.startTime,this.endTime]).range([0,Ae]),this.yScale=nn().domain([0,Ie(this.data,e=>e.count)]).nice().range([zt,0])}createLine(){lr().x(n=>this.xScale(n.departure_time)).y(n=>this.yScale(n.count))}createBars(){this.bars=this.svg.selectAll(".bar").data(this.data).enter().append("rect").attr("class","bar").attr("x",n=>this.xScale(n.departure_time)-wt/2).attr("y",n=>this.yScale(n.count)).attr("width",wt).attr("height",n=>zt-this.yScale(n.count)).attr("fill","#00A59B")}createAxes(){this.svg.append("g").attr("class","x axis").attr("transform",`translate(0,${zt})`).call(Vn(this.xScale).tickFormat(Jt("%H:%M"))),this.svg.append("g").attr("class","y axis").call(Xn(this.yScale))}initPlot(){this.loadData(ku).then(n=>{this.data=n,this.initData(),this.createLine(),this.createBars(),this.createAxes(),this.addButtons()})}async updatePlot(n){return new Promise((e,r)=>{this.loadData(n).then(i=>{this.data=i,this.initData(),this.bars=this.svg.selectAll(".bar").data(this.data),this.bars.join(a=>a.append("rect").attr("class","bar").attr("x",o=>this.xScale(o.departure_time)-wt/2).attr("y",this.yScale(0)).attr("width",wt).attr("height",0).attr("fill","steelblue"),a=>a.transition().duration(1e3).attr("x",o=>this.xScale(o.departure_time)-wt/2).attr("y",o=>this.yScale(o.count)).attr("width",wt).attr("height",o=>zt-this.yScale(o.count)).attr("fill",Ue[n]).each(function(o){for(let u of document.getElementById("buttons").children)u.setAttribute("style",`background-color: ${Ue[n]}`)}),a=>a.transition().duration(1e3).attr("y",this.yScale(0)).attr("height",0).remove()),this.svg.select(".x.axis").transition().duration(1e3).call(Vn(this.xScale).tickFormat(Jt("%H:%M"))),this.svg.select(".y.axis").transition().duration(1e3).call(Xn(this.yScale))})})}addButtons(){const n=["Train","Bus","Boat","Metro","Tram","Rack Railway"];for(let e=0;e<n.length;e++){const r=n[e],i=document.createElement("button");i.setAttribute("type","button"),i.setAttribute("id",r),i.innerHTML=r,i.onclick=()=>{this.updatePlot(r)},document.getElementById("buttons").appendChild(i)}}}document.addEventListener("DOMContentLoaded",()=>{new Tu,new lu,new bu});
