var yr=Object.defineProperty;var _r=(t,n,e)=>n in t?yr(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var H=(t,n,e)=>(_r(t,typeof n!="symbol"?n+"":n,e),e);import"./modulepreload-polyfill-3cfb730f.js";import{S as Gt,r as $e,a as Mr,d as Fe,e as Le,R as Ie,C as Ye,b as xr,c as vr,i as Sn,f as Gn,g as Zn,h as wr,n as an,j as Tr,k as Sr,l as It,T as un,m as sn,o as He}from"./transform-21680f05.js";import{c as kr}from"./csv-26976831.js";function jt(t,n){return t==null||n==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function br(t,n){return t==null||n==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function Fn(t){let n,e,r;t.length!==2?(n=jt,e=(u,s)=>jt(t(u),s),r=(u,s)=>t(u)-s):(n=t===jt||t===br?t:Cr,e=t,r=t);function i(u,s,c=0,m=u.length){if(c<m){if(n(s,s)!==0)return m;do{const h=c+m>>>1;e(u[h],s)<0?c=h+1:m=h}while(c<m)}return c}function a(u,s,c=0,m=u.length){if(c<m){if(n(s,s)!==0)return m;do{const h=c+m>>>1;e(u[h],s)<=0?c=h+1:m=h}while(c<m)}return c}function o(u,s,c=0,m=u.length){const h=i(u,s,c,m-1);return h>c&&r(u[h-1],s)>-r(u[h],s)?h-1:h}return{left:i,center:o,right:a}}function Cr(){return 0}function Dr(t){return t===null?NaN:+t}const Ur=Fn(jt),Ar=Ur.right;Fn(Dr).center;const Nr=Ar;function qn(t,n){let e,r;if(n===void 0)for(const i of t)i!=null&&(e===void 0?i>=i&&(e=r=i):(e>i&&(e=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=n(a,++i,t))!=null&&(e===void 0?a>=a&&(e=r=a):(e>a&&(e=a),r<a&&(r=a)))}return[e,r]}class Er extends Map{constructor(n,e=Fr){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),n!=null)for(const[r,i]of n)this.set(r,i)}get(n){return super.get(Vn(this,n))}has(n){return super.has(Vn(this,n))}set(n,e){return super.set(zr(this,n),e)}delete(n){return super.delete($r(this,n))}}function Vn({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):e}function zr({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):(t.set(r,e),e)}function $r({_intern:t,_key:n},e){const r=n(e);return t.has(r)&&(e=t.get(r),t.delete(r)),e}function Fr(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Xn(t){return t}function Qn(t,...n){return Lr(t,Xn,Xn,n)}function Lr(t,n,e,r){return function i(a,o){if(o>=r.length)return e(a);const u=new Er,s=r[o++];let c=-1;for(const m of a){const h=s(m,++c,a),l=u.get(h);l?l.push(m):u.set(h,[m])}for(const[m,h]of u)u.set(m,i(h,o));return n(u)}(t,0)}const Ir=Math.sqrt(50),Yr=Math.sqrt(10),Hr=Math.sqrt(2);function Zt(t,n,e){const r=(n-t)/Math.max(0,e),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=Ir?10:a>=Yr?5:a>=Hr?2:1;let u,s,c;return i<0?(c=Math.pow(10,-i)/o,u=Math.round(t*c),s=Math.round(n*c),u/c<t&&++u,s/c>n&&--s,c=-c):(c=Math.pow(10,i)*o,u=Math.round(t/c),s=Math.round(n/c),u*c<t&&++u,s*c>n&&--s),s<u&&.5<=e&&e<2?Zt(t,n,e*2):[u,s,c]}function Pr(t,n,e){if(n=+n,t=+t,e=+e,!(e>0))return[];if(t===n)return[t];const r=n<t,[i,a,o]=r?Zt(n,t,e):Zt(t,n,e);if(!(a>=i))return[];const u=a-i+1,s=new Array(u);if(r)if(o<0)for(let c=0;c<u;++c)s[c]=(a-c)/-o;else for(let c=0;c<u;++c)s[c]=(a-c)*o;else if(o<0)for(let c=0;c<u;++c)s[c]=(i+c)/-o;else for(let c=0;c<u;++c)s[c]=(i+c)*o;return s}function kn(t,n,e){return n=+n,t=+t,e=+e,Zt(t,n,e)[2]}function bn(t,n,e){n=+n,t=+t,e=+e;const r=n<t,i=r?kn(n,t,e):kn(t,n,e);return(r?-1:1)*(i<0?1/-i:i)}function Cn(t,n){let e;if(n===void 0)for(const r of t)r!=null&&(e<r||e===void 0&&r>=r)&&(e=r);else{let r=-1;for(let i of t)(i=n(i,++r,t))!=null&&(e<i||e===void 0&&i>=i)&&(e=i)}return e}function Rr(t,n){let e;if(n===void 0)for(const r of t)r!=null&&(e>r||e===void 0&&r>=r)&&(e=r);else{let r=-1;for(let i of t)(i=n(i,++r,t))!=null&&(e>i||e===void 0&&i>=i)&&(e=i)}return e}function Wr(t){return t}var cn=1,ln=2,Dn=3,Ft=4,Kn=1e-6;function Or(t){return"translate("+t+",0)"}function Br(t){return"translate(0,"+t+")"}function jr(t){return n=>+t(n)}function Gr(t,n){return n=Math.max(0,t.bandwidth()-n*2)/2,t.round()&&(n=Math.round(n)),e=>+t(e)+n}function Zr(){return!this.__axis}function Pe(t,n){var e=[],r=null,i=null,a=6,o=6,u=3,s=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=t===cn||t===Ft?-1:1,m=t===Ft||t===ln?"x":"y",h=t===cn||t===Dn?Or:Br;function l(g){var T=r??(n.ticks?n.ticks.apply(n,e):n.domain()),$=i??(n.tickFormat?n.tickFormat.apply(n,e):Wr),F=Math.max(a,0)+u,M=n.range(),I=+M[0]+s,D=+M[M.length-1]+s,N=(n.bandwidth?Gr:jr)(n.copy(),s),C=g.selection?g.selection():g,y=C.selectAll(".domain").data([null]),b=C.selectAll(".tick").data(T,n).order(),O=b.exit(),q=b.enter().append("g").attr("class","tick"),j=b.select("line"),S=b.select("text");y=y.merge(y.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),b=b.merge(q),j=j.merge(q.append("line").attr("stroke","currentColor").attr(m+"2",c*a)),S=S.merge(q.append("text").attr("fill","currentColor").attr(m,c*F).attr("dy",t===cn?"0em":t===Dn?"0.71em":"0.32em")),g!==C&&(y=y.transition(g),b=b.transition(g),j=j.transition(g),S=S.transition(g),O=O.transition(g).attr("opacity",Kn).attr("transform",function(R){return isFinite(R=N(R))?h(R+s):this.getAttribute("transform")}),q.attr("opacity",Kn).attr("transform",function(R){var P=this.parentNode.__axis;return h((P&&isFinite(P=P(R))?P:N(R))+s)})),O.remove(),y.attr("d",t===Ft||t===ln?o?"M"+c*o+","+I+"H"+s+"V"+D+"H"+c*o:"M"+s+","+I+"V"+D:o?"M"+I+","+c*o+"V"+s+"H"+D+"V"+c*o:"M"+I+","+s+"H"+D),b.attr("opacity",1).attr("transform",function(R){return h(N(R)+s)}),j.attr(m+"2",c*a),S.attr(m,c*F).text($),C.filter(Zr).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===ln?"start":t===Ft?"end":"middle"),C.each(function(){this.__axis=N})}return l.scale=function(g){return arguments.length?(n=g,l):n},l.ticks=function(){return e=Array.from(arguments),l},l.tickArguments=function(g){return arguments.length?(e=g==null?[]:Array.from(g),l):e.slice()},l.tickValues=function(g){return arguments.length?(r=g==null?null:Array.from(g),l):r&&r.slice()},l.tickFormat=function(g){return arguments.length?(i=g,l):i},l.tickSize=function(g){return arguments.length?(a=o=+g,l):a},l.tickSizeInner=function(g){return arguments.length?(a=+g,l):a},l.tickSizeOuter=function(g){return arguments.length?(o=+g,l):o},l.tickPadding=function(g){return arguments.length?(u=+g,l):u},l.offset=function(g){return arguments.length?(s=+g,l):s},l}function Jn(t){return Pe(Dn,t)}function te(t){return Pe(Ft,t)}function B(t){return typeof t=="string"?new Gt([[document.querySelector(t)]],[document.documentElement]):new Gt([[t]],$e)}function qr(t){let n;for(;n=t.sourceEvent;)t=n;return t}function gt(t,n){if(t=qr(t),n===void 0&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(n.getScreenCTM().inverse()),[r.x,r.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}}return[t.pageX,t.pageY]}function Ht(t){return typeof t=="string"?new Gt([document.querySelectorAll(t)],[document.documentElement]):new Gt([Mr(t)],$e)}const Un={capture:!0,passive:!1};function An(t){t.preventDefault(),t.stopImmediatePropagation()}function Vr(t){var n=t.document.documentElement,e=B(t).on("dragstart.drag",An,Un);"onselectstart"in n?e.on("selectstart.drag",An,Un):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Xr(t,n){var e=t.document.documentElement,r=B(t).on("dragstart.drag",null);n&&(r.on("click.drag",An,Un),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}const Qr=Math.PI/180,Kr=180/Math.PI,qt=18,Re=.96422,We=1,Oe=.82521,Be=4/29,kt=6/29,je=3*kt*kt,Jr=kt*kt*kt;function Ge(t){if(t instanceof ut)return new ut(t.l,t.a,t.b,t.opacity);if(t instanceof st)return Ze(t);t instanceof Ie||(t=xr(t));var n=dn(t.r),e=dn(t.g),r=dn(t.b),i=hn((.2225045*n+.7168786*e+.0606169*r)/We),a,o;return n===e&&e===r?a=o=i:(a=hn((.4360747*n+.3850649*e+.1430804*r)/Re),o=hn((.0139322*n+.0971045*e+.7141733*r)/Oe)),new ut(116*i-16,500*(a-i),200*(i-o),t.opacity)}function ti(t,n,e,r){return arguments.length===1?Ge(t):new ut(t,n,e,r??1)}function ut(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}Fe(ut,ti,Le(Ye,{brighter(t){return new ut(this.l+qt*(t??1),this.a,this.b,this.opacity)},darker(t){return new ut(this.l-qt*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return n=Re*fn(n),t=We*fn(t),e=Oe*fn(e),new Ie(mn(3.1338561*n-1.6168667*t-.4906146*e),mn(-.9787684*n+1.9161415*t+.033454*e),mn(.0719453*n-.2289914*t+1.4052427*e),this.opacity)}}));function hn(t){return t>Jr?Math.pow(t,1/3):t/je+Be}function fn(t){return t>kt?t*t*t:je*(t-Be)}function mn(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function dn(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ni(t){if(t instanceof st)return new st(t.h,t.c,t.l,t.opacity);if(t instanceof ut||(t=Ge(t)),t.a===0&&t.b===0)return new st(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*Kr;return new st(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Nn(t,n,e,r){return arguments.length===1?ni(t):new st(t,n,e,r??1)}function st(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}function Ze(t){if(isNaN(t.h))return new ut(t.l,0,0,t.opacity);var n=t.h*Qr;return new ut(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}Fe(st,Nn,Le(Ye,{brighter(t){return new st(this.h,this.c,this.l+qt*(t??1),this.opacity)},darker(t){return new st(this.h,this.c,this.l-qt*(t??1),this.opacity)},rgb(){return Ze(this).rgb()}}));function ei(t,n){n||(n=[]);var e=t?Math.min(n.length,t.length):0,r=n.slice(),i;return function(a){for(i=0;i<e;++i)r[i]=t[i]*(1-a)+n[i]*a;return r}}function ri(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ii(t,n){var e=n?n.length:0,r=t?Math.min(e,t.length):0,i=new Array(r),a=new Array(e),o;for(o=0;o<r;++o)i[o]=Ln(t[o],n[o]);for(;o<e;++o)a[o]=n[o];return function(u){for(o=0;o<r;++o)a[o]=i[o](u);return a}}function oi(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function ai(t,n){var e={},r={},i;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(i in n)i in t?e[i]=Ln(t[i],n[i]):r[i]=n[i];return function(a){for(i in e)r[i]=e[i](a);return r}}function Ln(t,n){var e=typeof n,r;return n==null||e==="boolean"?vr(n):(e==="number"?Sn:e==="string"?(r=Gn(n))?(n=r,Zn):wr:n instanceof Gn?Zn:n instanceof Date?oi:ri(n)?ei:Array.isArray(n)?ii:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?ai:Sn)(t,n)}function ui(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}var si=1e-12;function ne(t){return((t=Math.exp(t))+1/t)/2}function ci(t){return((t=Math.exp(t))-1/t)/2}function li(t){return((t=Math.exp(2*t))-1)/(t+1)}const qe=function t(n,e,r){function i(a,o){var u=a[0],s=a[1],c=a[2],m=o[0],h=o[1],l=o[2],g=m-u,T=h-s,$=g*g+T*T,F,M;if($<si)M=Math.log(l/c)/n,F=function(b){return[u+b*g,s+b*T,c*Math.exp(n*b*M)]};else{var I=Math.sqrt($),D=(l*l-c*c+r*$)/(2*c*e*I),N=(l*l-c*c-r*$)/(2*l*e*I),C=Math.log(Math.sqrt(D*D+1)-D),y=Math.log(Math.sqrt(N*N+1)-N);M=(y-C)/n,F=function(b){var O=b*M,q=ne(C),j=c/(e*I)*(q*li(n*O+C)-ci(C));return[u+j*g,s+j*T,c*q/ne(n*O+C)]}}return F.duration=M*1e3*n/Math.SQRT2,F}return i.rho=function(a){var o=Math.max(.001,+a),u=o*o,s=u*u;return t(o,u,s)},i}(Math.SQRT2,2,4);function hi(t){return function(n,e){var r=t((n=Nn(n)).h,(e=Nn(e)).h),i=an(n.c,e.c),a=an(n.l,e.l),o=an(n.opacity,e.opacity);return function(u){return n.h=r(u),n.c=i(u),n.l=a(u),n.opacity=o(u),n+""}}}const fi=hi(Tr),En=Math.PI,zn=2*En,pt=1e-6,mi=zn-pt;function Ve(t){this._+=t[0];for(let n=1,e=t.length;n<e;++n)this._+=arguments[n]+t[n]}function di(t){let n=Math.floor(t);if(!(n>=0))throw new Error(`invalid digits: ${t}`);if(n>15)return Ve;const e=10**n;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*e)/e+r[i]}}class gi{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?Ve:di(n)}moveTo(n,e){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,e){this._append`L${this._x1=+n},${this._y1=+e}`}quadraticCurveTo(n,e,r,i){this._append`Q${+n},${+e},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(n,e,r,i,a,o){this._append`C${+n},${+e},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(n,e,r,i,a){if(n=+n,e=+e,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,u=this._y1,s=r-n,c=i-e,m=o-n,h=u-e,l=m*m+h*h;if(this._x1===null)this._append`M${this._x1=n},${this._y1=e}`;else if(l>pt)if(!(Math.abs(h*s-c*m)>pt)||!a)this._append`L${this._x1=n},${this._y1=e}`;else{let g=r-o,T=i-u,$=s*s+c*c,F=g*g+T*T,M=Math.sqrt($),I=Math.sqrt(l),D=a*Math.tan((En-Math.acos(($+l-F)/(2*M*I)))/2),N=D/I,C=D/M;Math.abs(N-1)>pt&&this._append`L${n+N*m},${e+N*h}`,this._append`A${a},${a},0,0,${+(h*g>m*T)},${this._x1=n+C*s},${this._y1=e+C*c}`}}arc(n,e,r,i,a,o){if(n=+n,e=+e,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),s=r*Math.sin(i),c=n+u,m=e+s,h=1^o,l=o?i-a:a-i;this._x1===null?this._append`M${c},${m}`:(Math.abs(this._x1-c)>pt||Math.abs(this._y1-m)>pt)&&this._append`L${c},${m}`,r&&(l<0&&(l=l%zn+zn),l>mi?this._append`A${r},${r},0,1,${h},${n-u},${e-s}A${r},${r},0,1,${h},${this._x1=c},${this._y1=m}`:l>pt&&this._append`A${r},${r},0,${+(l>=En)},${h},${this._x1=n+r*Math.cos(a)},${this._y1=e+r*Math.sin(a)}`)}rect(n,e,r,i){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function pi(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function yi(t,n){return fetch(t,n).then(pi)}function _i(t){return function(n,e,r){return arguments.length===2&&typeof e=="function"&&(r=e,e=void 0),yi(n,e).then(function(i){return t(i,r)})}}var ee=_i(kr);function Mi(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Vt(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function bt(t){return t=Vt(Math.abs(t)),t?t[1]:NaN}function xi(t,n){return function(e,r){for(var i=e.length,a=[],o=0,u=t[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),a.push(e.substring(i-=u,i+u)),!((s+=u+1)>r));)u=t[o=(o+1)%t.length];return a.reverse().join(n)}}function vi(t){return function(n){return n.replace(/[0-9]/g,function(e){return t[+e]})}}var wi=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xt(t){if(!(n=wi.exec(t)))throw new Error("invalid format: "+t);var n;return new In({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}Xt.prototype=In.prototype;function In(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}In.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ti(t){t:for(var n=t.length,e=1,r=-1,i;e<n;++e)switch(t[e]){case".":r=i=e;break;case"0":r===0&&(r=e),i=e;break;default:if(!+t[e])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Xe;function Si(t,n){var e=Vt(t,n);if(!e)return t+"";var r=e[0],i=e[1],a=i-(Xe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Vt(t,Math.max(0,n+a-1))[0]}function re(t,n){var e=Vt(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const ie={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Mi,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>re(t*100,n),r:re,s:Si,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function oe(t){return t}var ae=Array.prototype.map,ue=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ki(t){var n=t.grouping===void 0||t.thousands===void 0?oe:xi(ae.call(t.grouping,Number),t.thousands+""),e=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?oe:vi(ae.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"−":t.minus+"",s=t.nan===void 0?"NaN":t.nan+"";function c(h){h=Xt(h);var l=h.fill,g=h.align,T=h.sign,$=h.symbol,F=h.zero,M=h.width,I=h.comma,D=h.precision,N=h.trim,C=h.type;C==="n"?(I=!0,C="g"):ie[C]||(D===void 0&&(D=12),N=!0,C="g"),(F||l==="0"&&g==="=")&&(F=!0,l="0",g="=");var y=$==="$"?e:$==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",b=$==="$"?r:/[%p]/.test(C)?o:"",O=ie[C],q=/[defgprs%]/.test(C);D=D===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,D)):Math.max(0,Math.min(20,D));function j(S){var R=y,P=b,f,x,d;if(C==="c")P=O(S)+P,S="";else{S=+S;var v=S<0||1/S<0;if(S=isNaN(S)?s:O(Math.abs(S),D),N&&(S=Ti(S)),v&&+S==0&&T!=="+"&&(v=!1),R=(v?T==="("?T:u:T==="-"||T==="("?"":T)+R,P=(C==="s"?ue[8+Xe/3]:"")+P+(v&&T==="("?")":""),q){for(f=-1,x=S.length;++f<x;)if(d=S.charCodeAt(f),48>d||d>57){P=(d===46?i+S.slice(f+1):S.slice(f))+P,S=S.slice(0,f);break}}}I&&!F&&(S=n(S,1/0));var k=R.length+S.length+P.length,w=k<M?new Array(M-k+1).join(l):"";switch(I&&F&&(S=n(w+S,w.length?M-P.length:1/0),w=""),g){case"<":S=R+S+P+w;break;case"=":S=R+w+S+P;break;case"^":S=w.slice(0,k=w.length>>1)+R+S+P+w.slice(k);break;default:S=w+R+S+P;break}return a(S)}return j.toString=function(){return h+""},j}function m(h,l){var g=c((h=Xt(h),h.type="f",h)),T=Math.max(-8,Math.min(8,Math.floor(bt(l)/3)))*3,$=Math.pow(10,-T),F=ue[8+T/3];return function(M){return g($*M)+F}}return{format:c,formatPrefix:m}}var Pt,Yn,Qe;bi({thousands:",",grouping:[3],currency:["$",""]});function bi(t){return Pt=ki(t),Yn=Pt.format,Qe=Pt.formatPrefix,Pt}function Ci(t){return Math.max(0,-bt(Math.abs(t)))}function Di(t,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(bt(n)/3)))*3-bt(Math.abs(t)))}function Ui(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,bt(n)-bt(t))+1}function Ai(t,n){return t.parent===n.parent?1:2}function Ni(t){return t.reduce(Ei,0)/t.length}function Ei(t,n){return t+n.x}function zi(t){return 1+t.reduce($i,0)}function $i(t,n){return Math.max(t,n.y)}function Fi(t){for(var n;n=t.children;)t=n[0];return t}function Li(t){for(var n;n=t.children;)t=n[n.length-1];return t}function Ii(){var t=Ai,n=1,e=1,r=!1;function i(a){var o,u=0;a.eachAfter(function(l){var g=l.children;g?(l.x=Ni(g),l.y=zi(g)):(l.x=o?u+=t(l,o):0,l.y=0,o=l)});var s=Fi(a),c=Li(a),m=s.x-t(s,c)/2,h=c.x+t(c,s)/2;return a.eachAfter(r?function(l){l.x=(l.x-a.x)*n,l.y=(a.y-l.y)*e}:function(l){l.x=(l.x-m)/(h-m)*n,l.y=(1-(a.y?l.y/a.y:1))*e})}return i.separation=function(a){return arguments.length?(t=a,i):t},i.size=function(a){return arguments.length?(r=!1,n=+a[0],e=+a[1],i):r?null:[n,e]},i.nodeSize=function(a){return arguments.length?(r=!0,n=+a[0],e=+a[1],i):r?[n,e]:null},i}function Yi(t){var n=0,e=t.children,r=e&&e.length;if(!r)n=1;else for(;--r>=0;)n+=e[r].value;t.value=n}function Hi(){return this.eachAfter(Yi)}function Pi(t,n){let e=-1;for(const r of this)t.call(n,r,++e,this);return this}function Ri(t,n){for(var e=this,r=[e],i,a,o=-1;e=r.pop();)if(t.call(n,e,++o,this),i=e.children)for(a=i.length-1;a>=0;--a)r.push(i[a]);return this}function Wi(t,n){for(var e=this,r=[e],i=[],a,o,u,s=-1;e=r.pop();)if(i.push(e),a=e.children)for(o=0,u=a.length;o<u;++o)r.push(a[o]);for(;e=i.pop();)t.call(n,e,++s,this);return this}function Oi(t,n){let e=-1;for(const r of this)if(t.call(n,r,++e,this))return r}function Bi(t){return this.eachAfter(function(n){for(var e=+t(n.data)||0,r=n.children,i=r&&r.length;--i>=0;)e+=r[i].value;n.value=e})}function ji(t){return this.eachBefore(function(n){n.children&&n.children.sort(t)})}function Gi(t){for(var n=this,e=Zi(n,t),r=[n];n!==e;)n=n.parent,r.push(n);for(var i=r.length;t!==e;)r.splice(i,0,t),t=t.parent;return r}function Zi(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;for(t=e.pop(),n=r.pop();t===n;)i=t,t=e.pop(),n=r.pop();return i}function qi(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n}function Vi(){return Array.from(this)}function Xi(){var t=[];return this.eachBefore(function(n){n.children||t.push(n)}),t}function Qi(){var t=this,n=[];return t.each(function(e){e!==t&&n.push({source:e.parent,target:e})}),n}function*Ki(){var t=this,n,e=[t],r,i,a;do for(n=e.reverse(),e=[];t=n.pop();)if(yield t,r=t.children)for(i=0,a=r.length;i<a;++i)e.push(r[i]);while(e.length)}function en(t,n){t instanceof Map?(t=[void 0,t],n===void 0&&(n=no)):n===void 0&&(n=to);for(var e=new Qt(t),r,i=[e],a,o,u,s;r=i.pop();)if((o=n(r.data))&&(s=(o=Array.from(o)).length))for(r.children=o,u=s-1;u>=0;--u)i.push(a=o[u]=new Qt(o[u])),a.parent=r,a.depth=r.depth+1;return e.eachBefore(ro)}function Ji(){return en(this).eachBefore(eo)}function to(t){return t.children}function no(t){return Array.isArray(t)?t[1]:null}function eo(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function ro(t){var n=0;do t.height=n;while((t=t.parent)&&t.height<++n)}function Qt(t){this.data=t,this.depth=this.height=0,this.parent=null}Qt.prototype=en.prototype={constructor:Qt,count:Hi,each:Pi,eachAfter:Wi,eachBefore:Ri,find:Oi,sum:Bi,sort:ji,path:Gi,ancestors:qi,descendants:Vi,leaves:Xi,links:Qi,copy:Ji,[Symbol.iterator]:Ki};function io(t){return t==null?null:oo(t)}function oo(t){if(typeof t!="function")throw new Error;return t}function se(){return 0}function ao(t){return function(){return t}}const uo=1664525,so=1013904223,ce=4294967296;function co(){let t=1;return()=>(t=(uo*t+so)%ce)/ce}function lo(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ho(t,n){let e=t.length,r,i;for(;e;)i=n()*e--|0,r=t[e],t[e]=t[i],t[i]=r;return t}function fo(t,n){for(var e=0,r=(t=ho(Array.from(t),n)).length,i=[],a,o;e<r;)a=t[e],o&&Ke(o,a)?++e:(o=go(i=mo(i,a)),e=0);return o}function mo(t,n){var e,r;if(gn(n,t))return[n];for(e=0;e<t.length;++e)if(Rt(n,t[e])&&gn(Lt(t[e],n),t))return[t[e],n];for(e=0;e<t.length-1;++e)for(r=e+1;r<t.length;++r)if(Rt(Lt(t[e],t[r]),n)&&Rt(Lt(t[e],n),t[r])&&Rt(Lt(t[r],n),t[e])&&gn(Je(t[e],t[r],n),t))return[t[e],t[r],n];throw new Error}function Rt(t,n){var e=t.r-n.r,r=n.x-t.x,i=n.y-t.y;return e<0||e*e<r*r+i*i}function Ke(t,n){var e=t.r-n.r+Math.max(t.r,n.r,1)*1e-9,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function gn(t,n){for(var e=0;e<n.length;++e)if(!Ke(t,n[e]))return!1;return!0}function go(t){switch(t.length){case 1:return po(t[0]);case 2:return Lt(t[0],t[1]);case 3:return Je(t[0],t[1],t[2])}}function po(t){return{x:t.x,y:t.y,r:t.r}}function Lt(t,n){var e=t.x,r=t.y,i=t.r,a=n.x,o=n.y,u=n.r,s=a-e,c=o-r,m=u-i,h=Math.sqrt(s*s+c*c);return{x:(e+a+s/h*m)/2,y:(r+o+c/h*m)/2,r:(h+i+u)/2}}function Je(t,n,e){var r=t.x,i=t.y,a=t.r,o=n.x,u=n.y,s=n.r,c=e.x,m=e.y,h=e.r,l=r-o,g=r-c,T=i-u,$=i-m,F=s-a,M=h-a,I=r*r+i*i-a*a,D=I-o*o-u*u+s*s,N=I-c*c-m*m+h*h,C=g*T-l*$,y=(T*N-$*D)/(C*2)-r,b=($*F-T*M)/C,O=(g*D-l*N)/(C*2)-i,q=(l*M-g*F)/C,j=b*b+q*q-1,S=2*(a+y*b+O*q),R=y*y+O*O-a*a,P=-(Math.abs(j)>1e-6?(S+Math.sqrt(S*S-4*j*R))/(2*j):R/S);return{x:r+y+b*P,y:i+O+q*P,r:P}}function le(t,n,e){var r=t.x-n.x,i,a,o=t.y-n.y,u,s,c=r*r+o*o;c?(a=n.r+e.r,a*=a,s=t.r+e.r,s*=s,a>s?(i=(c+s-a)/(2*c),u=Math.sqrt(Math.max(0,s/c-i*i)),e.x=t.x-i*r-u*o,e.y=t.y-i*o+u*r):(i=(c+a-s)/(2*c),u=Math.sqrt(Math.max(0,a/c-i*i)),e.x=n.x+i*r-u*o,e.y=n.y+i*o+u*r)):(e.x=n.x+e.r,e.y=n.y)}function he(t,n){var e=t.r+n.r-1e-6,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function fe(t){var n=t._,e=t.next._,r=n.r+e.r,i=(n.x*e.r+e.x*n.r)/r,a=(n.y*e.r+e.y*n.r)/r;return i*i+a*a}function Wt(t){this._=t,this.next=null,this.previous=null}function yo(t,n){if(!(a=(t=lo(t)).length))return 0;var e,r,i,a,o,u,s,c,m,h,l;if(e=t[0],e.x=0,e.y=0,!(a>1))return e.r;if(r=t[1],e.x=-r.r,r.x=e.r,r.y=0,!(a>2))return e.r+r.r;le(r,e,i=t[2]),e=new Wt(e),r=new Wt(r),i=new Wt(i),e.next=i.previous=r,r.next=e.previous=i,i.next=r.previous=e;t:for(s=3;s<a;++s){le(e._,r._,i=t[s]),i=new Wt(i),c=r.next,m=e.previous,h=r._.r,l=e._.r;do if(h<=l){if(he(c._,i._)){r=c,e.next=r,r.previous=e,--s;continue t}h+=c._.r,c=c.next}else{if(he(m._,i._)){e=m,e.next=r,r.previous=e,--s;continue t}l+=m._.r,m=m.previous}while(c!==m.next);for(i.previous=e,i.next=r,e.next=r.previous=r=i,o=fe(e);(i=i.next)!==r;)(u=fe(i))<o&&(e=i,o=u);r=e.next}for(e=[r._],i=r;(i=i.next)!==r;)e.push(i._);for(i=fo(e,n),s=0;s<a;++s)e=t[s],e.x-=i.x,e.y-=i.y;return i.r}function _o(t){return Math.sqrt(t.value)}function Mo(){var t=null,n=1,e=1,r=se;function i(a){const o=co();return a.x=n/2,a.y=e/2,t?a.eachBefore(me(t)).eachAfter(pn(r,.5,o)).eachBefore(de(1)):a.eachBefore(me(_o)).eachAfter(pn(se,1,o)).eachAfter(pn(r,a.r/Math.min(n,e),o)).eachBefore(de(Math.min(n,e)/(2*a.r))),a}return i.radius=function(a){return arguments.length?(t=io(a),i):t},i.size=function(a){return arguments.length?(n=+a[0],e=+a[1],i):[n,e]},i.padding=function(a){return arguments.length?(r=typeof a=="function"?a:ao(+a),i):r},i}function me(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function pn(t,n,e){return function(r){if(i=r.children){var i,a,o=i.length,u=t(r)*n||0,s;if(u)for(a=0;a<o;++a)i[a].r+=u;if(s=yo(i,e),u)for(a=0;a<o;++a)i[a].r-=u;r.r=s+u}}}function de(t){return function(n){var e=n.parent;n.r*=t,e&&(n.x=e.x+t*n.x,n.y=e.y+t*n.y)}}function tr(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}function xo(t){return function(){return t}}function vo(t){return+t}var ge=[0,1];function Tt(t){return t}function $n(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:xo(isNaN(n)?NaN:.5)}function wo(t,n){var e;return t>n&&(e=t,t=n,n=e),function(r){return Math.max(t,Math.min(n,r))}}function To(t,n,e){var r=t[0],i=t[1],a=n[0],o=n[1];return i<r?(r=$n(i,r),a=e(o,a)):(r=$n(r,i),a=e(a,o)),function(u){return a(r(u))}}function So(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++o<r;)i[o]=$n(t[o],t[o+1]),a[o]=e(n[o],n[o+1]);return function(u){var s=Nr(t,u,1,r)-1;return a[s](i[s](u))}}function nr(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ko(){var t=ge,n=ge,e=Ln,r,i,a,o=Tt,u,s,c;function m(){var l=Math.min(t.length,n.length);return o!==Tt&&(o=wo(t[0],t[l-1])),u=l>2?So:To,s=c=null,h}function h(l){return l==null||isNaN(l=+l)?a:(s||(s=u(t.map(r),n,e)))(r(o(l)))}return h.invert=function(l){return o(i((c||(c=u(n,t.map(r),Sn)))(l)))},h.domain=function(l){return arguments.length?(t=Array.from(l,vo),m()):t.slice()},h.range=function(l){return arguments.length?(n=Array.from(l),m()):n.slice()},h.rangeRound=function(l){return n=Array.from(l),e=ui,m()},h.clamp=function(l){return arguments.length?(o=l?!0:Tt,m()):o!==Tt},h.interpolate=function(l){return arguments.length?(e=l,m()):e},h.unknown=function(l){return arguments.length?(a=l,h):a},function(l,g){return r=l,i=g,m()}}function er(){return ko()(Tt,Tt)}function bo(t,n,e,r){var i=bn(t,n,e),a;switch(r=Xt(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(n));return r.precision==null&&!isNaN(a=Di(i,o))&&(r.precision=a),Qe(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Ui(i,Math.max(Math.abs(t),Math.abs(n))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Ci(i))&&(r.precision=a-(r.type==="%")*2);break}}return Yn(r)}function Co(t){var n=t.domain;return t.ticks=function(e){var r=n();return Pr(r[0],r[r.length-1],e??10)},t.tickFormat=function(e,r){var i=n();return bo(i[0],i[i.length-1],e??10,r)},t.nice=function(e){e==null&&(e=10);var r=n(),i=0,a=r.length-1,o=r[i],u=r[a],s,c,m=10;for(u<o&&(c=o,o=u,u=c,c=i,i=a,a=c);m-- >0;){if(c=kn(o,u,e),c===s)return r[i]=o,r[a]=u,n(r);if(c>0)o=Math.floor(o/c)*c,u=Math.ceil(u/c)*c;else if(c<0)o=Math.ceil(o*c)/c,u=Math.floor(u*c)/c;else break;s=c}return t},t}function rn(){var t=er();return t.copy=function(){return nr(t,rn())},tr.apply(t,arguments),Co(t)}function Do(t,n){t=t.slice();var e=0,r=t.length-1,i=t[e],a=t[r],o;return a<i&&(o=e,e=r,r=o,o=i,i=a,a=o),t[e]=n.floor(i),t[r]=n.ceil(a),t}const yn=new Date,_n=new Date;function Z(t,n,e,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),n(a,1),t(a),a),i.round=a=>{const o=i(a),u=i.ceil(a);return a-o<u-a?o:u},i.offset=(a,o)=>(n(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,u)=>{const s=[];if(a=i.ceil(a),u=u==null?1:Math.floor(u),!(a<o)||!(u>0))return s;let c;do s.push(c=new Date(+a)),n(a,u),t(a);while(c<a&&a<o);return s},i.filter=a=>Z(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,u)=>{if(o>=o)if(u<0)for(;++u<=0;)for(;n(o,-1),!a(o););else for(;--u>=0;)for(;n(o,1),!a(o););}),e&&(i.count=(a,o)=>(yn.setTime(+a),_n.setTime(+o),t(yn),t(_n),Math.floor(e(yn,_n))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Kt=Z(()=>{},(t,n)=>{t.setTime(+t+n)},(t,n)=>n-t);Kt.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Z(n=>{n.setTime(Math.floor(n/t)*t)},(n,e)=>{n.setTime(+n+e*t)},(n,e)=>(e-n)/t):Kt);Kt.range;const ct=1e3,et=ct*60,lt=et*60,ht=lt*24,Hn=ht*7,pe=ht*30,Mn=ht*365,St=Z(t=>{t.setTime(t-t.getMilliseconds())},(t,n)=>{t.setTime(+t+n*ct)},(t,n)=>(n-t)/ct,t=>t.getUTCSeconds());St.range;const Pn=Z(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ct)},(t,n)=>{t.setTime(+t+n*et)},(t,n)=>(n-t)/et,t=>t.getMinutes());Pn.range;const Uo=Z(t=>{t.setUTCSeconds(0,0)},(t,n)=>{t.setTime(+t+n*et)},(t,n)=>(n-t)/et,t=>t.getUTCMinutes());Uo.range;const Rn=Z(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ct-t.getMinutes()*et)},(t,n)=>{t.setTime(+t+n*lt)},(t,n)=>(n-t)/lt,t=>t.getHours());Rn.range;const Ao=Z(t=>{t.setUTCMinutes(0,0,0)},(t,n)=>{t.setTime(+t+n*lt)},(t,n)=>(n-t)/lt,t=>t.getUTCHours());Ao.range;const Yt=Z(t=>t.setHours(0,0,0,0),(t,n)=>t.setDate(t.getDate()+n),(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*et)/ht,t=>t.getDate()-1);Yt.range;const Wn=Z(t=>{t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n)},(t,n)=>(n-t)/ht,t=>t.getUTCDate()-1);Wn.range;const No=Z(t=>{t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n)},(t,n)=>(n-t)/ht,t=>Math.floor(t/ht));No.range;function _t(t){return Z(n=>{n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)},(n,e)=>{n.setDate(n.getDate()+e*7)},(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*et)/Hn)}const on=_t(0),Jt=_t(1),Eo=_t(2),zo=_t(3),Ct=_t(4),$o=_t(5),Fo=_t(6);on.range;Jt.range;Eo.range;zo.range;Ct.range;$o.range;Fo.range;function Mt(t){return Z(n=>{n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e*7)},(n,e)=>(e-n)/Hn)}const rr=Mt(0),tn=Mt(1),Lo=Mt(2),Io=Mt(3),Dt=Mt(4),Yo=Mt(5),Ho=Mt(6);rr.range;tn.range;Lo.range;Io.range;Dt.range;Yo.range;Ho.range;const On=Z(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,n)=>{t.setMonth(t.getMonth()+n)},(t,n)=>n.getMonth()-t.getMonth()+(n.getFullYear()-t.getFullYear())*12,t=>t.getMonth());On.range;const Po=Z(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCMonth(t.getUTCMonth()+n)},(t,n)=>n.getUTCMonth()-t.getUTCMonth()+(n.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Po.range;const ft=Z(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n)},(t,n)=>n.getFullYear()-t.getFullYear(),t=>t.getFullYear());ft.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Z(n=>{n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e*t)});ft.range;const yt=Z(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n)},(t,n)=>n.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());yt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Z(n=>{n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e*t)});yt.range;function Ro(t,n,e,r,i,a){const o=[[St,1,ct],[St,5,5*ct],[St,15,15*ct],[St,30,30*ct],[a,1,et],[a,5,5*et],[a,15,15*et],[a,30,30*et],[i,1,lt],[i,3,3*lt],[i,6,6*lt],[i,12,12*lt],[r,1,ht],[r,2,2*ht],[e,1,Hn],[n,1,pe],[n,3,3*pe],[t,1,Mn]];function u(c,m,h){const l=m<c;l&&([c,m]=[m,c]);const g=h&&typeof h.range=="function"?h:s(c,m,h),T=g?g.range(c,+m+1):[];return l?T.reverse():T}function s(c,m,h){const l=Math.abs(m-c)/h,g=Fn(([,,F])=>F).right(o,l);if(g===o.length)return t.every(bn(c/Mn,m/Mn,h));if(g===0)return Kt.every(Math.max(bn(c,m,h),1));const[T,$]=o[l/o[g-1][2]<o[g][2]/l?g-1:g];return T.every($)}return[u,s]}const[Wo,Oo]=Ro(ft,On,on,Yt,Rn,Pn);function xn(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function vn(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ut(t,n,e){return{y:t,m:n,d:e,H:0,M:0,S:0,L:0}}function Bo(t){var n=t.dateTime,e=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,u=t.months,s=t.shortMonths,c=At(i),m=Nt(i),h=At(a),l=Nt(a),g=At(o),T=Nt(o),$=At(u),F=Nt(u),M=At(s),I=Nt(s),D={a:v,A:k,b:w,B:U,c:null,d:we,e:we,f:ma,g:Ta,G:ka,H:la,I:ha,j:fa,L:ir,m:da,M:ga,p:L,q:W,Q:ke,s:be,S:pa,u:ya,U:_a,V:Ma,w:xa,W:va,x:null,X:null,y:wa,Y:Sa,Z:ba,"%":Se},N={a:nt,A:G,b:Q,B:rt,c:null,d:Te,e:Te,f:Aa,g:Pa,G:Wa,H:Ca,I:Da,j:Ua,L:ar,m:Na,M:Ea,p:K,q:it,Q:ke,s:be,S:za,u:$a,U:Fa,V:La,w:Ia,W:Ya,x:null,X:null,y:Ha,Y:Ra,Z:Oa,"%":Se},C={a:j,A:S,b:R,B:P,c:f,d:xe,e:xe,f:aa,g:Me,G:_e,H:ve,I:ve,j:ea,L:oa,m:na,M:ra,p:q,q:ta,Q:sa,s:ca,S:ia,u:Vo,U:Xo,V:Qo,w:qo,W:Ko,x,X:d,y:Me,Y:_e,Z:Jo,"%":ua};D.x=y(e,D),D.X=y(r,D),D.c=y(n,D),N.x=y(e,N),N.X=y(r,N),N.c=y(n,N);function y(_,A){return function(E){var p=[],X=-1,Y=0,J=_.length,tt,dt,jn;for(E instanceof Date||(E=new Date(+E));++X<J;)_.charCodeAt(X)===37&&(p.push(_.slice(Y,X)),(dt=ye[tt=_.charAt(++X)])!=null?tt=_.charAt(++X):dt=tt==="e"?" ":"0",(jn=A[tt])&&(tt=jn(E,dt)),p.push(tt),Y=X+1);return p.push(_.slice(Y,X)),p.join("")}}function b(_,A){return function(E){var p=Ut(1900,void 0,1),X=O(p,_,E+="",0),Y,J;if(X!=E.length)return null;if("Q"in p)return new Date(p.Q);if("s"in p)return new Date(p.s*1e3+("L"in p?p.L:0));if(A&&!("Z"in p)&&(p.Z=0),"p"in p&&(p.H=p.H%12+p.p*12),p.m===void 0&&(p.m="q"in p?p.q:0),"V"in p){if(p.V<1||p.V>53)return null;"w"in p||(p.w=1),"Z"in p?(Y=vn(Ut(p.y,0,1)),J=Y.getUTCDay(),Y=J>4||J===0?tn.ceil(Y):tn(Y),Y=Wn.offset(Y,(p.V-1)*7),p.y=Y.getUTCFullYear(),p.m=Y.getUTCMonth(),p.d=Y.getUTCDate()+(p.w+6)%7):(Y=xn(Ut(p.y,0,1)),J=Y.getDay(),Y=J>4||J===0?Jt.ceil(Y):Jt(Y),Y=Yt.offset(Y,(p.V-1)*7),p.y=Y.getFullYear(),p.m=Y.getMonth(),p.d=Y.getDate()+(p.w+6)%7)}else("W"in p||"U"in p)&&("w"in p||(p.w="u"in p?p.u%7:"W"in p?1:0),J="Z"in p?vn(Ut(p.y,0,1)).getUTCDay():xn(Ut(p.y,0,1)).getDay(),p.m=0,p.d="W"in p?(p.w+6)%7+p.W*7-(J+5)%7:p.w+p.U*7-(J+6)%7);return"Z"in p?(p.H+=p.Z/100|0,p.M+=p.Z%100,vn(p)):xn(p)}}function O(_,A,E,p){for(var X=0,Y=A.length,J=E.length,tt,dt;X<Y;){if(p>=J)return-1;if(tt=A.charCodeAt(X++),tt===37){if(tt=A.charAt(X++),dt=C[tt in ye?A.charAt(X++):tt],!dt||(p=dt(_,E,p))<0)return-1}else if(tt!=E.charCodeAt(p++))return-1}return p}function q(_,A,E){var p=c.exec(A.slice(E));return p?(_.p=m.get(p[0].toLowerCase()),E+p[0].length):-1}function j(_,A,E){var p=g.exec(A.slice(E));return p?(_.w=T.get(p[0].toLowerCase()),E+p[0].length):-1}function S(_,A,E){var p=h.exec(A.slice(E));return p?(_.w=l.get(p[0].toLowerCase()),E+p[0].length):-1}function R(_,A,E){var p=M.exec(A.slice(E));return p?(_.m=I.get(p[0].toLowerCase()),E+p[0].length):-1}function P(_,A,E){var p=$.exec(A.slice(E));return p?(_.m=F.get(p[0].toLowerCase()),E+p[0].length):-1}function f(_,A,E){return O(_,n,A,E)}function x(_,A,E){return O(_,e,A,E)}function d(_,A,E){return O(_,r,A,E)}function v(_){return o[_.getDay()]}function k(_){return a[_.getDay()]}function w(_){return s[_.getMonth()]}function U(_){return u[_.getMonth()]}function L(_){return i[+(_.getHours()>=12)]}function W(_){return 1+~~(_.getMonth()/3)}function nt(_){return o[_.getUTCDay()]}function G(_){return a[_.getUTCDay()]}function Q(_){return s[_.getUTCMonth()]}function rt(_){return u[_.getUTCMonth()]}function K(_){return i[+(_.getUTCHours()>=12)]}function it(_){return 1+~~(_.getUTCMonth()/3)}return{format:function(_){var A=y(_+="",D);return A.toString=function(){return _},A},parse:function(_){var A=b(_+="",!1);return A.toString=function(){return _},A},utcFormat:function(_){var A=y(_+="",N);return A.toString=function(){return _},A},utcParse:function(_){var A=b(_+="",!0);return A.toString=function(){return _},A}}}var ye={"-":"",_:" ",0:"0"},V=/^\s*\d+/,jo=/^%/,Go=/[\\^$*+?|[\]().{}]/g;function z(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<e?new Array(e-a+1).join(n)+i:i)}function Zo(t){return t.replace(Go,"\\$&")}function At(t){return new RegExp("^(?:"+t.map(Zo).join("|")+")","i")}function Nt(t){return new Map(t.map((n,e)=>[n.toLowerCase(),e]))}function qo(t,n,e){var r=V.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function Vo(t,n,e){var r=V.exec(n.slice(e,e+1));return r?(t.u=+r[0],e+r[0].length):-1}function Xo(t,n,e){var r=V.exec(n.slice(e,e+2));return r?(t.U=+r[0],e+r[0].length):-1}function Qo(t,n,e){var r=V.exec(n.slice(e,e+2));return r?(t.V=+r[0],e+r[0].length):-1}function Ko(t,n,e){var r=V.exec(n.slice(e,e+2));return r?(t.W=+r[0],e+r[0].length):-1}function _e(t,n,e){var r=V.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function Me(t,n,e){var r=V.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function Jo(t,n,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function ta(t,n,e){var r=V.exec(n.slice(e,e+1));return r?(t.q=r[0]*3-3,e+r[0].length):-1}function na(t,n,e){var r=V.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function xe(t,n,e){var r=V.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function ea(t,n,e){var r=V.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function ve(t,n,e){var r=V.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function ra(t,n,e){var r=V.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function ia(t,n,e){var r=V.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function oa(t,n,e){var r=V.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function aa(t,n,e){var r=V.exec(n.slice(e,e+6));return r?(t.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function ua(t,n,e){var r=jo.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function sa(t,n,e){var r=V.exec(n.slice(e));return r?(t.Q=+r[0],e+r[0].length):-1}function ca(t,n,e){var r=V.exec(n.slice(e));return r?(t.s=+r[0],e+r[0].length):-1}function we(t,n){return z(t.getDate(),n,2)}function la(t,n){return z(t.getHours(),n,2)}function ha(t,n){return z(t.getHours()%12||12,n,2)}function fa(t,n){return z(1+Yt.count(ft(t),t),n,3)}function ir(t,n){return z(t.getMilliseconds(),n,3)}function ma(t,n){return ir(t,n)+"000"}function da(t,n){return z(t.getMonth()+1,n,2)}function ga(t,n){return z(t.getMinutes(),n,2)}function pa(t,n){return z(t.getSeconds(),n,2)}function ya(t){var n=t.getDay();return n===0?7:n}function _a(t,n){return z(on.count(ft(t)-1,t),n,2)}function or(t){var n=t.getDay();return n>=4||n===0?Ct(t):Ct.ceil(t)}function Ma(t,n){return t=or(t),z(Ct.count(ft(t),t)+(ft(t).getDay()===4),n,2)}function xa(t){return t.getDay()}function va(t,n){return z(Jt.count(ft(t)-1,t),n,2)}function wa(t,n){return z(t.getFullYear()%100,n,2)}function Ta(t,n){return t=or(t),z(t.getFullYear()%100,n,2)}function Sa(t,n){return z(t.getFullYear()%1e4,n,4)}function ka(t,n){var e=t.getDay();return t=e>=4||e===0?Ct(t):Ct.ceil(t),z(t.getFullYear()%1e4,n,4)}function ba(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+z(n/60|0,"0",2)+z(n%60,"0",2)}function Te(t,n){return z(t.getUTCDate(),n,2)}function Ca(t,n){return z(t.getUTCHours(),n,2)}function Da(t,n){return z(t.getUTCHours()%12||12,n,2)}function Ua(t,n){return z(1+Wn.count(yt(t),t),n,3)}function ar(t,n){return z(t.getUTCMilliseconds(),n,3)}function Aa(t,n){return ar(t,n)+"000"}function Na(t,n){return z(t.getUTCMonth()+1,n,2)}function Ea(t,n){return z(t.getUTCMinutes(),n,2)}function za(t,n){return z(t.getUTCSeconds(),n,2)}function $a(t){var n=t.getUTCDay();return n===0?7:n}function Fa(t,n){return z(rr.count(yt(t)-1,t),n,2)}function ur(t){var n=t.getUTCDay();return n>=4||n===0?Dt(t):Dt.ceil(t)}function La(t,n){return t=ur(t),z(Dt.count(yt(t),t)+(yt(t).getUTCDay()===4),n,2)}function Ia(t){return t.getUTCDay()}function Ya(t,n){return z(tn.count(yt(t)-1,t),n,2)}function Ha(t,n){return z(t.getUTCFullYear()%100,n,2)}function Pa(t,n){return t=ur(t),z(t.getUTCFullYear()%100,n,2)}function Ra(t,n){return z(t.getUTCFullYear()%1e4,n,4)}function Wa(t,n){var e=t.getUTCDay();return t=e>=4||e===0?Dt(t):Dt.ceil(t),z(t.getUTCFullYear()%1e4,n,4)}function Oa(){return"+0000"}function Se(){return"%"}function ke(t){return+t}function be(t){return Math.floor(+t/1e3)}var xt,nn,sr;Ba({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ba(t){return xt=Bo(t),nn=xt.format,sr=xt.parse,xt.utcFormat,xt.utcParse,xt}function ja(t){return new Date(t)}function Ga(t){return t instanceof Date?+t:+new Date(+t)}function cr(t,n,e,r,i,a,o,u,s,c){var m=er(),h=m.invert,l=m.domain,g=c(".%L"),T=c(":%S"),$=c("%I:%M"),F=c("%I %p"),M=c("%a %d"),I=c("%b %d"),D=c("%B"),N=c("%Y");function C(y){return(s(y)<y?g:u(y)<y?T:o(y)<y?$:a(y)<y?F:r(y)<y?i(y)<y?M:I:e(y)<y?D:N)(y)}return m.invert=function(y){return new Date(h(y))},m.domain=function(y){return arguments.length?l(Array.from(y,Ga)):l().map(ja)},m.ticks=function(y){var b=l();return t(b[0],b[b.length-1],y??10)},m.tickFormat=function(y,b){return b==null?C:c(b)},m.nice=function(y){var b=l();return(!y||typeof y.range!="function")&&(y=n(b[0],b[b.length-1],y??10)),y?l(Do(b,y)):m},m.copy=function(){return nr(m,cr(t,n,e,r,i,a,o,u,s,c))},m}function Za(){return tr.apply(cr(Wo,Oo,ft,On,on,Yt,Rn,Pn,St,nn).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function vt(t){return function(){return t}}function qa(t){let n=3;return t.digits=function(e){if(!arguments.length)return n;if(e==null)n=null;else{const r=Math.floor(e);if(!(r>=0))throw new RangeError(`invalid digits: ${e}`);n=r}return t},()=>new gi(n)}function Va(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function lr(t){this._context=t}lr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n);break}}};function hr(t){return new lr(t)}function Xa(t){return t[0]}function Qa(t){return t[1]}function fr(t,n){var e=vt(!0),r=null,i=hr,a=null,o=qa(u);t=typeof t=="function"?t:t===void 0?Xa:vt(t),n=typeof n=="function"?n:n===void 0?Qa:vt(n);function u(s){var c,m=(s=Va(s)).length,h,l=!1,g;for(r==null&&(a=i(g=o())),c=0;c<=m;++c)!(c<m&&e(h=s[c],c,s))===l&&((l=!l)?a.lineStart():a.lineEnd()),l&&a.point(+t(h,c,s),+n(h,c,s));if(g)return a=null,g+""||null}return u.x=function(s){return arguments.length?(t=typeof s=="function"?s:vt(+s),u):t},u.y=function(s){return arguments.length?(n=typeof s=="function"?s:vt(+s),u):n},u.defined=function(s){return arguments.length?(e=typeof s=="function"?s:vt(!!s),u):e},u.curve=function(s){return arguments.length?(i=s,r!=null&&(a=i(r)),u):i},u.context=function(s){return arguments.length?(s==null?r=a=null:a=i(r=s),u):r},u}var Ka=dr(hr);function mr(t){this._curve=t}mr.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}};function dr(t){function n(e){return new mr(t(e))}return n._curve=t,n}function Ja(t){var n=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(e){return arguments.length?n(dr(e)):n()._curve},t}function Ce(){return Ja(fr().curve(Ka))}function De(t,n,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+e)/6)}function Bn(t){this._context=t}Bn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:De(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:De(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function gr(t,n){this._basis=new Bn(t),this._beta=n}gr.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,e=t.length-1;if(e>0)for(var r=t[0],i=n[0],a=t[e]-r,o=n[e]-i,u=-1,s;++u<=e;)s=u/e,this._basis.point(this._beta*t[u]+(1-this._beta)*(r+s*a),this._beta*n[u]+(1-this._beta)*(i+s*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};const Ue=function t(n){function e(r){return n===1?new Bn(r):new gr(r,n)}return e.beta=function(r){return t(+r)},e}(.85),Ot=t=>()=>t;function tu(t,{sourceEvent:n,target:e,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function wn(t){t.stopImmediatePropagation()}function Et(t){t.preventDefault(),t.stopImmediatePropagation()}function nu(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function eu(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Ae(){return this.__zoom||It}function ru(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function iu(){return navigator.maxTouchPoints||"ontouchstart"in this}function ou(t,n,e){var r=t.invertX(n[0][0])-e[0][0],i=t.invertX(n[1][0])-e[1][0],a=t.invertY(n[0][1])-e[0][1],o=t.invertY(n[1][1])-e[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function au(){var t=nu,n=eu,e=ou,r=ru,i=iu,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],u=250,s=qe,c=Sr("start","zoom","end"),m,h,l,g=500,T=150,$=0,F=10;function M(f){f.property("__zoom",Ae).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",q).on("dblclick.zoom",j).filter(i).on("touchstart.zoom",S).on("touchmove.zoom",R).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}M.transform=function(f,x,d,v){var k=f.selection?f.selection():f;k.property("__zoom",Ae),f!==k?C(f,x,d,v):k.interrupt().each(function(){y(this,arguments).event(v).start().zoom(null,typeof x=="function"?x.apply(this,arguments):x).end()})},M.scaleBy=function(f,x,d,v){M.scaleTo(f,function(){var k=this.__zoom.k,w=typeof x=="function"?x.apply(this,arguments):x;return k*w},d,v)},M.scaleTo=function(f,x,d,v){M.transform(f,function(){var k=n.apply(this,arguments),w=this.__zoom,U=d==null?N(k):typeof d=="function"?d.apply(this,arguments):d,L=w.invert(U),W=typeof x=="function"?x.apply(this,arguments):x;return e(D(I(w,W),U,L),k,o)},d,v)},M.translateBy=function(f,x,d,v){M.transform(f,function(){return e(this.__zoom.translate(typeof x=="function"?x.apply(this,arguments):x,typeof d=="function"?d.apply(this,arguments):d),n.apply(this,arguments),o)},null,v)},M.translateTo=function(f,x,d,v,k){M.transform(f,function(){var w=n.apply(this,arguments),U=this.__zoom,L=v==null?N(w):typeof v=="function"?v.apply(this,arguments):v;return e(It.translate(L[0],L[1]).scale(U.k).translate(typeof x=="function"?-x.apply(this,arguments):-x,typeof d=="function"?-d.apply(this,arguments):-d),w,o)},v,k)};function I(f,x){return x=Math.max(a[0],Math.min(a[1],x)),x===f.k?f:new un(x,f.x,f.y)}function D(f,x,d){var v=x[0]-d[0]*f.k,k=x[1]-d[1]*f.k;return v===f.x&&k===f.y?f:new un(f.k,v,k)}function N(f){return[(+f[0][0]+ +f[1][0])/2,(+f[0][1]+ +f[1][1])/2]}function C(f,x,d,v){f.on("start.zoom",function(){y(this,arguments).event(v).start()}).on("interrupt.zoom end.zoom",function(){y(this,arguments).event(v).end()}).tween("zoom",function(){var k=this,w=arguments,U=y(k,w).event(v),L=n.apply(k,w),W=d==null?N(L):typeof d=="function"?d.apply(k,w):d,nt=Math.max(L[1][0]-L[0][0],L[1][1]-L[0][1]),G=k.__zoom,Q=typeof x=="function"?x.apply(k,w):x,rt=s(G.invert(W).concat(nt/G.k),Q.invert(W).concat(nt/Q.k));return function(K){if(K===1)K=Q;else{var it=rt(K),_=nt/it[2];K=new un(_,W[0]-it[0]*_,W[1]-it[1]*_)}U.zoom(null,K)}})}function y(f,x,d){return!d&&f.__zooming||new b(f,x)}function b(f,x){this.that=f,this.args=x,this.active=0,this.sourceEvent=null,this.extent=n.apply(f,x),this.taps=0}b.prototype={event:function(f){return f&&(this.sourceEvent=f),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(f,x){return this.mouse&&f!=="mouse"&&(this.mouse[1]=x.invert(this.mouse[0])),this.touch0&&f!=="touch"&&(this.touch0[1]=x.invert(this.touch0[0])),this.touch1&&f!=="touch"&&(this.touch1[1]=x.invert(this.touch1[0])),this.that.__zoom=x,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(f){var x=B(this.that).datum();c.call(f,this.that,new tu(f,{sourceEvent:this.sourceEvent,target:M,type:f,transform:this.that.__zoom,dispatch:c}),x)}};function O(f,...x){if(!t.apply(this,arguments))return;var d=y(this,x).event(f),v=this.__zoom,k=Math.max(a[0],Math.min(a[1],v.k*Math.pow(2,r.apply(this,arguments)))),w=gt(f);if(d.wheel)(d.mouse[0][0]!==w[0]||d.mouse[0][1]!==w[1])&&(d.mouse[1]=v.invert(d.mouse[0]=w)),clearTimeout(d.wheel);else{if(v.k===k)return;d.mouse=[w,v.invert(w)],sn(this),d.start()}Et(f),d.wheel=setTimeout(U,T),d.zoom("mouse",e(D(I(v,k),d.mouse[0],d.mouse[1]),d.extent,o));function U(){d.wheel=null,d.end()}}function q(f,...x){if(l||!t.apply(this,arguments))return;var d=f.currentTarget,v=y(this,x,!0).event(f),k=B(f.view).on("mousemove.zoom",W,!0).on("mouseup.zoom",nt,!0),w=gt(f,d),U=f.clientX,L=f.clientY;Vr(f.view),wn(f),v.mouse=[w,this.__zoom.invert(w)],sn(this),v.start();function W(G){if(Et(G),!v.moved){var Q=G.clientX-U,rt=G.clientY-L;v.moved=Q*Q+rt*rt>$}v.event(G).zoom("mouse",e(D(v.that.__zoom,v.mouse[0]=gt(G,d),v.mouse[1]),v.extent,o))}function nt(G){k.on("mousemove.zoom mouseup.zoom",null),Xr(G.view,v.moved),Et(G),v.event(G).end()}}function j(f,...x){if(t.apply(this,arguments)){var d=this.__zoom,v=gt(f.changedTouches?f.changedTouches[0]:f,this),k=d.invert(v),w=d.k*(f.shiftKey?.5:2),U=e(D(I(d,w),v,k),n.apply(this,x),o);Et(f),u>0?B(this).transition().duration(u).call(C,U,v,f):B(this).call(M.transform,U,v,f)}}function S(f,...x){if(t.apply(this,arguments)){var d=f.touches,v=d.length,k=y(this,x,f.changedTouches.length===v).event(f),w,U,L,W;for(wn(f),U=0;U<v;++U)L=d[U],W=gt(L,this),W=[W,this.__zoom.invert(W),L.identifier],k.touch0?!k.touch1&&k.touch0[2]!==W[2]&&(k.touch1=W,k.taps=0):(k.touch0=W,w=!0,k.taps=1+!!m);m&&(m=clearTimeout(m)),w&&(k.taps<2&&(h=W[0],m=setTimeout(function(){m=null},g)),sn(this),k.start())}}function R(f,...x){if(this.__zooming){var d=y(this,x).event(f),v=f.changedTouches,k=v.length,w,U,L,W;for(Et(f),w=0;w<k;++w)U=v[w],L=gt(U,this),d.touch0&&d.touch0[2]===U.identifier?d.touch0[0]=L:d.touch1&&d.touch1[2]===U.identifier&&(d.touch1[0]=L);if(U=d.that.__zoom,d.touch1){var nt=d.touch0[0],G=d.touch0[1],Q=d.touch1[0],rt=d.touch1[1],K=(K=Q[0]-nt[0])*K+(K=Q[1]-nt[1])*K,it=(it=rt[0]-G[0])*it+(it=rt[1]-G[1])*it;U=I(U,Math.sqrt(K/it)),L=[(nt[0]+Q[0])/2,(nt[1]+Q[1])/2],W=[(G[0]+rt[0])/2,(G[1]+rt[1])/2]}else if(d.touch0)L=d.touch0[0],W=d.touch0[1];else return;d.zoom("touch",e(D(U,L,W),d.extent,o))}}function P(f,...x){if(this.__zooming){var d=y(this,x).event(f),v=f.changedTouches,k=v.length,w,U;for(wn(f),l&&clearTimeout(l),l=setTimeout(function(){l=null},g),w=0;w<k;++w)U=v[w],d.touch0&&d.touch0[2]===U.identifier?delete d.touch0:d.touch1&&d.touch1[2]===U.identifier&&delete d.touch1;if(d.touch1&&!d.touch0&&(d.touch0=d.touch1,delete d.touch1),d.touch0)d.touch0[1]=this.__zoom.invert(d.touch0[0]);else if(d.end(),d.taps===2&&(U=gt(U,this),Math.hypot(h[0]-U[0],h[1]-U[1])<F)){var L=B(this).on("dblclick.zoom");L&&L.apply(this,arguments)}}}return M.wheelDelta=function(f){return arguments.length?(r=typeof f=="function"?f:Ot(+f),M):r},M.filter=function(f){return arguments.length?(t=typeof f=="function"?f:Ot(!!f),M):t},M.touchable=function(f){return arguments.length?(i=typeof f=="function"?f:Ot(!!f),M):i},M.extent=function(f){return arguments.length?(n=typeof f=="function"?f:Ot([[+f[0][0],+f[0][1]],[+f[1][0],+f[1][1]]]),M):n},M.scaleExtent=function(f){return arguments.length?(a[0]=+f[0],a[1]=+f[1],M):[a[0],a[1]]},M.translateExtent=function(f){return arguments.length?(o[0][0]=+f[0][0],o[1][0]=+f[1][0],o[0][1]=+f[0][1],o[1][1]=+f[1][1],M):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},M.constrain=function(f){return arguments.length?(e=f,M):e},M.duration=function(f){return arguments.length?(u=+f,M):u},M.interpolate=function(f){return arguments.length?(s=f,M):s},M.on=function(){var f=c.on.apply(c,arguments);return f===c?M:f},M.clickDistance=function(f){return arguments.length?($=(f=+f)*f,M):Math.sqrt($)},M.tapDistance=function(f){return arguments.length?(F=+f,M):F},M}const uu="../data/circle_packing_data.json",su="circle_packing",cu=800,lu=800;class hu{constructor(){H(this,"data");H(this,"width",cu);H(this,"height",lu);this.loadData().then(()=>{this.initPacking()})}async loadData(){return new Promise((n,e)=>{He(uu).then(r=>{this.data=r,n()})})}initPacking(){const n=h=>Mo().size([this.width,this.height]).padding(3)(en(h).sum(l=>l.value).sort((l,g)=>g.value-l.value));Yn(",d");const e=rn().domain([0,2]).range(["#F6F6F6","#2D327D"]).interpolate(fi),r=n(this.data);let i=r,a;const o=B(`#${su}`).append("svg").attr("viewBox",`-${this.width/2} -${this.height/2} ${this.width} ${this.height}`).style("display","block").style("margin","0 -14px").style("background",e(0)).style("cursor","pointer").on("click",h=>m(h,r)),u=o.append("g").selectAll("circle").data(r.descendants().slice(1)).join("circle").attr("fill",h=>h.children?e(h.depth):"#FFFFFF").attr("pointer-events",h=>h.children?null:"none").on("mouseover",function(){B(this).attr("stroke","#000")}).on("mouseout",function(){B(this).attr("stroke",null)}).on("click",(h,l)=>i!==l&&(m(h,l),h.stopPropagation())),s=o.append("g").style("font","10px sans-serif").attr("pointer-events","none").attr("text-anchor","middle").selectAll("text").data(r.descendants()).join("text").style("fill-opacity",h=>h.parent===r?1:0).style("display",h=>h.parent===r?"inline":"none").text(h=>h.data.name),c=h=>{const l=this.width/h[2];a=h,s.attr("transform",g=>`translate(${(g.x-h[0])*l},${(g.y-h[1])*l})`),u.attr("transform",g=>`translate(${(g.x-h[0])*l},${(g.y-h[1])*l})`),u.attr("r",g=>g.r*l)};c([r.x,r.y,r.r*2]);function m(h,l){i=l;const g=o.transition().duration(h.altKey?7500:750).tween("zoom",T=>{const $=qe(a,[i.x,i.y,i.r*2]);return F=>c($(F))});s.filter(function(T){return T.parent===i||this.style.display==="inline"}).transition(g).style("fill-opacity",T=>T.parent===i?1:0).on("start",function(T){T.parent===i&&(this.style.display="inline")}).on("end",function(T){T.parent!==i&&(this.style.display="none")})}}}const pr="src/network/data/networks/transports/web_data/",fu=pr+"network_edges.csv",mu=pr+"network_nodes.csv",du="select_cantons",gu="hierarchy",pu=200,yu=20,_u=800,Mu=800,xu=1,vu=10,wu=.1,Tu=10,mt={ZH:"#c94be1",BE:"#b2e431",LU:"#8547e4",UR:"#6cd44c",SZ:"#5527b6",OW:"#ccc842",NW:"#8270f6",GL:"#57dc84",ZG:"#d63ebf",FR:"#6eae45",SO:"#7557d3",BS:"#db9326",BL:"#5581f2",SH:"#e4441c",AR:"#3d1b7f",AI:"#c85d2c",SG:"#7d6cd5",GR:"#d13f3c",AG:"#7638a1",TG:"#da305f",TI:"#d077dd",VD:"#e85684",GE:"#a93a99",NE:"#d22e75",VS:"#d940a3",JU:"#d53e8d"},Tn="#EB0000",Ne=5,ot=750;class Su{constructor(){H(this,"root");H(this,"edges");H(this,"nodes");H(this,"selectedEdges");H(this,"selectedNodes");H(this,"width",_u);H(this,"height",Mu);H(this,"radius");H(this,"margin",pu);H(this,"svg");H(this,"g");H(this,"zoomBehavior");H(this,"weightScale");H(this,"defaultZoomState",It);this.loadData().then(()=>{this.initStaticElements(),this.updateBundle()})}async loadData(){return new Promise((n,e)=>{ee(mu).then(r=>{ee(fu).then(i=>{r=r.filter(function(s){return s.is_train_stop==="True"}),i=i.filter(function(s){return r.some(function(c){return c.id===s.source&&c.is_train_stop==="True"})&&r.some(function(c){return c.id===s.target&&c.is_train_stop==="True"})});const a=Rr(i,function(s){return parseInt(s.weight)})??0,o=Cn(i,function(s){return parseInt(s.weight)})??0;if(this.weightScale=rn().domain([a,o]).range([xu,vu]),document.getElementById(du)!==null){const s=Object.keys(mt).map(m=>{const h=document.createElement("div");return h.classList.add("custom-option"),h.dataset.value=m,h.textContent=m,h}),c=document.getElementById("select_cantons");for(const m of s)c.appendChild(m);c.addEventListener("click",m=>{const h=m.target;if(h.classList.contains("custom-option")){h.classList.toggle("selected"),h.classList.contains("selected")?h.style.backgroundColor=mt[h.dataset.value]:h.style.backgroundColor="";const l=c.querySelectorAll(".custom-option.selected"),g=Array.from(l).map(T=>T.dataset.value);this.filterByCantons(g,!0)}})}this.nodes=r,this.edges=i,this.filterByCantons([],!1),n()})})})}initStaticElements(){this.zoomBehavior=au().scaleExtent([wu,Tu]).on("zoom",n=>this.zoomed(n)),this.svg=B(`#${gu}`).append("svg").attr("width",this.width).attr("height",this.height).call(this.zoomBehavior),this.g=this.svg.append("g"),this.g.append("g").attr("class","links"),this.g.append("g").attr("class","nodes")}buildRoot(){const n={name:"Network",children:[]};Qn(this.selectedNodes,o=>o.canton).forEach((o,u)=>{const s={name:u,children:[]};Qn(o,m=>m.city).forEach((m,h)=>{const l={name:h,children:[]};m.forEach(g=>{l.children.push({name:g.label,canton:g.canton,city:g.city})}),s.children.push(l)}),n.children.push(s)});const r={};this.selectedNodes.forEach(function(o){r[o.id]=o.label}),this.selectedEdges=this.selectedEdges.map(function(o){return[{name:r[o.source],id:o.source,weight:o.weight},{name:r[o.target],id:o.target,weight:o.weight}]}),this.root=en(n),Ii().size([360,this.radius])(this.root);const a=new Map(this.root.leaves().map(o=>[o.data.name,o]));for(const o of this.root.leaves())o.incoming=[],o.outgoing=[],this.selectedEdges.filter(s=>s[0].name===o.data.name).forEach(s=>{const c=a.get(s[1].name);c&&o.outgoing.push({nodes:[o,c],weight:s[0].weight})});for(const o of this.root.leaves())for(const u of o.outgoing)u.nodes[1].incoming.push(u)}updateBundle(){this.radius=yu*this.selectedNodes.length/(2*Math.PI);const n=Math.min(this.width,this.height)/(2*(this.radius+this.margin)),e=this.width/2,r=this.height/2;this.defaultZoomState=It.translate(e,r).scale(n),this.zoomBehavior.transform(this.svg.transition().duration(ot),this.defaultZoomState),this.g.transition().duration(ot).attr("transform",this.defaultZoomState.toString()),this.buildRoot(),this.g.select("g.nodes").selectAll("g.node").data(this.root.descendants().filter(o=>o.children===void 0&&o.parent!==null),o=>`${o.data.name},${o.data.city},${o.data.canton}`).join(o=>{const u=o.append("g").filter(s=>s.children===void 0&&s.parent!==null).attr("class","node").attr("transform","rotate(0)translate(0)");u.append("circle").attr("r",4.5).attr("fill",function(s){return mt[s.data.canton]}),u.append("text").attr("dy",".31em").attr("x",function(s){return s.x<180?8:-8}).style("text-anchor",function(s){return s.x<180?"start":"end"}).attr("transform",function(s){return s.x<180?null:"rotate(180)"}).text(function(s){return s.data.name}).each(function(s){s.text=this}).attr("fill",function(s){return mt[s.data.canton]}),u.each(function(s){s.text=this}),u.on("mouseover",(s,c)=>this.overed(s,c)).on("mouseout",(s,c)=>this.outed(s,c)),u.transition().duration(ot).attr("transform",function(s){return"rotate("+(s.x-90)+")translate("+s.y+")"})},o=>{o.transition().duration(ot).attr("transform",function(u){return"rotate("+(u.x-90)+")translate("+u.y+")"}),o.each(function(u){u.text=this}),o.on("mouseover",(u,s)=>this.overed(u,s)).on("mouseout",(u,s)=>this.outed(u,s)),o.select("circle").transition().duration(ot).attr("fill",function(u){return mt[u.data.canton]}),o.select("text").transition().duration(ot).attr("x",function(u){return u.x<180?8:-8}).style("text-anchor",function(u){return u.x<180?"start":"end"}).attr("transform",function(u){return u.x<180?null:"rotate(180)"}).text(function(u){return u.data.name}).attr("fill",function(u){return mt[u.data.canton]})},o=>o.transition().duration(ot).attr("transform",u=>{const s=this.radius+1e3;return"rotate("+(u.x-90)+")translate("+s+")"}).remove());const i=Ce().curve(Ue.beta(.5)).radius(o=>o.y).angle(o=>o.x*Math.PI/180),a=Ce().curve(Ue.beta(.5)).radius(0).angle(o=>o.x*Math.PI/180);this.g.select("g.links").selectAll("path").data(this.root.leaves().flatMap(o=>o.outgoing),o=>`${o.nodes[0].data.name},${o.nodes[0].data.city},${o.nodes[0].data.canton}->${o.nodes[1].data.name},${o.nodes[1].data.city},${o.nodes[1].data.canton}`).join(o=>{const u=o.append("path").attr("stroke","black").attr("fill","none").attr("stroke-width",s=>this.weightScale(s.weight)).attr("d",s=>a(s.nodes[0].path(s.nodes[1]))).attr("stroke-opacity",0);u.each(function(s){s.path=this}),u.transition().duration(ot).attr("d",s=>i(s.nodes[0].path(s.nodes[1]))).attr("stroke-opacity",1)},o=>{o.transition().duration(ot).attr("d",u=>i(u.nodes[0].path(u.nodes[1]))).attr("stroke-width",u=>this.weightScale(u.weight))},o=>{o.transition().duration(ot/2).attr("stroke-opacity",0).remove()})}overed(n,e){this.g.select("g.links").style("mix-blend-mode",null);const i=n.currentTarget,a=parseFloat(B(i).style("font-size"));B(i).attr("font-weight","bold").attr("font-size",a*1.5),this.g.selectAll("path").filter(o=>e.incoming.some(u=>u===o)||e.outgoing.some(u=>u===o)).each(function(){const o=parseFloat(B(this).style("stroke-width"));B(this).attr("stroke",Tn).attr("stroke-width",o+Ne)}),Ht(e.incoming.map(o=>o.nodes[0].text)).attr("fill",Tn).attr("font-weight","bold"),Ht(e.outgoing.map(o=>o.nodes[1].text)).attr("fill",Tn).attr("font-weight","bold")}outed(n,e){this.g.select("g.links").style("mix-blend-mode","multiply");const i=n.currentTarget,a=parseFloat(B(i).style("font-size"));B(i).attr("font-weight",null).attr("font-size",a/1.5),this.g.selectAll("path").filter(o=>e.incoming.some(u=>u===o)||e.outgoing.some(u=>u===o)).each(function(){const o=parseFloat(B(this).style("stroke-width"));B(this).attr("stroke","black").attr("stroke-width",o-Ne)}),Ht(e.incoming.map(o=>o.nodes[0].text)).attr("fill",function(o){return mt[o.data.canton]}).attr("font-weight",null),Ht(e.outgoing.map(o=>o.nodes[1].text)).attr("fill",function(o){return mt[o.data.canton]}).attr("font-weight",null)}filterByCantons(n,e=!1){this.selectedNodes=this.nodes.filter(r=>n.includes(r.canton)),this.selectedEdges=this.edges.filter(r=>this.selectedNodes.some(i=>i.id===r.source)&&this.selectedNodes.some(i=>i.id===r.target)),e&&this.updateBundle()}zoomed(n){const e=It.translate(n.transform.x,n.transform.y).scale(n.transform.k);B("#hierarchy svg g").attr("transform",e)}}const zt=[{departure_time:"00:00:00",count:6231},{departure_time:"00:30:00",count:5867},{departure_time:"01:00:00",count:5247},{departure_time:"01:30:00",count:4081},{departure_time:"02:00:00",count:2703},{departure_time:"02:30:00",count:1462},{departure_time:"03:00:00",count:465},{departure_time:"03:30:00",count:117},{departure_time:"04:00:00",count:47},{departure_time:"04:30:00",count:38},{departure_time:"05:00:00",count:90},{departure_time:"05:30:00",count:423},{departure_time:"06:00:00",count:1896},{departure_time:"06:30:00",count:3703},{departure_time:"07:00:00",count:6102},{departure_time:"07:30:00",count:7864},{departure_time:"08:00:00",count:8990},{departure_time:"08:30:00",count:9156},{departure_time:"09:00:00",count:9218},{departure_time:"09:30:00",count:8730},{departure_time:"10:00:00",count:8616},{departure_time:"10:30:00",count:8258},{departure_time:"11:00:00",count:8292},{departure_time:"11:30:00",count:8172},{departure_time:"12:00:00",count:8294},{departure_time:"12:30:00",count:8286},{departure_time:"13:00:00",count:8506},{departure_time:"13:30:00",count:8460},{departure_time:"14:00:00",count:8659},{departure_time:"14:30:00",count:8421},{departure_time:"15:00:00",count:8469},{departure_time:"15:30:00",count:8261},{departure_time:"16:00:00",count:8305},{departure_time:"16:30:00",count:8310},{departure_time:"17:00:00",count:8645},{departure_time:"17:30:00",count:8727},{departure_time:"18:00:00",count:9135},{departure_time:"18:30:00",count:9165},{departure_time:"19:00:00",count:9239},{departure_time:"19:30:00",count:9093},{departure_time:"20:00:00",count:8973},{departure_time:"20:30:00",count:8579},{departure_time:"21:00:00",count:8350},{departure_time:"21:30:00",count:7741},{departure_time:"22:00:00",count:7445},{departure_time:"22:30:00",count:6862},{departure_time:"23:00:00",count:6706},{departure_time:"23:30:00",count:6375}];const wt=15,Bt=20,ku="../data/hourly_plot",at={top:20,right:20,bottom:30,left:50},Ee=960-at.left-at.right,$t=500-at.top-at.bottom,ze={Train:"#00A59B",Bus:"#6F2282",Boat:"#E84E10",Metro:"#FCBB00",Tram:"#143A85","Rack Railway":"#00973B"};class bu{constructor(){H(this,"svg");H(this,"data",zt);H(this,"parseTime",sr("%H:%M:%S"));H(this,"xScale");H(this,"yScale");H(this,"startTime");H(this,"endTime");H(this,"bars");this.svg=B("#chart").append("svg").attr("width",Ee+at.left+at.right).attr("height",$t+at.top+at.bottom).append("g").attr("transform",`translate(${at.left},${at.top})`),this.data=zt,this.initializeData(),this.createLine(),this.createBars(),this.createAxes(),this.addButtons()}initializeData(){this.data.forEach(e=>{e.departure_time=this.parseTime(e.departure_time),e.departure_time.setYear(1970)});const n=qn(zt,e=>e.departure_time);this.startTime=new Date(n[0]),this.startTime.setMinutes(this.startTime.getMinutes()-Bt),this.endTime=new Date(n[1]),this.endTime.setMinutes(this.endTime.getMinutes()+Bt),this.xScale=Za().domain([this.startTime,this.endTime]).range([0,Ee]),this.yScale=rn().domain([0,Cn(zt,e=>e.count)]).nice().range([$t,0])}createLine(){fr().x(n=>this.xScale(n.departure_time)).y(n=>this.yScale(n.count))}createBars(){this.bars=this.svg.selectAll(".bar").data(zt).enter().append("rect").attr("class","bar").attr("x",n=>this.xScale(n.departure_time)-wt/2).attr("y",n=>this.yScale(n.count)).attr("width",wt).attr("height",n=>$t-this.yScale(n.count)).attr("fill","#00A59B")}createAxes(){this.svg.append("g").attr("class","x axis").attr("transform",`translate(0,${$t})`).call(Jn(this.xScale).tickFormat(nn("%H:%M"))),this.svg.append("g").attr("class","y axis").call(te(this.yScale))}updatePlot(n){const e=`${ku}/df_${n.toLowerCase().replace(" ","_")}.json`;He(e).then(r=>{r.forEach(a=>{a.departure_time=this.parseTime(a.departure_time),a.departure_time.setYear(1970)});const i=qn(r,a=>a.departure_time);this.startTime=new Date(i[0]),this.startTime.setMinutes(this.startTime.getMinutes()-Bt),this.endTime=new Date(i[1]),this.endTime.setMinutes(this.endTime.getMinutes()+Bt),this.xScale.domain([this.startTime,this.endTime]),this.yScale.domain([0,Cn(r,a=>a.count)]).nice(),this.bars=this.svg.selectAll(".bar").data(r),this.bars.join(a=>a.append("rect").attr("class","bar").attr("x",o=>this.xScale(o.departure_time)-wt/2).attr("y",this.yScale(0)).attr("width",wt).attr("height",0).attr("fill","steelblue"),a=>a.transition().duration(1e3).attr("x",o=>this.xScale(o.departure_time)-wt/2).attr("y",o=>this.yScale(o.count)).attr("width",wt).attr("height",o=>$t-this.yScale(o.count)).attr("fill",ze[n]).each(function(o){for(let u of document.getElementById("buttons").children)u.setAttribute("style",`background-color: ${ze[n]}`)}),a=>a.transition().duration(1e3).attr("y",this.yScale(0)).attr("height",0).remove()),this.svg.select(".x.axis").transition().duration(1e3).call(Jn(this.xScale).tickFormat(nn("%H:%M"))),this.svg.select(".y.axis").transition().duration(1e3).call(te(this.yScale))})}addButtons(){const n=["Train","Bus","Boat","Metro","Tram","Rack Railway"];for(let e=0;e<n.length;e++){const r=n[e],i=document.createElement("button");i.setAttribute("type","button"),i.setAttribute("id",r),i.innerHTML=r,i.onclick=()=>{this.updatePlot(r)},document.getElementById("buttons").appendChild(i)}}}document.addEventListener("DOMContentLoaded",()=>{new Su,new hu,new bu});
