var Uh=Object.defineProperty;var Bh=(t,e,n)=>e in t?Uh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var q=(t,e,n)=>(Bh(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function or(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Hh(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function yo(t){let e,n,r;t.length!==2?(e=or,n=(s,u)=>or(t(s),u),r=(s,u)=>t(s)-u):(e=t===or||t===Hh?t:Wh,n=t,r=t);function i(s,u,c=0,h=s.length){if(c<h){if(e(u,u)!==0)return h;do{const l=c+h>>>1;n(s[l],u)<0?c=l+1:h=l}while(c<h)}return c}function o(s,u,c=0,h=s.length){if(c<h){if(e(u,u)!==0)return h;do{const l=c+h>>>1;n(s[l],u)<=0?c=l+1:h=l}while(c<h)}return c}function a(s,u,c=0,h=s.length){const l=i(s,u,c,h-1);return l>c&&r(s[l-1],u)>-r(s[l],u)?l-1:l}return{left:i,center:a,right:o}}function Wh(){return 0}function Yh(t){return t===null?NaN:+t}const qh=yo(or),jh=qh.right;yo(Yh).center;const Vh=jh;function Xh(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of t)(o=e(o,++i,t))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class Ce{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],a=e+o,s=Math.abs(e)<Math.abs(o)?e-(a-o):o-(a-e);s&&(n[r++]=s),e=a}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,i,o,a=0;if(n>0){for(a=e[--n];n>0&&(r=a,i=e[--n],a=r+i,o=i-(a-r),!o););n>0&&(o<0&&e[n-1]<0||o>0&&e[n-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}}class Zh extends Map{constructor(e,n=Jh){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(sa(this,e))}has(e){return super.has(sa(this,e))}set(e,n){return super.set(Kh(this,e),n)}delete(e){return super.delete(Qh(this,e))}}function sa({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Kh({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Qh({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Jh(t){return t!==null&&typeof t=="object"?t.valueOf():t}function ua(t){return t}function ca(t,...e){return tl(t,ua,ua,e)}function tl(t,e,n,r){return function i(o,a){if(a>=r.length)return n(o);const s=new Zh,u=r[a++];let c=-1;for(const h of o){const l=u(h,++c,o),f=s.get(l);f?f.push(h):s.set(l,[h])}for(const[h,l]of s)s.set(h,i(l,a));return e(s)}(t,0)}const el=Math.sqrt(50),nl=Math.sqrt(10),rl=Math.sqrt(2);function dr(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=el?10:o>=nl?5:o>=rl?2:1;let s,u,c;return i<0?(c=Math.pow(10,-i)/a,s=Math.round(t*c),u=Math.round(e*c),s/c<t&&++s,u/c>e&&--u,c=-c):(c=Math.pow(10,i)*a,s=Math.round(t/c),u=Math.round(e/c),s*c<t&&++s,u*c>e&&--u),u<s&&.5<=n&&n<2?dr(t,e,n*2):[s,u,c]}function il(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,a]=r?dr(e,t,n):dr(t,e,n);if(!(o>=i))return[];const s=o-i+1,u=new Array(s);if(r)if(a<0)for(let c=0;c<s;++c)u[c]=(o-c)/-a;else for(let c=0;c<s;++c)u[c]=(o-c)*a;else if(a<0)for(let c=0;c<s;++c)u[c]=(i+c)/-a;else for(let c=0;c<s;++c)u[c]=(i+c)*a;return u}function Ai(t,e,n){return e=+e,t=+t,n=+n,dr(t,e,n)[2]}function Ti(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Ai(e,t,n):Ai(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function vo(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function du(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function*ol(t){for(const e of t)yield*e}function pu(t){return Array.from(ol(t))}function al(t){return t}var ni=1,ri=2,Ni=3,gn=4,ha=1e-6;function sl(t){return"translate("+t+",0)"}function ul(t){return"translate(0,"+t+")"}function cl(t){return e=>+t(e)}function hl(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function ll(){return!this.__axis}function gu(t,e){var n=[],r=null,i=null,o=6,a=6,s=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=t===ni||t===gn?-1:1,h=t===gn||t===ri?"x":"y",l=t===ni||t===Ni?sl:ul;function f(d){var p=r??(e.ticks?e.ticks.apply(e,n):e.domain()),v=i??(e.tickFormat?e.tickFormat.apply(e,n):al),g=Math.max(o,0)+s,m=e.range(),y=+m[0]+u,E=+m[m.length-1]+u,C=(e.bandwidth?hl:cl)(e.copy(),u),M=d.selection?d.selection():d,S=M.selectAll(".domain").data([null]),T=M.selectAll(".tick").data(p,e).order(),R=T.exit(),L=T.enter().append("g").attr("class","tick"),G=T.select("line"),b=T.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),T=T.merge(L),G=G.merge(L.append("line").attr("stroke","currentColor").attr(h+"2",c*o)),b=b.merge(L.append("text").attr("fill","currentColor").attr(h,c*g).attr("dy",t===ni?"0em":t===Ni?"0.71em":"0.32em")),d!==M&&(S=S.transition(d),T=T.transition(d),G=G.transition(d),b=b.transition(d),R=R.transition(d).attr("opacity",ha).attr("transform",function(z){return isFinite(z=C(z))?l(z+u):this.getAttribute("transform")}),L.attr("opacity",ha).attr("transform",function(z){var F=this.parentNode.__axis;return l((F&&isFinite(F=F(z))?F:C(z))+u)})),R.remove(),S.attr("d",t===gn||t===ri?a?"M"+c*a+","+y+"H"+u+"V"+E+"H"+c*a:"M"+u+","+y+"V"+E:a?"M"+y+","+c*a+"V"+u+"H"+E+"V"+c*a:"M"+y+","+u+"H"+E),T.attr("opacity",1).attr("transform",function(z){return l(C(z)+u)}),G.attr(h+"2",c*o),b.attr(h,c*g).text(v),M.filter(ll).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===ri?"start":t===gn?"end":"middle"),M.each(function(){this.__axis=C})}return f.scale=function(d){return arguments.length?(e=d,f):e},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),f):n.slice()},f.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),f):r&&r.slice()},f.tickFormat=function(d){return arguments.length?(i=d,f):i},f.tickSize=function(d){return arguments.length?(o=a=+d,f):o},f.tickSizeInner=function(d){return arguments.length?(o=+d,f):o},f.tickSizeOuter=function(d){return arguments.length?(a=+d,f):a},f.tickPadding=function(d){return arguments.length?(s=+d,f):s},f.offset=function(d){return arguments.length?(u=+d,f):u},f}function la(t){return gu(Ni,t)}function fa(t){return gu(gn,t)}var fl={value:()=>{}};function _o(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ar(n)}function ar(t){this._=t}function dl(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ar.prototype=_o.prototype={constructor:ar,on:function(t,e){var n=this._,r=dl(t+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=pl(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=da(n[i],t.name,e);else if(e==null)for(i in n)n[i]=da(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ar(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function pl(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function da(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=fl,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Di="http://www.w3.org/1999/xhtml";const pa={svg:"http://www.w3.org/2000/svg",xhtml:Di,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ur(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),pa.hasOwnProperty(e)?{space:pa[e],local:t}:t}function gl(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Di&&e.documentElement.namespaceURI===Di?e.createElement(t):e.createElementNS(n,t)}}function ml(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function mu(t){var e=Ur(t);return(e.local?ml:gl)(e)}function yl(){}function wo(t){return t==null?yl:function(){return this.querySelector(t)}}function vl(t){typeof t!="function"&&(t=wo(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=new Array(a),u,c,h=0;h<a;++h)(u=o[h])&&(c=t.call(u,u.__data__,h,o))&&("__data__"in u&&(c.__data__=u.__data__),s[h]=c);return new Et(r,this._parents)}function yu(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function _l(){return[]}function vu(t){return t==null?_l:function(){return this.querySelectorAll(t)}}function wl(t){return function(){return yu(t.apply(this,arguments))}}function bl(t){typeof t=="function"?t=wl(t):t=vu(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],s=a.length,u,c=0;c<s;++c)(u=a[c])&&(r.push(t.call(u,u.__data__,c,a)),i.push(u));return new Et(r,i)}function _u(t){return function(){return this.matches(t)}}function wu(t){return function(e){return e.matches(t)}}var xl=Array.prototype.find;function El(t){return function(){return xl.call(this.children,t)}}function Sl(){return this.firstElementChild}function Cl(t){return this.select(t==null?Sl:El(typeof t=="function"?t:wu(t)))}var Ml=Array.prototype.filter;function Al(){return Array.from(this.children)}function Tl(t){return function(){return Ml.call(this.children,t)}}function Nl(t){return this.selectAll(t==null?Al:Tl(typeof t=="function"?t:wu(t)))}function Dl(t){typeof t!="function"&&(t=_u(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],u,c=0;c<a;++c)(u=o[c])&&t.call(u,u.__data__,c,o)&&s.push(u);return new Et(r,this._parents)}function bu(t){return new Array(t.length)}function Rl(){return new Et(this._enter||this._groups.map(bu),this._parents)}function pr(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}pr.prototype={constructor:pr,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ll(t){return function(){return t}}function $l(t,e,n,r,i,o){for(var a=0,s,u=e.length,c=o.length;a<c;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new pr(t,o[a]);for(;a<u;++a)(s=e[a])&&(i[a]=s)}function Fl(t,e,n,r,i,o,a){var s,u,c=new Map,h=e.length,l=o.length,f=new Array(h),d;for(s=0;s<h;++s)(u=e[s])&&(f[s]=d=a.call(u,u.__data__,s,e)+"",c.has(d)?i[s]=u:c.set(d,u));for(s=0;s<l;++s)d=a.call(t,o[s],s,o)+"",(u=c.get(d))?(r[s]=u,u.__data__=o[s],c.delete(d)):n[s]=new pr(t,o[s]);for(s=0;s<h;++s)(u=e[s])&&c.get(f[s])===u&&(i[s]=u)}function Ol(t){return t.__data__}function Il(t,e){if(!arguments.length)return Array.from(this,Ol);var n=e?Fl:$l,r=this._parents,i=this._groups;typeof t!="function"&&(t=Ll(t));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),c=0;c<o;++c){var h=r[c],l=i[c],f=l.length,d=kl(t.call(h,h&&h.__data__,c,r)),p=d.length,v=s[c]=new Array(p),g=a[c]=new Array(p),m=u[c]=new Array(f);n(h,l,v,g,m,d,e);for(var y=0,E=0,C,M;y<p;++y)if(C=v[y]){for(y>=E&&(E=y+1);!(M=g[E])&&++E<p;);C._next=M||null}}return a=new Et(a,r),a._enter=s,a._exit=u,a}function kl(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Pl(){return new Et(this._exit||this._groups.map(bu),this._parents)}function Gl(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function zl(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),u=0;u<a;++u)for(var c=n[u],h=r[u],l=c.length,f=s[u]=new Array(l),d,p=0;p<l;++p)(d=c[p]||h[p])&&(f[p]=d);for(;u<i;++u)s[u]=n[u];return new Et(s,this._parents)}function Ul(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function Bl(t){t||(t=Hl);function e(l,f){return l&&f?t(l.__data__,f.__data__):!l-!f}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,u=i[o]=new Array(s),c,h=0;h<s;++h)(c=a[h])&&(u[h]=c);u.sort(e)}return new Et(i,this._parents).order()}function Hl(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Wl(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Yl(){return Array.from(this)}function ql(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function jl(){let t=0;for(const e of this)++t;return t}function Vl(){return!this.node()}function Xl(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function Zl(t){return function(){this.removeAttribute(t)}}function Kl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ql(t,e){return function(){this.setAttribute(t,e)}}function Jl(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function tf(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function ef(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function nf(t,e){var n=Ur(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Kl:Zl:typeof e=="function"?n.local?ef:tf:n.local?Jl:Ql)(n,e))}function xu(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function rf(t){return function(){this.style.removeProperty(t)}}function of(t,e,n){return function(){this.style.setProperty(t,e,n)}}function af(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function sf(t,e,n){return arguments.length>1?this.each((e==null?rf:typeof e=="function"?af:of)(t,e,n??"")):qe(this.node(),t)}function qe(t,e){return t.style.getPropertyValue(e)||xu(t).getComputedStyle(t,null).getPropertyValue(e)}function uf(t){return function(){delete this[t]}}function cf(t,e){return function(){this[t]=e}}function hf(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function lf(t,e){return arguments.length>1?this.each((e==null?uf:typeof e=="function"?hf:cf)(t,e)):this.node()[t]}function Eu(t){return t.trim().split(/^|\s+/)}function bo(t){return t.classList||new Su(t)}function Su(t){this._node=t,this._names=Eu(t.getAttribute("class")||"")}Su.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Cu(t,e){for(var n=bo(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Mu(t,e){for(var n=bo(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function ff(t){return function(){Cu(this,t)}}function df(t){return function(){Mu(this,t)}}function pf(t,e){return function(){(e.apply(this,arguments)?Cu:Mu)(this,t)}}function gf(t,e){var n=Eu(t+"");if(arguments.length<2){for(var r=bo(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?pf:e?ff:df)(n,e))}function mf(){this.textContent=""}function yf(t){return function(){this.textContent=t}}function vf(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function _f(t){return arguments.length?this.each(t==null?mf:(typeof t=="function"?vf:yf)(t)):this.node().textContent}function wf(){this.innerHTML=""}function bf(t){return function(){this.innerHTML=t}}function xf(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Ef(t){return arguments.length?this.each(t==null?wf:(typeof t=="function"?xf:bf)(t)):this.node().innerHTML}function Sf(){this.nextSibling&&this.parentNode.appendChild(this)}function Cf(){return this.each(Sf)}function Mf(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Af(){return this.each(Mf)}function Tf(t){var e=typeof t=="function"?t:mu(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Nf(){return null}function Df(t,e){var n=typeof t=="function"?t:mu(t),r=e==null?Nf:typeof e=="function"?e:wo(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Rf(){var t=this.parentNode;t&&t.removeChild(this)}function Lf(){return this.each(Rf)}function $f(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ff(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Of(t){return this.select(t?Ff:$f)}function If(t){return arguments.length?this.property("__data__",t):this.node().__data__}function kf(t){return function(e){t.call(this,e,this.__data__)}}function Pf(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Gf(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function zf(t,e,n){return function(){var r=this.__on,i,o=kf(e);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Uf(t,e,n){var r=Pf(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,c=s.length,h;u<c;++u)for(i=0,h=s[u];i<o;++i)if((a=r[i]).type===h.type&&a.name===h.name)return h.value}return}for(s=e?zf:Gf,i=0;i<o;++i)this.each(s(r[i],e,n));return this}function Au(t,e,n){var r=xu(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Bf(t,e){return function(){return Au(this,t,e)}}function Hf(t,e){return function(){return Au(this,t,e.apply(this,arguments))}}function Wf(t,e){return this.each((typeof e=="function"?Hf:Bf)(t,e))}function*Yf(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var xo=[null];function Et(t,e){this._groups=t,this._parents=e}function On(){return new Et([[document.documentElement]],xo)}function qf(){return this}Et.prototype=On.prototype={constructor:Et,select:vl,selectAll:bl,selectChild:Cl,selectChildren:Nl,filter:Dl,data:Il,enter:Rl,exit:Pl,join:Gl,merge:zl,selection:qf,order:Ul,sort:Bl,call:Wl,nodes:Yl,node:ql,size:jl,empty:Vl,each:Xl,attr:nf,style:sf,property:lf,classed:gf,text:_f,html:Ef,raise:Cf,lower:Af,append:Tf,insert:Df,remove:Lf,clone:Of,datum:If,on:Uf,dispatch:Wf,[Symbol.iterator]:Yf};function ut(t){return typeof t=="string"?new Et([[document.querySelector(t)]],[document.documentElement]):new Et([[t]],xo)}function jf(t){let e;for(;e=t.sourceEvent;)t=e;return t}function we(t,e){if(t=jf(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function Gn(t){return typeof t=="string"?new Et([document.querySelectorAll(t)],[document.documentElement]):new Et([yu(t)],xo)}const Ri={capture:!0,passive:!1};function Li(t){t.preventDefault(),t.stopImmediatePropagation()}function Vf(t){var e=t.document.documentElement,n=ut(t).on("dragstart.drag",Li,Ri);"onselectstart"in e?n.on("selectstart.drag",Li,Ri):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Xf(t,e){var n=t.document.documentElement,r=ut(t).on("dragstart.drag",null);e&&(r.on("click.drag",Li,Ri),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Eo(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Tu(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function In(){}var Tn=.7,gr=1/Tn,He="\\s*([+-]?\\d+)\\s*",Nn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ne="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Zf=/^#([0-9a-f]{3,8})$/,Kf=new RegExp(`^rgb\\(${He},${He},${He}\\)$`),Qf=new RegExp(`^rgb\\(${ne},${ne},${ne}\\)$`),Jf=new RegExp(`^rgba\\(${He},${He},${He},${Nn}\\)$`),td=new RegExp(`^rgba\\(${ne},${ne},${ne},${Nn}\\)$`),ed=new RegExp(`^hsl\\(${Nn},${ne},${ne}\\)$`),nd=new RegExp(`^hsla\\(${Nn},${ne},${ne},${Nn}\\)$`),ga={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Eo(In,Me,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ma,formatHex:ma,formatHex8:rd,formatHsl:id,formatRgb:ya,toString:ya});function ma(){return this.rgb().formatHex()}function rd(){return this.rgb().formatHex8()}function id(){return Nu(this).formatHsl()}function ya(){return this.rgb().formatRgb()}function Me(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Zf.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?va(e):n===3?new At(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?zn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?zn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Kf.exec(t))?new At(e[1],e[2],e[3],1):(e=Qf.exec(t))?new At(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Jf.exec(t))?zn(e[1],e[2],e[3],e[4]):(e=td.exec(t))?zn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ed.exec(t))?ba(e[1],e[2]/100,e[3]/100,1):(e=nd.exec(t))?ba(e[1],e[2]/100,e[3]/100,e[4]):ga.hasOwnProperty(t)?va(ga[t]):t==="transparent"?new At(NaN,NaN,NaN,0):null}function va(t){return new At(t>>16&255,t>>8&255,t&255,1)}function zn(t,e,n,r){return r<=0&&(t=e=n=NaN),new At(t,e,n,r)}function od(t){return t instanceof In||(t=Me(t)),t?(t=t.rgb(),new At(t.r,t.g,t.b,t.opacity)):new At}function $i(t,e,n,r){return arguments.length===1?od(t):new At(t,e,n,r??1)}function At(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Eo(At,$i,Tu(In,{brighter(t){return t=t==null?gr:Math.pow(gr,t),new At(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Tn:Math.pow(Tn,t),new At(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new At(Se(this.r),Se(this.g),Se(this.b),mr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_a,formatHex:_a,formatHex8:ad,formatRgb:wa,toString:wa}));function _a(){return`#${Ee(this.r)}${Ee(this.g)}${Ee(this.b)}`}function ad(){return`#${Ee(this.r)}${Ee(this.g)}${Ee(this.b)}${Ee((isNaN(this.opacity)?1:this.opacity)*255)}`}function wa(){const t=mr(this.opacity);return`${t===1?"rgb(":"rgba("}${Se(this.r)}, ${Se(this.g)}, ${Se(this.b)}${t===1?")":`, ${t})`}`}function mr(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Se(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ee(t){return t=Se(t),(t<16?"0":"")+t.toString(16)}function ba(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new jt(t,e,n,r)}function Nu(t){if(t instanceof jt)return new jt(t.h,t.s,t.l,t.opacity);if(t instanceof In||(t=Me(t)),!t)return new jt;if(t instanceof jt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new jt(a,s,u,t.opacity)}function sd(t,e,n,r){return arguments.length===1?Nu(t):new jt(t,e,n,r??1)}function jt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Eo(jt,sd,Tu(In,{brighter(t){return t=t==null?gr:Math.pow(gr,t),new jt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Tn:Math.pow(Tn,t),new jt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new At(ii(t>=240?t-240:t+120,i,r),ii(t,i,r),ii(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new jt(xa(this.h),Un(this.s),Un(this.l),mr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=mr(this.opacity);return`${t===1?"hsl(":"hsla("}${xa(this.h)}, ${Un(this.s)*100}%, ${Un(this.l)*100}%${t===1?")":`, ${t})`}`}}));function xa(t){return t=(t||0)%360,t<0?t+360:t}function Un(t){return Math.max(0,Math.min(1,t||0))}function ii(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const So=t=>()=>t;function ud(t,e){return function(n){return t+n*e}}function cd(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function hd(t){return(t=+t)==1?Du:function(e,n){return n-e?cd(e,n,t):So(isNaN(e)?n:e)}}function Du(t,e){var n=e-t;return n?ud(t,n):So(isNaN(t)?e:t)}const yr=function t(e){var n=hd(e);function r(i,o){var a=n((i=$i(i)).r,(o=$i(o)).r),s=n(i.g,o.g),u=n(i.b,o.b),c=Du(i.opacity,o.opacity);return function(h){return i.r=a(h),i.g=s(h),i.b=u(h),i.opacity=c(h),i+""}}return r.gamma=t,r}(1);function ld(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function fd(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function dd(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=Co(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function pd(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function qt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function gd(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Co(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Fi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oi=new RegExp(Fi.source,"g");function md(t){return function(){return t}}function yd(t){return function(e){return t(e)+""}}function Ru(t,e){var n=Fi.lastIndex=oi.lastIndex=0,r,i,o,a=-1,s=[],u=[];for(t=t+"",e=e+"";(r=Fi.exec(t))&&(i=oi.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,u.push({i:a,x:qt(r,i)})),n=oi.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?u[0]?yd(u[0].x):md(e):(e=u.length,function(c){for(var h=0,l;h<e;++h)s[(l=u[h]).i]=l.x(c);return s.join("")})}function Co(t,e){var n=typeof e,r;return e==null||n==="boolean"?So(e):(n==="number"?qt:n==="string"?(r=Me(e))?(e=r,yr):Ru:e instanceof Me?yr:e instanceof Date?pd:fd(e)?ld:Array.isArray(e)?dd:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?gd:qt)(t,e)}function vd(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Ea=180/Math.PI,Oi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Lu(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Ea,skewX:Math.atan(u)*Ea,scaleX:a,scaleY:s}}var Bn;function _d(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Oi:Lu(e.a,e.b,e.c,e.d,e.e,e.f)}function wd(t){return t==null||(Bn||(Bn=document.createElementNS("http://www.w3.org/2000/svg","g")),Bn.setAttribute("transform",t),!(t=Bn.transform.baseVal.consolidate()))?Oi:(t=t.matrix,Lu(t.a,t.b,t.c,t.d,t.e,t.f))}function $u(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function o(c,h,l,f,d,p){if(c!==l||h!==f){var v=d.push("translate(",null,e,null,n);p.push({i:v-4,x:qt(c,l)},{i:v-2,x:qt(h,f)})}else(l||f)&&d.push("translate("+l+e+f+n)}function a(c,h,l,f){c!==h?(c-h>180?h+=360:h-c>180&&(c+=360),f.push({i:l.push(i(l)+"rotate(",null,r)-2,x:qt(c,h)})):h&&l.push(i(l)+"rotate("+h+r)}function s(c,h,l,f){c!==h?f.push({i:l.push(i(l)+"skewX(",null,r)-2,x:qt(c,h)}):h&&l.push(i(l)+"skewX("+h+r)}function u(c,h,l,f,d,p){if(c!==l||h!==f){var v=d.push(i(d)+"scale(",null,",",null,")");p.push({i:v-4,x:qt(c,l)},{i:v-2,x:qt(h,f)})}else(l!==1||f!==1)&&d.push(i(d)+"scale("+l+","+f+")")}return function(c,h){var l=[],f=[];return c=t(c),h=t(h),o(c.translateX,c.translateY,h.translateX,h.translateY,l,f),a(c.rotate,h.rotate,l,f),s(c.skewX,h.skewX,l,f),u(c.scaleX,c.scaleY,h.scaleX,h.scaleY,l,f),c=h=null,function(d){for(var p=-1,v=f.length,g;++p<v;)l[(g=f[p]).i]=g.x(d);return l.join("")}}}var bd=$u(_d,"px, ","px)","deg)"),xd=$u(wd,", ",")",")"),Ed=1e-12;function Sa(t){return((t=Math.exp(t))+1/t)/2}function Sd(t){return((t=Math.exp(t))-1/t)/2}function Cd(t){return((t=Math.exp(2*t))-1)/(t+1)}const Fu=function t(e,n,r){function i(o,a){var s=o[0],u=o[1],c=o[2],h=a[0],l=a[1],f=a[2],d=h-s,p=l-u,v=d*d+p*p,g,m;if(v<Ed)m=Math.log(f/c)/e,g=function(T){return[s+T*d,u+T*p,c*Math.exp(e*T*m)]};else{var y=Math.sqrt(v),E=(f*f-c*c+r*v)/(2*c*n*y),C=(f*f-c*c-r*v)/(2*f*n*y),M=Math.log(Math.sqrt(E*E+1)-E),S=Math.log(Math.sqrt(C*C+1)-C);m=(S-M)/e,g=function(T){var R=T*m,L=Sa(M),G=c/(n*y)*(L*Cd(e*R+M)-Sd(M));return[s+G*d,u+G*p,c*L/Sa(e*R+M)]}}return g.duration=m*1e3*e/Math.SQRT2,g}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,u=s*s;return t(a,s,u)},i}(Math.SQRT2,2,4);var je=0,mn=0,an=0,Ou=1e3,vr,yn,_r=0,Ae=0,Br=0,Dn=typeof performance=="object"&&performance.now?performance:Date,Iu=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Mo(){return Ae||(Iu(Md),Ae=Dn.now()+Br)}function Md(){Ae=0}function wr(){this._call=this._time=this._next=null}wr.prototype=ku.prototype={constructor:wr,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Mo():+n)+(e==null?0:+e),!this._next&&yn!==this&&(yn?yn._next=this:vr=this,yn=this),this._call=t,this._time=n,Ii()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ii())}};function ku(t,e,n){var r=new wr;return r.restart(t,e,n),r}function Ad(){Mo(),++je;for(var t=vr,e;t;)(e=Ae-t._time)>=0&&t._call.call(void 0,e),t=t._next;--je}function Ca(){Ae=(_r=Dn.now())+Br,je=mn=0;try{Ad()}finally{je=0,Nd(),Ae=0}}function Td(){var t=Dn.now(),e=t-_r;e>Ou&&(Br-=e,_r=t)}function Nd(){for(var t,e=vr,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:vr=n);yn=t,Ii(r)}function Ii(t){if(!je){mn&&(mn=clearTimeout(mn));var e=t-Ae;e>24?(t<1/0&&(mn=setTimeout(Ca,t-Dn.now()-Br)),an&&(an=clearInterval(an))):(an||(_r=Dn.now(),an=setInterval(Td,Ou)),je=1,Iu(Ca))}}function Ma(t,e,n){var r=new wr;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Dd=_o("start","end","cancel","interrupt"),Rd=[],Pu=0,Aa=1,ki=2,sr=3,Ta=4,Pi=5,ur=6;function Hr(t,e,n,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Ld(t,n,{name:e,index:r,group:i,on:Dd,tween:Rd,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Pu})}function Ao(t,e){var n=Xt(t,e);if(n.state>Pu)throw new Error("too late; already scheduled");return n}function oe(t,e){var n=Xt(t,e);if(n.state>sr)throw new Error("too late; already running");return n}function Xt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ld(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=ku(o,0,n.time);function o(c){n.state=Aa,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var h,l,f,d;if(n.state!==Aa)return u();for(h in r)if(d=r[h],d.name===n.name){if(d.state===sr)return Ma(a);d.state===Ta?(d.state=ur,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[h]):+h<e&&(d.state=ur,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[h])}if(Ma(function(){n.state===sr&&(n.state=Ta,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=ki,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ki){for(n.state=sr,i=new Array(f=n.tween.length),h=0,l=-1;h<f;++h)(d=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(i[++l]=d);i.length=l+1}}function s(c){for(var h=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=Pi,1),l=-1,f=i.length;++l<f;)i[l].call(t,h);n.state===Pi&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=ur,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function cr(t,e){var n=t.__transition,r,i,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){o=!1;continue}i=r.state>ki&&r.state<Pi,r.state=ur,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}o&&delete t.__transition}}function $d(t){return this.each(function(){cr(this,t)})}function Fd(t,e){var n,r;return function(){var i=oe(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Od(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=oe(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===e){i[u]=s;break}u===c&&i.push(s)}o.tween=i}}function Id(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Xt(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?Fd:Od)(n,t,e))}function To(t,e,n){var r=t._id;return t.each(function(){var i=oe(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Xt(i,r).value[e]}}function Gu(t,e){var n;return(typeof e=="number"?qt:e instanceof Me?yr:(n=Me(e))?(e=n,yr):Ru)(t,e)}function kd(t){return function(){this.removeAttribute(t)}}function Pd(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Gd(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function zd(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function Ud(t,e,n){var r,i,o;return function(){var a,s=n(this),u;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),u=s+"",a===u?null:a===r&&u===i?o:(i=u,o=e(r=a,s)))}}function Bd(t,e,n){var r,i,o;return function(){var a,s=n(this),u;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),u=s+"",a===u?null:a===r&&u===i?o:(i=u,o=e(r=a,s)))}}function Hd(t,e){var n=Ur(t),r=n==="transform"?xd:Gu;return this.attrTween(t,typeof e=="function"?(n.local?Bd:Ud)(n,r,To(this,"attr."+t,e)):e==null?(n.local?Pd:kd)(n):(n.local?zd:Gd)(n,r,e))}function Wd(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Yd(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function qd(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Yd(t,o)),n}return i._value=e,i}function jd(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Wd(t,o)),n}return i._value=e,i}function Vd(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Ur(t);return this.tween(n,(r.local?qd:jd)(r,e))}function Xd(t,e){return function(){Ao(this,t).delay=+e.apply(this,arguments)}}function Zd(t,e){return e=+e,function(){Ao(this,t).delay=e}}function Kd(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Xd:Zd)(e,t)):Xt(this.node(),e).delay}function Qd(t,e){return function(){oe(this,t).duration=+e.apply(this,arguments)}}function Jd(t,e){return e=+e,function(){oe(this,t).duration=e}}function tp(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Qd:Jd)(e,t)):Xt(this.node(),e).duration}function ep(t,e){if(typeof e!="function")throw new Error;return function(){oe(this,t).ease=e}}function np(t){var e=this._id;return arguments.length?this.each(ep(e,t)):Xt(this.node(),e).ease}function rp(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;oe(this,t).ease=n}}function ip(t){if(typeof t!="function")throw new Error;return this.each(rp(this._id,t))}function op(t){typeof t!="function"&&(t=_u(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],u,c=0;c<a;++c)(u=o[c])&&t.call(u,u.__data__,c,o)&&s.push(u);return new le(r,this._parents,this._name,this._id)}function ap(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u=e[s],c=n[s],h=u.length,l=a[s]=new Array(h),f,d=0;d<h;++d)(f=u[d]||c[d])&&(l[d]=f);for(;s<r;++s)a[s]=e[s];return new le(a,this._parents,this._name,this._id)}function sp(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function up(t,e,n){var r,i,o=sp(e)?Ao:oe;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}function cp(t,e){var n=this._id;return arguments.length<2?Xt(this.node(),n).on.on(t):this.each(up(n,t,e))}function hp(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function lp(){return this.on("end.remove",hp(this._id))}function fp(t){var e=this._name,n=this._id;typeof t!="function"&&(t=wo(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],u=s.length,c=o[a]=new Array(u),h,l,f=0;f<u;++f)(h=s[f])&&(l=t.call(h,h.__data__,f,s))&&("__data__"in h&&(l.__data__=h.__data__),c[f]=l,Hr(c[f],e,n,f,c,Xt(h,n)));return new le(o,this._parents,e,n)}function dp(t){var e=this._name,n=this._id;typeof t!="function"&&(t=vu(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u=r[s],c=u.length,h,l=0;l<c;++l)if(h=u[l]){for(var f=t.call(h,h.__data__,l,u),d,p=Xt(h,n),v=0,g=f.length;v<g;++v)(d=f[v])&&Hr(d,e,n,v,f,p);o.push(f),a.push(h)}return new le(o,a,e,n)}var pp=On.prototype.constructor;function gp(){return new pp(this._groups,this._parents)}function mp(t,e){var n,r,i;return function(){var o=qe(this,t),a=(this.style.removeProperty(t),qe(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function zu(t){return function(){this.style.removeProperty(t)}}function yp(t,e,n){var r,i=n+"",o;return function(){var a=qe(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function vp(t,e,n){var r,i,o;return function(){var a=qe(this,t),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(t),qe(this,t))),a===u?null:a===r&&u===i?o:(i=u,o=e(r=a,s))}}function _p(t,e){var n,r,i,o="style."+e,a="end."+o,s;return function(){var u=oe(this,t),c=u.on,h=u.value[o]==null?s||(s=zu(e)):void 0;(c!==n||i!==h)&&(r=(n=c).copy()).on(a,i=h),u.on=r}}function wp(t,e,n){var r=(t+="")=="transform"?bd:Gu;return e==null?this.styleTween(t,mp(t,r)).on("end.style."+t,zu(t)):typeof e=="function"?this.styleTween(t,vp(t,r,To(this,"style."+t,e))).each(_p(this._id,t)):this.styleTween(t,yp(t,r,e),n).on("end.style."+t,null)}function bp(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function xp(t,e,n){var r,i;function o(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&bp(t,a,n)),r}return o._value=e,o}function Ep(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,xp(t,e,n??""))}function Sp(t){return function(){this.textContent=t}}function Cp(t){return function(){var e=t(this);this.textContent=e??""}}function Mp(t){return this.tween("text",typeof t=="function"?Cp(To(this,"text",t)):Sp(t==null?"":t+""))}function Ap(t){return function(e){this.textContent=t.call(this,e)}}function Tp(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Ap(i)),e}return r._value=t,r}function Np(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Tp(t))}function Dp(){for(var t=this._name,e=this._id,n=Uu(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,u,c=0;c<s;++c)if(u=a[c]){var h=Xt(u,e);Hr(u,t,n,c,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new le(r,this._parents,t,n)}function Rp(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},u={value:function(){--i===0&&o()}};n.each(function(){var c=oe(this,r),h=c.on;h!==t&&(e=(t=h).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),c.on=e}),i===0&&o()})}var Lp=0;function le(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Uu(){return++Lp}var ae=On.prototype;le.prototype={constructor:le,select:fp,selectAll:dp,selectChild:ae.selectChild,selectChildren:ae.selectChildren,filter:op,merge:ap,selection:gp,transition:Dp,call:ae.call,nodes:ae.nodes,node:ae.node,size:ae.size,empty:ae.empty,each:ae.each,on:cp,attr:Hd,attrTween:Vd,style:wp,styleTween:Ep,text:Mp,textTween:Np,remove:lp,tween:Id,delay:Kd,duration:tp,ease:np,easeVarying:ip,end:Rp,[Symbol.iterator]:ae[Symbol.iterator]};function $p(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Fp={time:null,delay:0,duration:250,ease:$p};function Op(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Ip(t){var e,n;t instanceof le?(e=t._id,t=t._name):(e=Uu(),(n=Fp).time=Mo(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,u,c=0;c<s;++c)(u=a[c])&&Hr(u,t,e,c,a,n||Op(u,e));return new le(r,this._parents,t,e)}On.prototype.interrupt=$d;On.prototype.transition=Ip;const Gi=Math.PI,zi=2*Gi,xe=1e-6,kp=zi-xe;function Bu(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Pp(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Bu;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Gp{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Bu:Pp(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,u=r-e,c=i-n,h=a-e,l=s-n,f=h*h+l*l;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>xe)if(!(Math.abs(l*u-c*h)>xe)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-a,p=i-s,v=u*u+c*c,g=d*d+p*p,m=Math.sqrt(v),y=Math.sqrt(f),E=o*Math.tan((Gi-Math.acos((v+f-g)/(2*m*y)))/2),C=E/y,M=E/m;Math.abs(C-1)>xe&&this._append`L${e+C*h},${n+C*l}`,this._append`A${o},${o},0,0,${+(l*d>h*p)},${this._x1=e+M*u},${this._y1=n+M*c}`}}arc(e,n,r,i,o,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),u=r*Math.sin(i),c=e+s,h=n+u,l=1^a,f=a?i-o:o-i;this._x1===null?this._append`M${c},${h}`:(Math.abs(this._x1-c)>xe||Math.abs(this._y1-h)>xe)&&this._append`L${c},${h}`,r&&(f<0&&(f=f%zi+zi),f>kp?this._append`A${r},${r},0,1,${l},${e-s},${n-u}A${r},${r},0,1,${l},${this._x1=c},${this._y1=h}`:f>xe&&this._append`A${r},${r},0,${+(f>=Gi)},${l},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}var Na={},ai={},si=34,sn=10,ui=13;function Hu(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function zp(t,e){var n=Hu(t);return function(r,i){return e(n(r),i,t)}}function Da(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function Mt(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Up(t){return t<0?"-"+Mt(-t,6):t>9999?"+"+Mt(t,6):Mt(t,4)}function Bp(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Up(t.getUTCFullYear())+"-"+Mt(t.getUTCMonth()+1,2)+"-"+Mt(t.getUTCDate(),2)+(i?"T"+Mt(e,2)+":"+Mt(n,2)+":"+Mt(r,2)+"."+Mt(i,3)+"Z":r?"T"+Mt(e,2)+":"+Mt(n,2)+":"+Mt(r,2)+"Z":n||e?"T"+Mt(e,2)+":"+Mt(n,2)+"Z":"")}function Hp(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(l,f){var d,p,v=i(l,function(g,m){if(d)return d(g,m-1);p=g,d=f?zp(g,f):Hu(g)});return v.columns=p||[],v}function i(l,f){var d=[],p=l.length,v=0,g=0,m,y=p<=0,E=!1;l.charCodeAt(p-1)===sn&&--p,l.charCodeAt(p-1)===ui&&--p;function C(){if(y)return ai;if(E)return E=!1,Na;var S,T=v,R;if(l.charCodeAt(T)===si){for(;v++<p&&l.charCodeAt(v)!==si||l.charCodeAt(++v)===si;);return(S=v)>=p?y=!0:(R=l.charCodeAt(v++))===sn?E=!0:R===ui&&(E=!0,l.charCodeAt(v)===sn&&++v),l.slice(T+1,S-1).replace(/""/g,'"')}for(;v<p;){if((R=l.charCodeAt(S=v++))===sn)E=!0;else if(R===ui)E=!0,l.charCodeAt(v)===sn&&++v;else if(R!==n)continue;return l.slice(T,S)}return y=!0,l.slice(T,p)}for(;(m=C())!==ai;){for(var M=[];m!==Na&&m!==ai;)M.push(m),m=C();f&&(M=f(M,g++))==null||d.push(M)}return d}function o(l,f){return l.map(function(d){return f.map(function(p){return h(d[p])}).join(t)})}function a(l,f){return f==null&&(f=Da(l)),[f.map(h).join(t)].concat(o(l,f)).join(`
`)}function s(l,f){return f==null&&(f=Da(l)),o(l,f).join(`
`)}function u(l){return l.map(c).join(`
`)}function c(l){return l.map(h).join(t)}function h(l){return l==null?"":l instanceof Date?Bp(l):e.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l}return{parse:r,parseRows:i,format:a,formatBody:s,formatRows:u,formatRow:c,formatValue:h}}var Wu=Hp(","),Wp=Wu.parse,Ra=Wu.parseRows;function Yp(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function qp(t,e){return fetch(t,e).then(Yp)}function jp(t){return function(e,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),qp(e,n).then(function(i){return t(i,r)})}}var La=jp(Wp);function Vp(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function No(t,e){return fetch(t,e).then(Vp)}function Xp(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function br(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Ve(t){return t=br(Math.abs(t)),t?t[1]:NaN}function Zp(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}function Kp(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Qp=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xr(t){if(!(e=Qp.exec(t)))throw new Error("invalid format: "+t);var e;return new Do({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}xr.prototype=Do.prototype;function Do(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Do.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Jp(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Yu;function tg(t,e){var n=br(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Yu=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+br(t,Math.max(0,e+o-1))[0]}function $a(t,e){var n=br(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Fa={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Xp,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>$a(t*100,e),r:$a,s:tg,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Oa(t){return t}var Ia=Array.prototype.map,ka=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function eg(t){var e=t.grouping===void 0||t.thousands===void 0?Oa:Zp(Ia.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?Oa:Kp(Ia.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function c(l){l=xr(l);var f=l.fill,d=l.align,p=l.sign,v=l.symbol,g=l.zero,m=l.width,y=l.comma,E=l.precision,C=l.trim,M=l.type;M==="n"?(y=!0,M="g"):Fa[M]||(E===void 0&&(E=12),C=!0,M="g"),(g||f==="0"&&d==="=")&&(g=!0,f="0",d="=");var S=v==="$"?n:v==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",T=v==="$"?r:/[%p]/.test(M)?a:"",R=Fa[M],L=/[defgprs%]/.test(M);E=E===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function G(b){var z=S,F=T,_,w,x;if(M==="c")F=R(b)+F,b="";else{b=+b;var A=b<0||1/b<0;if(b=isNaN(b)?u:R(Math.abs(b),E),C&&(b=Jp(b)),A&&+b==0&&p!=="+"&&(A=!1),z=(A?p==="("?p:s:p==="-"||p==="("?"":p)+z,F=(M==="s"?ka[8+Yu/3]:"")+F+(A&&p==="("?")":""),L){for(_=-1,w=b.length;++_<w;)if(x=b.charCodeAt(_),48>x||x>57){F=(x===46?i+b.slice(_+1):b.slice(_))+F,b=b.slice(0,_);break}}}y&&!g&&(b=e(b,1/0));var I=z.length+b.length+F.length,k=I<m?new Array(m-I+1).join(f):"";switch(y&&g&&(b=e(k+b,k.length?m-F.length:1/0),k=""),d){case"<":b=z+b+F+k;break;case"=":b=z+k+b+F;break;case"^":b=k.slice(0,I=k.length>>1)+z+b+F+k.slice(I);break;default:b=k+z+b+F;break}return o(b)}return G.toString=function(){return l+""},G}function h(l,f){var d=c((l=xr(l),l.type="f",l)),p=Math.max(-8,Math.min(8,Math.floor(Ve(f)/3)))*3,v=Math.pow(10,-p),g=ka[8+p/3];return function(m){return d(v*m)+g}}return{format:c,formatPrefix:h}}var Hn,qu,ju;ng({thousands:",",grouping:[3],currency:["$",""]});function ng(t){return Hn=eg(t),qu=Hn.format,ju=Hn.formatPrefix,Hn}function rg(t){return Math.max(0,-Ve(Math.abs(t)))}function ig(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ve(e)/3)))*3-Ve(Math.abs(t)))}function og(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ve(e)-Ve(t))+1}var nt=1e-6,ag=1e-12,j=Math.PI,Tt=j/2,Pa=j/4,Ot=j*2,Ft=180/j,ft=j/180,ot=Math.abs,Vu=Math.atan,Rn=Math.atan2,ct=Math.cos,sg=Math.exp,ug=Math.log,ht=Math.sin,cg=Math.sign||function(t){return t>0?1:t<0?-1:0},Re=Math.sqrt,hg=Math.tan;function lg(t){return t>1?0:t<-1?j:Math.acos(t)}function Ln(t){return t>1?Tt:t<-1?-Tt:Math.asin(t)}function Gt(){}function Er(t,e){t&&za.hasOwnProperty(t.type)&&za[t.type](t,e)}var Ga={Feature:function(t,e){Er(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Er(n[r].geometry,e)}},za={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Ui(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Ui(n[r],e,0)},Polygon:function(t,e){Ua(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Ua(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Er(n[r],e)}};function Ui(t,e,n){var r=-1,i=t.length-n,o;for(e.lineStart();++r<i;)o=t[r],e.point(o[0],o[1],o[2]);e.lineEnd()}function Ua(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Ui(t[n],e,1);e.polygonEnd()}function Ge(t,e){t&&Ga.hasOwnProperty(t.type)?Ga[t.type](t,e):Er(t,e)}function Bi(t){return[Rn(t[1],t[0]),Ln(t[2])]}function Xe(t){var e=t[0],n=t[1],r=ct(n);return[r*ct(e),r*ht(e),ht(n)]}function Wn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Sr(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ci(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Yn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Hi(t){var e=Re(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Wi(t,e){function n(r,i){return r=t(r,i),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,i){return r=e.invert(r,i),r&&t.invert(r[0],r[1])}),n}function Yi(t,e){return ot(t)>j&&(t-=Math.round(t/Ot)*Ot),[t,e]}Yi.invert=Yi;function Xu(t,e,n){return(t%=Ot)?e||n?Wi(Ha(t),Wa(e,n)):Ha(t):e||n?Wa(e,n):Yi}function Ba(t){return function(e,n){return e+=t,ot(e)>j&&(e-=Math.round(e/Ot)*Ot),[e,n]}}function Ha(t){var e=Ba(t);return e.invert=Ba(-t),e}function Wa(t,e){var n=ct(t),r=ht(t),i=ct(e),o=ht(e);function a(s,u){var c=ct(u),h=ct(s)*c,l=ht(s)*c,f=ht(u),d=f*n+h*r;return[Rn(l*i-d*o,h*n-f*r),Ln(d*i+l*o)]}return a.invert=function(s,u){var c=ct(u),h=ct(s)*c,l=ht(s)*c,f=ht(u),d=f*i-l*o;return[Rn(l*i+f*o,h*n+d*r),Ln(d*n-h*r)]},a}function fg(t){t=Xu(t[0]*ft,t[1]*ft,t.length>2?t[2]*ft:0);function e(n){return n=t(n[0]*ft,n[1]*ft),n[0]*=Ft,n[1]*=Ft,n}return e.invert=function(n){return n=t.invert(n[0]*ft,n[1]*ft),n[0]*=Ft,n[1]*=Ft,n},e}function dg(t,e,n,r,i,o){if(n){var a=ct(e),s=ht(e),u=r*n;i==null?(i=e+r*Ot,o=e-u/2):(i=Ya(a,i),o=Ya(a,o),(r>0?i<o:i>o)&&(i+=r*Ot));for(var c,h=i;r>0?h>o:h<o;h-=u)c=Bi([a,-s*ct(h),-s*ht(h)]),t.point(c[0],c[1])}}function Ya(t,e){e=Xe(e),e[0]-=t,Hi(e);var n=lg(-e[1]);return((-e[2]<0?-n:n)+Ot-nt)%Ot}function Zu(){var t=[],e;return{point:function(n,r,i){e.push([n,r,i])},lineStart:function(){t.push(e=[])},lineEnd:Gt,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function hr(t,e){return ot(t[0]-e[0])<nt&&ot(t[1]-e[1])<nt}function qn(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Ku(t,e,n,r,i){var o=[],a=[],s,u;if(t.forEach(function(p){if(!((v=p.length-1)<=0)){var v,g=p[0],m=p[v],y;if(hr(g,m)){if(!g[2]&&!m[2]){for(i.lineStart(),s=0;s<v;++s)i.point((g=p[s])[0],g[1]);i.lineEnd();return}m[0]+=2*nt}o.push(y=new qn(g,p,null,!0)),a.push(y.o=new qn(g,null,y,!1)),o.push(y=new qn(m,p,null,!1)),a.push(y.o=new qn(m,null,y,!0))}}),!!o.length){for(a.sort(e),qa(o),qa(a),s=0,u=a.length;s<u;++s)a[s].e=n=!n;for(var c=o[0],h,l;;){for(var f=c,d=!0;f.v;)if((f=f.n)===c)return;h=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(s=0,u=h.length;s<u;++s)i.point((l=h[s])[0],l[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(d)for(h=f.p.z,s=h.length-1;s>=0;--s)i.point((l=h[s])[0],l[1]);else r(f.x,f.p.x,-1,i);f=f.p}f=f.o,h=f.z,d=!d}while(!f.v);i.lineEnd()}}}function qa(t){if(e=t.length){for(var e,n=0,r=t[0],i;++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function hi(t){return ot(t[0])<=j?t[0]:cg(t[0])*((ot(t[0])+j)%Ot-j)}function pg(t,e){var n=hi(e),r=e[1],i=ht(r),o=[ht(n),-ct(n),0],a=0,s=0,u=new Ce;i===1?r=Tt+nt:i===-1&&(r=-Tt-nt);for(var c=0,h=t.length;c<h;++c)if(f=(l=t[c]).length)for(var l,f,d=l[f-1],p=hi(d),v=d[1]/2+Pa,g=ht(v),m=ct(v),y=0;y<f;++y,p=C,g=S,m=T,d=E){var E=l[y],C=hi(E),M=E[1]/2+Pa,S=ht(M),T=ct(M),R=C-p,L=R>=0?1:-1,G=L*R,b=G>j,z=g*S;if(u.add(Rn(z*L*ht(G),m*T+z*ct(G))),a+=b?R+L*Ot:R,b^p>=n^C>=n){var F=Sr(Xe(d),Xe(E));Hi(F);var _=Sr(o,F);Hi(_);var w=(b^R>=0?-1:1)*Ln(_[2]);(r>w||r===w&&(F[0]||F[1]))&&(s+=b^R>=0?1:-1)}}return(a<-nt||a<nt&&u<-ag)^s&1}function Qu(t,e,n,r){return function(i){var o=e(i),a=Zu(),s=e(a),u=!1,c,h,l,f={point:d,lineStart:v,lineEnd:g,polygonStart:function(){f.point=m,f.lineStart=y,f.lineEnd=E,h=[],c=[]},polygonEnd:function(){f.point=d,f.lineStart=v,f.lineEnd=g,h=pu(h);var C=pg(c,r);h.length?(u||(i.polygonStart(),u=!0),Ku(h,mg,C,n,i)):C&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),h=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(C,M){t(C,M)&&i.point(C,M)}function p(C,M){o.point(C,M)}function v(){f.point=p,o.lineStart()}function g(){f.point=d,o.lineEnd()}function m(C,M){l.push([C,M]),s.point(C,M)}function y(){s.lineStart(),l=[]}function E(){m(l[0][0],l[0][1]),s.lineEnd();var C=s.clean(),M=a.result(),S,T=M.length,R,L,G;if(l.pop(),c.push(l),l=null,!!T){if(C&1){if(L=M[0],(R=L.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),S=0;S<R;++S)i.point((G=L[S])[0],G[1]);i.lineEnd()}return}T>1&&C&2&&M.push(M.pop().concat(M.shift())),h.push(M.filter(gg))}}return f}}function gg(t){return t.length>1}function mg(t,e){return((t=t.x)[0]<0?t[1]-Tt-nt:Tt-t[1])-((e=e.x)[0]<0?e[1]-Tt-nt:Tt-e[1])}const ja=Qu(function(){return!0},yg,_g,[-j,-Tt]);function yg(t){var e=NaN,n=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(o,a){var s=o>0?j:-j,u=ot(o-e);ot(u-j)<nt?(t.point(e,n=(n+a)/2>0?Tt:-Tt),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),t.point(o,n),i=0):r!==s&&u>=j&&(ot(e-r)<nt&&(e-=r*nt),ot(o-s)<nt&&(o-=s*nt),n=vg(e,n,o,a),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),i=0),t.point(e=o,n=a),r=s},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-i}}}function vg(t,e,n,r){var i,o,a=ht(t-n);return ot(a)>nt?Vu((ht(e)*(o=ct(r))*ht(n)-ht(r)*(i=ct(e))*ht(t))/(i*o*a)):(e+r)/2}function _g(t,e,n,r){var i;if(t==null)i=n*Tt,r.point(-j,i),r.point(0,i),r.point(j,i),r.point(j,0),r.point(j,-i),r.point(0,-i),r.point(-j,-i),r.point(-j,0),r.point(-j,i);else if(ot(t[0]-e[0])>nt){var o=t[0]<e[0]?j:-j;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function wg(t){var e=ct(t),n=6*ft,r=e>0,i=ot(e)>nt;function o(h,l,f,d){dg(d,t,n,f,h,l)}function a(h,l){return ct(h)*ct(l)>e}function s(h){var l,f,d,p,v;return{lineStart:function(){p=d=!1,v=1},point:function(g,m){var y=[g,m],E,C=a(g,m),M=r?C?0:c(g,m):C?c(g+(g<0?j:-j),m):0;if(!l&&(p=d=C)&&h.lineStart(),C!==d&&(E=u(l,y),(!E||hr(l,E)||hr(y,E))&&(y[2]=1)),C!==d)v=0,C?(h.lineStart(),E=u(y,l),h.point(E[0],E[1])):(E=u(l,y),h.point(E[0],E[1],2),h.lineEnd()),l=E;else if(i&&l&&r^C){var S;!(M&f)&&(S=u(y,l,!0))&&(v=0,r?(h.lineStart(),h.point(S[0][0],S[0][1]),h.point(S[1][0],S[1][1]),h.lineEnd()):(h.point(S[1][0],S[1][1]),h.lineEnd(),h.lineStart(),h.point(S[0][0],S[0][1],3)))}C&&(!l||!hr(l,y))&&h.point(y[0],y[1]),l=y,d=C,f=M},lineEnd:function(){d&&h.lineEnd(),l=null},clean:function(){return v|(p&&d)<<1}}}function u(h,l,f){var d=Xe(h),p=Xe(l),v=[1,0,0],g=Sr(d,p),m=Wn(g,g),y=g[0],E=m-y*y;if(!E)return!f&&h;var C=e*m/E,M=-e*y/E,S=Sr(v,g),T=Yn(v,C),R=Yn(g,M);ci(T,R);var L=S,G=Wn(T,L),b=Wn(L,L),z=G*G-b*(Wn(T,T)-1);if(!(z<0)){var F=Re(z),_=Yn(L,(-G-F)/b);if(ci(_,T),_=Bi(_),!f)return _;var w=h[0],x=l[0],A=h[1],I=l[1],k;x<w&&(k=w,w=x,x=k);var H=x-w,W=ot(H-j)<nt,V=W||H<nt;if(!W&&I<A&&(k=A,A=I,I=k),V?W?A+I>0^_[1]<(ot(_[0]-w)<nt?A:I):A<=_[1]&&_[1]<=I:H>j^(w<=_[0]&&_[0]<=x)){var at=Yn(L,(-G+F)/b);return ci(at,T),[_,Bi(at)]}}}function c(h,l){var f=r?t:j-t,d=0;return h<-f?d|=1:h>f&&(d|=2),l<-f?d|=4:l>f&&(d|=8),d}return Qu(a,s,o,r?[0,-t]:[-j,t-j])}function bg(t,e,n,r,i,o){var a=t[0],s=t[1],u=e[0],c=e[1],h=0,l=1,f=u-a,d=c-s,p;if(p=n-a,!(!f&&p>0)){if(p/=f,f<0){if(p<h)return;p<l&&(l=p)}else if(f>0){if(p>l)return;p>h&&(h=p)}if(p=i-a,!(!f&&p<0)){if(p/=f,f<0){if(p>l)return;p>h&&(h=p)}else if(f>0){if(p<h)return;p<l&&(l=p)}if(p=r-s,!(!d&&p>0)){if(p/=d,d<0){if(p<h)return;p<l&&(l=p)}else if(d>0){if(p>l)return;p>h&&(h=p)}if(p=o-s,!(!d&&p<0)){if(p/=d,d<0){if(p>l)return;p>h&&(h=p)}else if(d>0){if(p<h)return;p<l&&(l=p)}return h>0&&(t[0]=a+h*f,t[1]=s+h*d),l<1&&(e[0]=a+l*f,e[1]=s+l*d),!0}}}}}var vn=1e9,jn=-vn;function xg(t,e,n,r){function i(c,h){return t<=c&&c<=n&&e<=h&&h<=r}function o(c,h,l,f){var d=0,p=0;if(c==null||(d=a(c,l))!==(p=a(h,l))||u(c,h)<0^l>0)do f.point(d===0||d===3?t:n,d>1?r:e);while((d=(d+l+4)%4)!==p);else f.point(h[0],h[1])}function a(c,h){return ot(c[0]-t)<nt?h>0?0:3:ot(c[0]-n)<nt?h>0?2:1:ot(c[1]-e)<nt?h>0?1:0:h>0?3:2}function s(c,h){return u(c.x,h.x)}function u(c,h){var l=a(c,1),f=a(h,1);return l!==f?l-f:l===0?h[1]-c[1]:l===1?c[0]-h[0]:l===2?c[1]-h[1]:h[0]-c[0]}return function(c){var h=c,l=Zu(),f,d,p,v,g,m,y,E,C,M,S,T={point:R,lineStart:z,lineEnd:F,polygonStart:G,polygonEnd:b};function R(w,x){i(w,x)&&h.point(w,x)}function L(){for(var w=0,x=0,A=d.length;x<A;++x)for(var I=d[x],k=1,H=I.length,W=I[0],V,at,rt=W[0],lt=W[1];k<H;++k)V=rt,at=lt,W=I[k],rt=W[0],lt=W[1],at<=r?lt>r&&(rt-V)*(r-at)>(lt-at)*(t-V)&&++w:lt<=r&&(rt-V)*(r-at)<(lt-at)*(t-V)&&--w;return w}function G(){h=l,f=[],d=[],S=!0}function b(){var w=L(),x=S&&w,A=(f=pu(f)).length;(x||A)&&(c.polygonStart(),x&&(c.lineStart(),o(null,null,1,c),c.lineEnd()),A&&Ku(f,s,w,o,c),c.polygonEnd()),h=c,f=d=p=null}function z(){T.point=_,d&&d.push(p=[]),M=!0,C=!1,y=E=NaN}function F(){f&&(_(v,g),m&&C&&l.rejoin(),f.push(l.result())),T.point=R,C&&h.lineEnd()}function _(w,x){var A=i(w,x);if(d&&p.push([w,x]),M)v=w,g=x,m=A,M=!1,A&&(h.lineStart(),h.point(w,x));else if(A&&C)h.point(w,x);else{var I=[y=Math.max(jn,Math.min(vn,y)),E=Math.max(jn,Math.min(vn,E))],k=[w=Math.max(jn,Math.min(vn,w)),x=Math.max(jn,Math.min(vn,x))];bg(I,k,t,e,n,r)?(C||(h.lineStart(),h.point(I[0],I[1])),h.point(k[0],k[1]),A||h.lineEnd(),S=!1):A&&(h.lineStart(),h.point(w,x),S=!1)}y=w,E=x,C=A}return T}}const qi=t=>t;var li=new Ce,ji=new Ce,Ju,tc,Vi,Xi,me={point:Gt,lineStart:Gt,lineEnd:Gt,polygonStart:function(){me.lineStart=Eg,me.lineEnd=Cg},polygonEnd:function(){me.lineStart=me.lineEnd=me.point=Gt,li.add(ot(ji)),ji=new Ce},result:function(){var t=li/2;return li=new Ce,t}};function Eg(){me.point=Sg}function Sg(t,e){me.point=ec,Ju=Vi=t,tc=Xi=e}function ec(t,e){ji.add(Xi*t-Vi*e),Vi=t,Xi=e}function Cg(){ec(Ju,tc)}const Va=me;var Ze=1/0,Cr=Ze,$n=-Ze,Mr=$n,Mg={point:Ag,lineStart:Gt,lineEnd:Gt,polygonStart:Gt,polygonEnd:Gt,result:function(){var t=[[Ze,Cr],[$n,Mr]];return $n=Mr=-(Cr=Ze=1/0),t}};function Ag(t,e){t<Ze&&(Ze=t),t>$n&&($n=t),e<Cr&&(Cr=e),e>Mr&&(Mr=e)}const Ar=Mg;var Zi=0,Ki=0,_n=0,Tr=0,Nr=0,ze=0,Qi=0,Ji=0,wn=0,nc,rc,Qt,Jt,Vt={point:Te,lineStart:Xa,lineEnd:Za,polygonStart:function(){Vt.lineStart=Dg,Vt.lineEnd=Rg},polygonEnd:function(){Vt.point=Te,Vt.lineStart=Xa,Vt.lineEnd=Za},result:function(){var t=wn?[Qi/wn,Ji/wn]:ze?[Tr/ze,Nr/ze]:_n?[Zi/_n,Ki/_n]:[NaN,NaN];return Zi=Ki=_n=Tr=Nr=ze=Qi=Ji=wn=0,t}};function Te(t,e){Zi+=t,Ki+=e,++_n}function Xa(){Vt.point=Tg}function Tg(t,e){Vt.point=Ng,Te(Qt=t,Jt=e)}function Ng(t,e){var n=t-Qt,r=e-Jt,i=Re(n*n+r*r);Tr+=i*(Qt+t)/2,Nr+=i*(Jt+e)/2,ze+=i,Te(Qt=t,Jt=e)}function Za(){Vt.point=Te}function Dg(){Vt.point=Lg}function Rg(){ic(nc,rc)}function Lg(t,e){Vt.point=ic,Te(nc=Qt=t,rc=Jt=e)}function ic(t,e){var n=t-Qt,r=e-Jt,i=Re(n*n+r*r);Tr+=i*(Qt+t)/2,Nr+=i*(Jt+e)/2,ze+=i,i=Jt*t-Qt*e,Qi+=i*(Qt+t),Ji+=i*(Jt+e),wn+=i*3,Te(Qt=t,Jt=e)}const Ka=Vt;function oc(t){this._context=t}oc.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Ot);break}}},result:Gt};var to=new Ce,fi,ac,sc,bn,xn,Dr={point:Gt,lineStart:function(){Dr.point=$g},lineEnd:function(){fi&&uc(ac,sc),Dr.point=Gt},polygonStart:function(){fi=!0},polygonEnd:function(){fi=null},result:function(){var t=+to;return to=new Ce,t}};function $g(t,e){Dr.point=uc,ac=bn=t,sc=xn=e}function uc(t,e){bn-=t,xn-=e,to.add(Re(bn*bn+xn*xn)),bn=t,xn=e}const Qa=Dr;let Ja,Rr,ts,es;class ns{constructor(e){this._append=e==null?cc:Fg(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==ts||this._append!==Rr){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,ts=r,Rr=this._append,es=this._,this._=i}this._+=es;break}}}result(){const e=this._;return this._="",e.length?e:null}}function cc(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Fg(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return cc;if(e!==Ja){const n=10**e;Ja=e,Rr=function(i){let o=1;this._+=i[0];for(const a=i.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return Rr}function Og(t,e){let n=3,r=4.5,i,o;function a(s){return s&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),Ge(s,i(o))),o.result()}return a.area=function(s){return Ge(s,i(Va)),Va.result()},a.measure=function(s){return Ge(s,i(Qa)),Qa.result()},a.bounds=function(s){return Ge(s,i(Ar)),Ar.result()},a.centroid=function(s){return Ge(s,i(Ka)),Ka.result()},a.projection=function(s){return arguments.length?(i=s==null?(t=null,qi):(t=s).stream,a):t},a.context=function(s){return arguments.length?(o=s==null?(e=null,new ns(n)):new oc(e=s),typeof r!="function"&&o.pointRadius(r),a):e},a.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(o.pointRadius(+s),+s),a):r},a.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{const u=Math.floor(s);if(!(u>=0))throw new RangeError(`invalid digits: ${s}`);n=u}return e===null&&(o=new ns(n)),a},a.projection(t).digits(n).context(e)}function Ro(t){return function(e){var n=new eo;for(var r in t)n[r]=t[r];return n.stream=e,n}}function eo(){}eo.prototype={constructor:eo,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Lo(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),Ge(n,t.stream(Ar)),e(Ar.result()),r!=null&&t.clipExtent(r),t}function hc(t,e,n){return Lo(t,function(r){var i=e[1][0]-e[0][0],o=e[1][1]-e[0][1],a=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),s=+e[0][0]+(i-a*(r[1][0]+r[0][0]))/2,u=+e[0][1]+(o-a*(r[1][1]+r[0][1]))/2;t.scale(150*a).translate([s,u])},n)}function Ig(t,e,n){return hc(t,[[0,0],e],n)}function kg(t,e,n){return Lo(t,function(r){var i=+e,o=i/(r[1][0]-r[0][0]),a=(i-o*(r[1][0]+r[0][0]))/2,s=-o*r[0][1];t.scale(150*o).translate([a,s])},n)}function Pg(t,e,n){return Lo(t,function(r){var i=+e,o=i/(r[1][1]-r[0][1]),a=-o*r[0][0],s=(i-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([a,s])},n)}var rs=16,Gg=ct(30*ft);function is(t,e){return+e?Ug(t,e):zg(t)}function zg(t){return Ro({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function Ug(t,e){function n(r,i,o,a,s,u,c,h,l,f,d,p,v,g){var m=c-r,y=h-i,E=m*m+y*y;if(E>4*e&&v--){var C=a+f,M=s+d,S=u+p,T=Re(C*C+M*M+S*S),R=Ln(S/=T),L=ot(ot(S)-1)<nt||ot(o-l)<nt?(o+l)/2:Rn(M,C),G=t(L,R),b=G[0],z=G[1],F=b-r,_=z-i,w=y*F-m*_;(w*w/E>e||ot((m*F+y*_)/E-.5)>.3||a*f+s*d+u*p<Gg)&&(n(r,i,o,a,s,u,b,z,L,C/=T,M/=T,S,v,g),g.point(b,z),n(b,z,L,C,M,S,c,h,l,f,d,p,v,g))}}return function(r){var i,o,a,s,u,c,h,l,f,d,p,v,g={point:m,lineStart:y,lineEnd:C,polygonStart:function(){r.polygonStart(),g.lineStart=M},polygonEnd:function(){r.polygonEnd(),g.lineStart=y}};function m(R,L){R=t(R,L),r.point(R[0],R[1])}function y(){l=NaN,g.point=E,r.lineStart()}function E(R,L){var G=Xe([R,L]),b=t(R,L);n(l,f,h,d,p,v,l=b[0],f=b[1],h=R,d=G[0],p=G[1],v=G[2],rs,r),r.point(l,f)}function C(){g.point=m,r.lineEnd()}function M(){y(),g.point=S,g.lineEnd=T}function S(R,L){E(i=R,L),o=l,a=f,s=d,u=p,c=v,g.point=E}function T(){n(l,f,h,d,p,v,o,a,i,s,u,c,rs,r),g.lineEnd=C,C()}return g}}var Bg=Ro({point:function(t,e){this.stream.point(t*ft,e*ft)}});function Hg(t){return Ro({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function Wg(t,e,n,r,i){function o(a,s){return a*=r,s*=i,[e+t*a,n-t*s]}return o.invert=function(a,s){return[(a-e)/t*r,(n-s)/t*i]},o}function os(t,e,n,r,i,o){if(!o)return Wg(t,e,n,r,i);var a=ct(o),s=ht(o),u=a*t,c=s*t,h=a/t,l=s/t,f=(s*n-a*e)/t,d=(s*e+a*n)/t;function p(v,g){return v*=r,g*=i,[u*v-c*g+e,n-c*v-u*g]}return p.invert=function(v,g){return[r*(h*v-l*g+f),i*(d-l*v-h*g)]},p}function Yg(t){return qg(function(){return t})()}function qg(t){var e,n=150,r=480,i=250,o=0,a=0,s=0,u=0,c=0,h,l=0,f=1,d=1,p=null,v=ja,g=null,m,y,E,C=qi,M=.5,S,T,R,L,G;function b(w){return R(w[0]*ft,w[1]*ft)}function z(w){return w=R.invert(w[0],w[1]),w&&[w[0]*Ft,w[1]*Ft]}b.stream=function(w){return L&&G===w?L:L=Bg(Hg(h)(v(S(C(G=w)))))},b.preclip=function(w){return arguments.length?(v=w,p=void 0,_()):v},b.postclip=function(w){return arguments.length?(C=w,g=m=y=E=null,_()):C},b.clipAngle=function(w){return arguments.length?(v=+w?wg(p=w*ft):(p=null,ja),_()):p*Ft},b.clipExtent=function(w){return arguments.length?(C=w==null?(g=m=y=E=null,qi):xg(g=+w[0][0],m=+w[0][1],y=+w[1][0],E=+w[1][1]),_()):g==null?null:[[g,m],[y,E]]},b.scale=function(w){return arguments.length?(n=+w,F()):n},b.translate=function(w){return arguments.length?(r=+w[0],i=+w[1],F()):[r,i]},b.center=function(w){return arguments.length?(o=w[0]%360*ft,a=w[1]%360*ft,F()):[o*Ft,a*Ft]},b.rotate=function(w){return arguments.length?(s=w[0]%360*ft,u=w[1]%360*ft,c=w.length>2?w[2]%360*ft:0,F()):[s*Ft,u*Ft,c*Ft]},b.angle=function(w){return arguments.length?(l=w%360*ft,F()):l*Ft},b.reflectX=function(w){return arguments.length?(f=w?-1:1,F()):f<0},b.reflectY=function(w){return arguments.length?(d=w?-1:1,F()):d<0},b.precision=function(w){return arguments.length?(S=is(T,M=w*w),_()):Re(M)},b.fitExtent=function(w,x){return hc(b,w,x)},b.fitSize=function(w,x){return Ig(b,w,x)},b.fitWidth=function(w,x){return kg(b,w,x)},b.fitHeight=function(w,x){return Pg(b,w,x)};function F(){var w=os(n,0,0,f,d,l).apply(null,e(o,a)),x=os(n,r-w[0],i-w[1],f,d,l);return h=Xu(s,u,c),T=Wi(e,x),R=Wi(h,T),S=is(T,M),_()}function _(){return L=G=null,b}return function(){return e=t.apply(this,arguments),b.invert=e.invert&&z,F()}}function $o(t,e){return[t,ug(hg((Tt+e)/2))]}$o.invert=function(t,e){return[t,2*Vu(sg(e))-Tt]};function jg(){return Vg($o).scale(961/Ot)}function Vg(t){var e=Yg(t),n=e.center,r=e.scale,i=e.translate,o=e.clipExtent,a=null,s,u,c;e.scale=function(l){return arguments.length?(r(l),h()):r()},e.translate=function(l){return arguments.length?(i(l),h()):i()},e.center=function(l){return arguments.length?(n(l),h()):n()},e.clipExtent=function(l){return arguments.length?(l==null?a=s=u=c=null:(a=+l[0][0],s=+l[0][1],u=+l[1][0],c=+l[1][1]),h()):a==null?null:[[a,s],[u,c]]};function h(){var l=j*r(),f=e(fg(e.rotate()).invert([0,0]));return o(a==null?[[f[0]-l,f[1]-l],[f[0]+l,f[1]+l]]:t===$o?[[Math.max(f[0]-l,a),s],[Math.min(f[0]+l,u),c]]:[[a,Math.max(f[1]-l,s)],[u,Math.min(f[1]+l,c)]])}return h()}function Xg(t,e){return t.parent===e.parent?1:2}function Zg(t){return t.reduce(Kg,0)/t.length}function Kg(t,e){return t+e.x}function Qg(t){return 1+t.reduce(Jg,0)}function Jg(t,e){return Math.max(t,e.y)}function tm(t){for(var e;e=t.children;)t=e[0];return t}function em(t){for(var e;e=t.children;)t=e[e.length-1];return t}function nm(){var t=Xg,e=1,n=1,r=!1;function i(o){var a,s=0;o.eachAfter(function(f){var d=f.children;d?(f.x=Zg(d),f.y=Qg(d)):(f.x=a?s+=t(f,a):0,f.y=0,a=f)});var u=tm(o),c=em(o),h=u.x-t(u,c)/2,l=c.x+t(c,u)/2;return o.eachAfter(r?function(f){f.x=(f.x-o.x)*e,f.y=(o.y-f.y)*n}:function(f){f.x=(f.x-h)/(l-h)*e,f.y=(1-(o.y?f.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(t=o,i):t},i.size=function(o){return arguments.length?(r=!1,e=+o[0],n=+o[1],i):r?null:[e,n]},i.nodeSize=function(o){return arguments.length?(r=!0,e=+o[0],n=+o[1],i):r?[e,n]:null},i}function rm(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function im(){return this.eachAfter(rm)}function om(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function am(t,e){for(var n=this,r=[n],i,o,a=-1;n=r.pop();)if(t.call(e,n,++a,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function sm(t,e){for(var n=this,r=[n],i=[],o,a,s,u=-1;n=r.pop();)if(i.push(n),o=n.children)for(a=0,s=o.length;a<s;++a)r.push(o[a]);for(;n=i.pop();)t.call(e,n,++u,this);return this}function um(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function cm(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function hm(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function lm(t){for(var e=this,n=fm(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function fm(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function dm(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function pm(){return Array.from(this)}function gm(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function mm(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*ym(){var t=this,e,n=[t],r,i,o;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function Wr(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=wm)):e===void 0&&(e=_m);for(var n=new Lr(t),r,i=[n],o,a,s,u;r=i.pop();)if((a=e(r.data))&&(u=(a=Array.from(a)).length))for(r.children=a,s=u-1;s>=0;--s)i.push(o=a[s]=new Lr(a[s])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(xm)}function vm(){return Wr(this).eachBefore(bm)}function _m(t){return t.children}function wm(t){return Array.isArray(t)?t[1]:null}function bm(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function xm(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Lr(t){this.data=t,this.depth=this.height=0,this.parent=null}Lr.prototype=Wr.prototype={constructor:Lr,count:im,each:om,eachAfter:sm,eachBefore:am,find:um,sum:cm,sort:hm,path:lm,ancestors:dm,descendants:pm,leaves:gm,links:mm,copy:vm,[Symbol.iterator]:ym};function Em(t){return t==null?null:Sm(t)}function Sm(t){if(typeof t!="function")throw new Error;return t}function as(){return 0}function Cm(t){return function(){return t}}const Mm=1664525,Am=1013904223,ss=4294967296;function Tm(){let t=1;return()=>(t=(Mm*t+Am)%ss)/ss}function Nm(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Dm(t,e){let n=t.length,r,i;for(;n;)i=e()*n--|0,r=t[n],t[n]=t[i],t[i]=r;return t}function Rm(t,e){for(var n=0,r=(t=Dm(Array.from(t),e)).length,i=[],o,a;n<r;)o=t[n],a&&lc(a,o)?++n:(a=$m(i=Lm(i,o)),n=0);return a}function Lm(t,e){var n,r;if(di(e,t))return[e];for(n=0;n<t.length;++n)if(Vn(e,t[n])&&di(En(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(Vn(En(t[n],t[r]),e)&&Vn(En(t[n],e),t[r])&&Vn(En(t[r],e),t[n])&&di(fc(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function Vn(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function lc(t,e){var n=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function di(t,e){for(var n=0;n<e.length;++n)if(!lc(t,e[n]))return!1;return!0}function $m(t){switch(t.length){case 1:return Fm(t[0]);case 2:return En(t[0],t[1]);case 3:return fc(t[0],t[1],t[2])}}function Fm(t){return{x:t.x,y:t.y,r:t.r}}function En(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,s=e.r,u=o-n,c=a-r,h=s-i,l=Math.sqrt(u*u+c*c);return{x:(n+o+u/l*h)/2,y:(r+a+c/l*h)/2,r:(l+i+s)/2}}function fc(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,s=e.y,u=e.r,c=n.x,h=n.y,l=n.r,f=r-a,d=r-c,p=i-s,v=i-h,g=u-o,m=l-o,y=r*r+i*i-o*o,E=y-a*a-s*s+u*u,C=y-c*c-h*h+l*l,M=d*p-f*v,S=(p*C-v*E)/(M*2)-r,T=(v*g-p*m)/M,R=(d*E-f*C)/(M*2)-i,L=(f*m-d*g)/M,G=T*T+L*L-1,b=2*(o+S*T+R*L),z=S*S+R*R-o*o,F=-(Math.abs(G)>1e-6?(b+Math.sqrt(b*b-4*G*z))/(2*G):z/b);return{x:r+S+T*F,y:i+R+L*F,r:F}}function us(t,e,n){var r=t.x-e.x,i,o,a=t.y-e.y,s,u,c=r*r+a*a;c?(o=e.r+n.r,o*=o,u=t.r+n.r,u*=u,o>u?(i=(c+u-o)/(2*c),s=Math.sqrt(Math.max(0,u/c-i*i)),n.x=t.x-i*r-s*a,n.y=t.y-i*a+s*r):(i=(c+o-u)/(2*c),s=Math.sqrt(Math.max(0,o/c-i*i)),n.x=e.x+i*r-s*a,n.y=e.y+i*a+s*r)):(n.x=e.x+n.r,n.y=e.y)}function cs(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function hs(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function Xn(t){this._=t,this.next=null,this.previous=null}function Om(t,e){if(!(o=(t=Nm(t)).length))return 0;var n,r,i,o,a,s,u,c,h,l,f;if(n=t[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=t[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;us(r,n,i=t[2]),n=new Xn(n),r=new Xn(r),i=new Xn(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;t:for(u=3;u<o;++u){us(n._,r._,i=t[u]),i=new Xn(i),c=r.next,h=n.previous,l=r._.r,f=n._.r;do if(l<=f){if(cs(c._,i._)){r=c,n.next=r,r.previous=n,--u;continue t}l+=c._.r,c=c.next}else{if(cs(h._,i._)){n=h,n.next=r,r.previous=n,--u;continue t}f+=h._.r,h=h.previous}while(c!==h.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=hs(n);(i=i.next)!==r;)(s=hs(i))<a&&(n=i,a=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Rm(n,e),u=0;u<o;++u)n=t[u],n.x-=i.x,n.y-=i.y;return i.r}function Im(t){return Math.sqrt(t.value)}function km(){var t=null,e=1,n=1,r=as;function i(o){const a=Tm();return o.x=e/2,o.y=n/2,t?o.eachBefore(ls(t)).eachAfter(pi(r,.5,a)).eachBefore(fs(1)):o.eachBefore(ls(Im)).eachAfter(pi(as,1,a)).eachAfter(pi(r,o.r/Math.min(e,n),a)).eachBefore(fs(Math.min(e,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(t=Em(o),i):t},i.size=function(o){return arguments.length?(e=+o[0],n=+o[1],i):[e,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:Cm(+o),i):r},i}function ls(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function pi(t,e,n){return function(r){if(i=r.children){var i,o,a=i.length,s=t(r)*e||0,u;if(s)for(o=0;o<a;++o)i[o].r+=s;if(u=Om(i,n),s)for(o=0;o<a;++o)i[o].r-=s;r.r=u+s}}}function fs(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function Fo(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Pm(t){return function(){return t}}function Gm(t){return+t}var ds=[0,1];function te(t){return t}function no(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Pm(isNaN(e)?NaN:.5)}function zm(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Um(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=no(i,r),o=n(a,o)):(r=no(r,i),o=n(o,a)),function(s){return o(r(s))}}function Bm(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=no(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(s){var u=Vh(t,s,1,r)-1;return o[u](i[u](s))}}function Oo(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function dc(){var t=ds,e=ds,n=Co,r,i,o,a=te,s,u,c;function h(){var f=Math.min(t.length,e.length);return a!==te&&(a=zm(t[0],t[f-1])),s=f>2?Bm:Um,u=c=null,l}function l(f){return f==null||isNaN(f=+f)?o:(u||(u=s(t.map(r),e,n)))(r(a(f)))}return l.invert=function(f){return a(i((c||(c=s(e,t.map(r),qt)))(f)))},l.domain=function(f){return arguments.length?(t=Array.from(f,Gm),h()):t.slice()},l.range=function(f){return arguments.length?(e=Array.from(f),h()):e.slice()},l.rangeRound=function(f){return e=Array.from(f),n=vd,h()},l.clamp=function(f){return arguments.length?(a=f?!0:te,h()):a!==te},l.interpolate=function(f){return arguments.length?(n=f,h()):n},l.unknown=function(f){return arguments.length?(o=f,l):o},function(f,d){return r=f,i=d,h()}}function pc(){return dc()(te,te)}function Hm(t,e,n,r){var i=Ti(t,e,n),o;switch(r=xr(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=ig(i,a))&&(r.precision=o),ju(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=og(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=rg(i))&&(r.precision=o-(r.type==="%")*2);break}}return qu(r)}function gc(t){var e=t.domain;return t.ticks=function(n){var r=e();return il(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Hm(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],s=r[o],u,c,h=10;for(s<a&&(c=a,a=s,s=c,c=i,i=o,o=c);h-- >0;){if(c=Ai(a,s,n),c===u)return r[i]=a,r[o]=s,e(r);if(c>0)a=Math.floor(a/c)*c,s=Math.ceil(s/c)*c;else if(c<0)a=Math.ceil(a*c)/c,s=Math.floor(s*c)/c;else break;u=c}return t},t}function Yr(){var t=pc();return t.copy=function(){return Oo(t,Yr())},Fo.apply(t,arguments),gc(t)}function Wm(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}function ps(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Ym(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function qm(t){return t<0?-t*t:t*t}function jm(t){var e=t(te,te),n=1;function r(){return n===1?t(te,te):n===.5?t(Ym,qm):t(ps(n),ps(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},gc(e)}function mc(){var t=jm(dc());return t.copy=function(){return Oo(t,mc()).exponent(t.exponent())},Fo.apply(t,arguments),t}function Vm(){return mc.apply(null,arguments).exponent(.5)}const gi=new Date,mi=new Date;function pt(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const u=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return u;let c;do u.push(c=new Date(+o)),e(o,s),t(o);while(c<o&&o<a);return u},i.filter=o=>pt(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;e(a,-1),!o(a););else for(;--s>=0;)for(;e(a,1),!o(a););}),n&&(i.count=(o,a)=>(gi.setTime(+o),mi.setTime(+a),t(gi),t(mi),Math.floor(n(gi,mi))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const $r=pt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);$r.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?pt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):$r);$r.range;const se=1e3,zt=se*60,ue=zt*60,fe=ue*24,Io=fe*7,gs=fe*30,yi=fe*365,Ue=pt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*se)},(t,e)=>(e-t)/se,t=>t.getUTCSeconds());Ue.range;const ko=pt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*se)},(t,e)=>{t.setTime(+t+e*zt)},(t,e)=>(e-t)/zt,t=>t.getMinutes());ko.range;const Xm=pt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*zt)},(t,e)=>(e-t)/zt,t=>t.getUTCMinutes());Xm.range;const Po=pt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*se-t.getMinutes()*zt)},(t,e)=>{t.setTime(+t+e*ue)},(t,e)=>(e-t)/ue,t=>t.getHours());Po.range;const Zm=pt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ue)},(t,e)=>(e-t)/ue,t=>t.getUTCHours());Zm.range;const kn=pt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*zt)/fe,t=>t.getDate()-1);kn.range;const Go=pt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/fe,t=>t.getUTCDate()-1);Go.range;const Km=pt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/fe,t=>Math.floor(t/fe));Km.range;function Le(t){return pt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*zt)/Io)}const qr=Le(0),Fr=Le(1),Qm=Le(2),Jm=Le(3),Ke=Le(4),ty=Le(5),ey=Le(6);qr.range;Fr.range;Qm.range;Jm.range;Ke.range;ty.range;ey.range;function $e(t){return pt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Io)}const yc=$e(0),Or=$e(1),ny=$e(2),ry=$e(3),Qe=$e(4),iy=$e(5),oy=$e(6);yc.range;Or.range;ny.range;ry.range;Qe.range;iy.range;oy.range;const zo=pt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());zo.range;const ay=pt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());ay.range;const de=pt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());de.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:pt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});de.range;const Ne=pt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ne.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:pt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ne.range;function sy(t,e,n,r,i,o){const a=[[Ue,1,se],[Ue,5,5*se],[Ue,15,15*se],[Ue,30,30*se],[o,1,zt],[o,5,5*zt],[o,15,15*zt],[o,30,30*zt],[i,1,ue],[i,3,3*ue],[i,6,6*ue],[i,12,12*ue],[r,1,fe],[r,2,2*fe],[n,1,Io],[e,1,gs],[e,3,3*gs],[t,1,yi]];function s(c,h,l){const f=h<c;f&&([c,h]=[h,c]);const d=l&&typeof l.range=="function"?l:u(c,h,l),p=d?d.range(c,+h+1):[];return f?p.reverse():p}function u(c,h,l){const f=Math.abs(h-c)/l,d=yo(([,,g])=>g).right(a,f);if(d===a.length)return t.every(Ti(c/yi,h/yi,l));if(d===0)return $r.every(Math.max(Ti(c,h,l),1));const[p,v]=a[f/a[d-1][2]<a[d][2]/f?d-1:d];return p.every(v)}return[s,u]}const[uy,cy]=sy(de,zo,qr,kn,Po,ko);function vi(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function _i(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function un(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function hy(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,c=cn(i),h=hn(i),l=cn(o),f=hn(o),d=cn(a),p=hn(a),v=cn(s),g=hn(s),m=cn(u),y=hn(u),E={a:A,A:I,b:k,B:H,c:null,d:bs,e:bs,f:$y,g:Hy,G:Yy,H:Dy,I:Ry,j:Ly,L:vc,m:Fy,M:Oy,p:W,q:V,Q:Ss,s:Cs,S:Iy,u:ky,U:Py,V:Gy,w:zy,W:Uy,x:null,X:null,y:By,Y:Wy,Z:qy,"%":Es},C={a:at,A:rt,b:lt,B:Ht,c:null,d:xs,e:xs,f:Zy,g:av,G:uv,H:jy,I:Vy,j:Xy,L:wc,m:Ky,M:Qy,p:Rt,q:Wt,Q:Ss,s:Cs,S:Jy,u:tv,U:ev,V:nv,w:rv,W:iv,x:null,X:null,y:ov,Y:sv,Z:cv,"%":Es},M={a:G,A:b,b:z,B:F,c:_,d:_s,e:_s,f:My,g:vs,G:ys,H:ws,I:ws,j:xy,L:Cy,m:by,M:Ey,p:L,q:wy,Q:Ty,s:Ny,S:Sy,u:gy,U:my,V:yy,w:py,W:vy,x:w,X:x,y:vs,Y:ys,Z:_y,"%":Ay};E.x=S(n,E),E.X=S(r,E),E.c=S(e,E),C.x=S(n,C),C.X=S(r,C),C.c=S(e,C);function S(P,Y){return function(X){var N=[],St=-1,tt=0,Lt=P.length,$t,_e,aa;for(X instanceof Date||(X=new Date(+X));++St<Lt;)P.charCodeAt(St)===37&&(N.push(P.slice(tt,St)),(_e=ms[$t=P.charAt(++St)])!=null?$t=P.charAt(++St):_e=$t==="e"?" ":"0",(aa=Y[$t])&&($t=aa(X,_e)),N.push($t),tt=St+1);return N.push(P.slice(tt,St)),N.join("")}}function T(P,Y){return function(X){var N=un(1900,void 0,1),St=R(N,P,X+="",0),tt,Lt;if(St!=X.length)return null;if("Q"in N)return new Date(N.Q);if("s"in N)return new Date(N.s*1e3+("L"in N?N.L:0));if(Y&&!("Z"in N)&&(N.Z=0),"p"in N&&(N.H=N.H%12+N.p*12),N.m===void 0&&(N.m="q"in N?N.q:0),"V"in N){if(N.V<1||N.V>53)return null;"w"in N||(N.w=1),"Z"in N?(tt=_i(un(N.y,0,1)),Lt=tt.getUTCDay(),tt=Lt>4||Lt===0?Or.ceil(tt):Or(tt),tt=Go.offset(tt,(N.V-1)*7),N.y=tt.getUTCFullYear(),N.m=tt.getUTCMonth(),N.d=tt.getUTCDate()+(N.w+6)%7):(tt=vi(un(N.y,0,1)),Lt=tt.getDay(),tt=Lt>4||Lt===0?Fr.ceil(tt):Fr(tt),tt=kn.offset(tt,(N.V-1)*7),N.y=tt.getFullYear(),N.m=tt.getMonth(),N.d=tt.getDate()+(N.w+6)%7)}else("W"in N||"U"in N)&&("w"in N||(N.w="u"in N?N.u%7:"W"in N?1:0),Lt="Z"in N?_i(un(N.y,0,1)).getUTCDay():vi(un(N.y,0,1)).getDay(),N.m=0,N.d="W"in N?(N.w+6)%7+N.W*7-(Lt+5)%7:N.w+N.U*7-(Lt+6)%7);return"Z"in N?(N.H+=N.Z/100|0,N.M+=N.Z%100,_i(N)):vi(N)}}function R(P,Y,X,N){for(var St=0,tt=Y.length,Lt=X.length,$t,_e;St<tt;){if(N>=Lt)return-1;if($t=Y.charCodeAt(St++),$t===37){if($t=Y.charAt(St++),_e=M[$t in ms?Y.charAt(St++):$t],!_e||(N=_e(P,X,N))<0)return-1}else if($t!=X.charCodeAt(N++))return-1}return N}function L(P,Y,X){var N=c.exec(Y.slice(X));return N?(P.p=h.get(N[0].toLowerCase()),X+N[0].length):-1}function G(P,Y,X){var N=d.exec(Y.slice(X));return N?(P.w=p.get(N[0].toLowerCase()),X+N[0].length):-1}function b(P,Y,X){var N=l.exec(Y.slice(X));return N?(P.w=f.get(N[0].toLowerCase()),X+N[0].length):-1}function z(P,Y,X){var N=m.exec(Y.slice(X));return N?(P.m=y.get(N[0].toLowerCase()),X+N[0].length):-1}function F(P,Y,X){var N=v.exec(Y.slice(X));return N?(P.m=g.get(N[0].toLowerCase()),X+N[0].length):-1}function _(P,Y,X){return R(P,e,Y,X)}function w(P,Y,X){return R(P,n,Y,X)}function x(P,Y,X){return R(P,r,Y,X)}function A(P){return a[P.getDay()]}function I(P){return o[P.getDay()]}function k(P){return u[P.getMonth()]}function H(P){return s[P.getMonth()]}function W(P){return i[+(P.getHours()>=12)]}function V(P){return 1+~~(P.getMonth()/3)}function at(P){return a[P.getUTCDay()]}function rt(P){return o[P.getUTCDay()]}function lt(P){return u[P.getUTCMonth()]}function Ht(P){return s[P.getUTCMonth()]}function Rt(P){return i[+(P.getUTCHours()>=12)]}function Wt(P){return 1+~~(P.getUTCMonth()/3)}return{format:function(P){var Y=S(P+="",E);return Y.toString=function(){return P},Y},parse:function(P){var Y=T(P+="",!1);return Y.toString=function(){return P},Y},utcFormat:function(P){var Y=S(P+="",C);return Y.toString=function(){return P},Y},utcParse:function(P){var Y=T(P+="",!0);return Y.toString=function(){return P},Y}}}var ms={"-":"",_:" ",0:"0"},gt=/^\s*\d+/,ly=/^%/,fy=/[\\^$*+?|[\]().{}]/g;function Z(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function dy(t){return t.replace(fy,"\\$&")}function cn(t){return new RegExp("^(?:"+t.map(dy).join("|")+")","i")}function hn(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function py(t,e,n){var r=gt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function gy(t,e,n){var r=gt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function my(t,e,n){var r=gt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function yy(t,e,n){var r=gt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function vy(t,e,n){var r=gt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function ys(t,e,n){var r=gt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function vs(t,e,n){var r=gt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function _y(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function wy(t,e,n){var r=gt.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function by(t,e,n){var r=gt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function _s(t,e,n){var r=gt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function xy(t,e,n){var r=gt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function ws(t,e,n){var r=gt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Ey(t,e,n){var r=gt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Sy(t,e,n){var r=gt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Cy(t,e,n){var r=gt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function My(t,e,n){var r=gt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Ay(t,e,n){var r=ly.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Ty(t,e,n){var r=gt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Ny(t,e,n){var r=gt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function bs(t,e){return Z(t.getDate(),e,2)}function Dy(t,e){return Z(t.getHours(),e,2)}function Ry(t,e){return Z(t.getHours()%12||12,e,2)}function Ly(t,e){return Z(1+kn.count(de(t),t),e,3)}function vc(t,e){return Z(t.getMilliseconds(),e,3)}function $y(t,e){return vc(t,e)+"000"}function Fy(t,e){return Z(t.getMonth()+1,e,2)}function Oy(t,e){return Z(t.getMinutes(),e,2)}function Iy(t,e){return Z(t.getSeconds(),e,2)}function ky(t){var e=t.getDay();return e===0?7:e}function Py(t,e){return Z(qr.count(de(t)-1,t),e,2)}function _c(t){var e=t.getDay();return e>=4||e===0?Ke(t):Ke.ceil(t)}function Gy(t,e){return t=_c(t),Z(Ke.count(de(t),t)+(de(t).getDay()===4),e,2)}function zy(t){return t.getDay()}function Uy(t,e){return Z(Fr.count(de(t)-1,t),e,2)}function By(t,e){return Z(t.getFullYear()%100,e,2)}function Hy(t,e){return t=_c(t),Z(t.getFullYear()%100,e,2)}function Wy(t,e){return Z(t.getFullYear()%1e4,e,4)}function Yy(t,e){var n=t.getDay();return t=n>=4||n===0?Ke(t):Ke.ceil(t),Z(t.getFullYear()%1e4,e,4)}function qy(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Z(e/60|0,"0",2)+Z(e%60,"0",2)}function xs(t,e){return Z(t.getUTCDate(),e,2)}function jy(t,e){return Z(t.getUTCHours(),e,2)}function Vy(t,e){return Z(t.getUTCHours()%12||12,e,2)}function Xy(t,e){return Z(1+Go.count(Ne(t),t),e,3)}function wc(t,e){return Z(t.getUTCMilliseconds(),e,3)}function Zy(t,e){return wc(t,e)+"000"}function Ky(t,e){return Z(t.getUTCMonth()+1,e,2)}function Qy(t,e){return Z(t.getUTCMinutes(),e,2)}function Jy(t,e){return Z(t.getUTCSeconds(),e,2)}function tv(t){var e=t.getUTCDay();return e===0?7:e}function ev(t,e){return Z(yc.count(Ne(t)-1,t),e,2)}function bc(t){var e=t.getUTCDay();return e>=4||e===0?Qe(t):Qe.ceil(t)}function nv(t,e){return t=bc(t),Z(Qe.count(Ne(t),t)+(Ne(t).getUTCDay()===4),e,2)}function rv(t){return t.getUTCDay()}function iv(t,e){return Z(Or.count(Ne(t)-1,t),e,2)}function ov(t,e){return Z(t.getUTCFullYear()%100,e,2)}function av(t,e){return t=bc(t),Z(t.getUTCFullYear()%100,e,2)}function sv(t,e){return Z(t.getUTCFullYear()%1e4,e,4)}function uv(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Qe(t):Qe.ceil(t),Z(t.getUTCFullYear()%1e4,e,4)}function cv(){return"+0000"}function Es(){return"%"}function Ss(t){return+t}function Cs(t){return Math.floor(+t/1e3)}var Fe,Ir,xc;hv({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function hv(t){return Fe=hy(t),Ir=Fe.format,xc=Fe.parse,Fe.utcFormat,Fe.utcParse,Fe}function lv(t){return new Date(t)}function fv(t){return t instanceof Date?+t:+new Date(+t)}function Ec(t,e,n,r,i,o,a,s,u,c){var h=pc(),l=h.invert,f=h.domain,d=c(".%L"),p=c(":%S"),v=c("%I:%M"),g=c("%I %p"),m=c("%a %d"),y=c("%b %d"),E=c("%B"),C=c("%Y");function M(S){return(u(S)<S?d:s(S)<S?p:a(S)<S?v:o(S)<S?g:r(S)<S?i(S)<S?m:y:n(S)<S?E:C)(S)}return h.invert=function(S){return new Date(l(S))},h.domain=function(S){return arguments.length?f(Array.from(S,fv)):f().map(lv)},h.ticks=function(S){var T=f();return t(T[0],T[T.length-1],S??10)},h.tickFormat=function(S,T){return T==null?M:c(T)},h.nice=function(S){var T=f();return(!S||typeof S.range!="function")&&(S=e(T[0],T[T.length-1],S??10)),S?f(Wm(T,S)):h},h.copy=function(){return Oo(h,Ec(t,e,n,r,i,o,a,s,u,c))},h}function dv(){return Fo.apply(Ec(uy,cy,de,zo,qr,kn,Po,ko,Ue,Ir).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Oe(t){return function(){return t}}function pv(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Gp(e)}function gv(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Sc(t){this._context=t}Sc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Cc(t){return new Sc(t)}function mv(t){return t[0]}function yv(t){return t[1]}function Mc(t,e){var n=Oe(!0),r=null,i=Cc,o=null,a=pv(s);t=typeof t=="function"?t:t===void 0?mv:Oe(t),e=typeof e=="function"?e:e===void 0?yv:Oe(e);function s(u){var c,h=(u=gv(u)).length,l,f=!1,d;for(r==null&&(o=i(d=a())),c=0;c<=h;++c)!(c<h&&n(l=u[c],c,u))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(l,c,u),+e(l,c,u));if(d)return o=null,d+""||null}return s.x=function(u){return arguments.length?(t=typeof u=="function"?u:Oe(+u),s):t},s.y=function(u){return arguments.length?(e=typeof u=="function"?u:Oe(+u),s):e},s.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Oe(!!u),s):n},s.curve=function(u){return arguments.length?(i=u,r!=null&&(o=i(r)),s):i},s.context=function(u){return arguments.length?(u==null?r=o=null:o=i(r=u),s):r},s}var vv=Tc(Cc);function Ac(t){this._curve=t}Ac.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};function Tc(t){function e(n){return new Ac(t(n))}return e._curve=t,e}function _v(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(n){return arguments.length?e(Tc(n)):e()._curve},t}function Ms(){return _v(Mc().curve(vv))}function As(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Uo(t){this._context=t}Uo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:As(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:As(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Nc(t,e){this._basis=new Uo(t),this._beta=e}Nc.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],o=t[n]-r,a=e[n]-i,s=-1,u;++s<=n;)u=s/n,this._basis.point(this._beta*t[s]+(1-this._beta)*(r+u*o),this._beta*e[s]+(1-this._beta)*(i+u*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const Ts=function t(e){function n(r){return e===1?new Uo(r):new Nc(r,e)}return n.beta=function(r){return t(+r)},n}(.85),Zn=t=>()=>t;function wv(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function ce(t,e,n){this.k=t,this.x=e,this.y=n}ce.prototype={constructor:ce,scale:function(t){return t===1?this:new ce(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ce(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var An=new ce(1,0,0);ce.prototype;function wi(t){t.stopImmediatePropagation()}function ln(t){t.preventDefault(),t.stopImmediatePropagation()}function bv(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function xv(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Ns(){return this.__zoom||An}function Ev(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Sv(){return navigator.maxTouchPoints||"ontouchstart"in this}function Cv(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function Mv(){var t=bv,e=xv,n=Cv,r=Ev,i=Sv,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,u=Fu,c=_o("start","zoom","end"),h,l,f,d=500,p=150,v=0,g=10;function m(_){_.property("__zoom",Ns).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",L).on("dblclick.zoom",G).filter(i).on("touchstart.zoom",b).on("touchmove.zoom",z).on("touchend.zoom touchcancel.zoom",F).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(_,w,x,A){var I=_.selection?_.selection():_;I.property("__zoom",Ns),_!==I?M(_,w,x,A):I.interrupt().each(function(){S(this,arguments).event(A).start().zoom(null,typeof w=="function"?w.apply(this,arguments):w).end()})},m.scaleBy=function(_,w,x,A){m.scaleTo(_,function(){var I=this.__zoom.k,k=typeof w=="function"?w.apply(this,arguments):w;return I*k},x,A)},m.scaleTo=function(_,w,x,A){m.transform(_,function(){var I=e.apply(this,arguments),k=this.__zoom,H=x==null?C(I):typeof x=="function"?x.apply(this,arguments):x,W=k.invert(H),V=typeof w=="function"?w.apply(this,arguments):w;return n(E(y(k,V),H,W),I,a)},x,A)},m.translateBy=function(_,w,x,A){m.transform(_,function(){return n(this.__zoom.translate(typeof w=="function"?w.apply(this,arguments):w,typeof x=="function"?x.apply(this,arguments):x),e.apply(this,arguments),a)},null,A)},m.translateTo=function(_,w,x,A,I){m.transform(_,function(){var k=e.apply(this,arguments),H=this.__zoom,W=A==null?C(k):typeof A=="function"?A.apply(this,arguments):A;return n(An.translate(W[0],W[1]).scale(H.k).translate(typeof w=="function"?-w.apply(this,arguments):-w,typeof x=="function"?-x.apply(this,arguments):-x),k,a)},A,I)};function y(_,w){return w=Math.max(o[0],Math.min(o[1],w)),w===_.k?_:new ce(w,_.x,_.y)}function E(_,w,x){var A=w[0]-x[0]*_.k,I=w[1]-x[1]*_.k;return A===_.x&&I===_.y?_:new ce(_.k,A,I)}function C(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function M(_,w,x,A){_.on("start.zoom",function(){S(this,arguments).event(A).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(A).end()}).tween("zoom",function(){var I=this,k=arguments,H=S(I,k).event(A),W=e.apply(I,k),V=x==null?C(W):typeof x=="function"?x.apply(I,k):x,at=Math.max(W[1][0]-W[0][0],W[1][1]-W[0][1]),rt=I.__zoom,lt=typeof w=="function"?w.apply(I,k):w,Ht=u(rt.invert(V).concat(at/rt.k),lt.invert(V).concat(at/lt.k));return function(Rt){if(Rt===1)Rt=lt;else{var Wt=Ht(Rt),P=at/Wt[2];Rt=new ce(P,V[0]-Wt[0]*P,V[1]-Wt[1]*P)}H.zoom(null,Rt)}})}function S(_,w,x){return!x&&_.__zooming||new T(_,w)}function T(_,w){this.that=_,this.args=w,this.active=0,this.sourceEvent=null,this.extent=e.apply(_,w),this.taps=0}T.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,w){return this.mouse&&_!=="mouse"&&(this.mouse[1]=w.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=w.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=w.invert(this.touch1[0])),this.that.__zoom=w,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var w=ut(this.that).datum();c.call(_,this.that,new wv(_,{sourceEvent:this.sourceEvent,target:m,type:_,transform:this.that.__zoom,dispatch:c}),w)}};function R(_,...w){if(!t.apply(this,arguments))return;var x=S(this,w).event(_),A=this.__zoom,I=Math.max(o[0],Math.min(o[1],A.k*Math.pow(2,r.apply(this,arguments)))),k=we(_);if(x.wheel)(x.mouse[0][0]!==k[0]||x.mouse[0][1]!==k[1])&&(x.mouse[1]=A.invert(x.mouse[0]=k)),clearTimeout(x.wheel);else{if(A.k===I)return;x.mouse=[k,A.invert(k)],cr(this),x.start()}ln(_),x.wheel=setTimeout(H,p),x.zoom("mouse",n(E(y(A,I),x.mouse[0],x.mouse[1]),x.extent,a));function H(){x.wheel=null,x.end()}}function L(_,...w){if(f||!t.apply(this,arguments))return;var x=_.currentTarget,A=S(this,w,!0).event(_),I=ut(_.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",at,!0),k=we(_,x),H=_.clientX,W=_.clientY;Vf(_.view),wi(_),A.mouse=[k,this.__zoom.invert(k)],cr(this),A.start();function V(rt){if(ln(rt),!A.moved){var lt=rt.clientX-H,Ht=rt.clientY-W;A.moved=lt*lt+Ht*Ht>v}A.event(rt).zoom("mouse",n(E(A.that.__zoom,A.mouse[0]=we(rt,x),A.mouse[1]),A.extent,a))}function at(rt){I.on("mousemove.zoom mouseup.zoom",null),Xf(rt.view,A.moved),ln(rt),A.event(rt).end()}}function G(_,...w){if(t.apply(this,arguments)){var x=this.__zoom,A=we(_.changedTouches?_.changedTouches[0]:_,this),I=x.invert(A),k=x.k*(_.shiftKey?.5:2),H=n(E(y(x,k),A,I),e.apply(this,w),a);ln(_),s>0?ut(this).transition().duration(s).call(M,H,A,_):ut(this).call(m.transform,H,A,_)}}function b(_,...w){if(t.apply(this,arguments)){var x=_.touches,A=x.length,I=S(this,w,_.changedTouches.length===A).event(_),k,H,W,V;for(wi(_),H=0;H<A;++H)W=x[H],V=we(W,this),V=[V,this.__zoom.invert(V),W.identifier],I.touch0?!I.touch1&&I.touch0[2]!==V[2]&&(I.touch1=V,I.taps=0):(I.touch0=V,k=!0,I.taps=1+!!h);h&&(h=clearTimeout(h)),k&&(I.taps<2&&(l=V[0],h=setTimeout(function(){h=null},d)),cr(this),I.start())}}function z(_,...w){if(this.__zooming){var x=S(this,w).event(_),A=_.changedTouches,I=A.length,k,H,W,V;for(ln(_),k=0;k<I;++k)H=A[k],W=we(H,this),x.touch0&&x.touch0[2]===H.identifier?x.touch0[0]=W:x.touch1&&x.touch1[2]===H.identifier&&(x.touch1[0]=W);if(H=x.that.__zoom,x.touch1){var at=x.touch0[0],rt=x.touch0[1],lt=x.touch1[0],Ht=x.touch1[1],Rt=(Rt=lt[0]-at[0])*Rt+(Rt=lt[1]-at[1])*Rt,Wt=(Wt=Ht[0]-rt[0])*Wt+(Wt=Ht[1]-rt[1])*Wt;H=y(H,Math.sqrt(Rt/Wt)),W=[(at[0]+lt[0])/2,(at[1]+lt[1])/2],V=[(rt[0]+Ht[0])/2,(rt[1]+Ht[1])/2]}else if(x.touch0)W=x.touch0[0],V=x.touch0[1];else return;x.zoom("touch",n(E(H,W,V),x.extent,a))}}function F(_,...w){if(this.__zooming){var x=S(this,w).event(_),A=_.changedTouches,I=A.length,k,H;for(wi(_),f&&clearTimeout(f),f=setTimeout(function(){f=null},d),k=0;k<I;++k)H=A[k],x.touch0&&x.touch0[2]===H.identifier?delete x.touch0:x.touch1&&x.touch1[2]===H.identifier&&delete x.touch1;if(x.touch1&&!x.touch0&&(x.touch0=x.touch1,delete x.touch1),x.touch0)x.touch0[1]=this.__zoom.invert(x.touch0[0]);else if(x.end(),x.taps===2&&(H=we(H,this),Math.hypot(l[0]-H[0],l[1]-H[1])<g)){var W=ut(this).on("dblclick.zoom");W&&W.apply(this,arguments)}}}return m.wheelDelta=function(_){return arguments.length?(r=typeof _=="function"?_:Zn(+_),m):r},m.filter=function(_){return arguments.length?(t=typeof _=="function"?_:Zn(!!_),m):t},m.touchable=function(_){return arguments.length?(i=typeof _=="function"?_:Zn(!!_),m):i},m.extent=function(_){return arguments.length?(e=typeof _=="function"?_:Zn([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),m):e},m.scaleExtent=function(_){return arguments.length?(o[0]=+_[0],o[1]=+_[1],m):[o[0],o[1]]},m.translateExtent=function(_){return arguments.length?(a[0][0]=+_[0][0],a[1][0]=+_[1][0],a[0][1]=+_[0][1],a[1][1]=+_[1][1],m):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},m.constrain=function(_){return arguments.length?(n=_,m):n},m.duration=function(_){return arguments.length?(s=+_,m):s},m.interpolate=function(_){return arguments.length?(u=_,m):u},m.on=function(){var _=c.on.apply(c,arguments);return _===c?m:_},m.clickDistance=function(_){return arguments.length?(v=(_=+_)*_,m):Math.sqrt(v)},m.tapDistance=function(_){return arguments.length?(g=+_,m):g},m}const Av="data/circle_packing_data.json",Ds="circle-packing-plot",Tv="circle-packing-text",Rs="#f4efda",Nv="#2e5d52",Dv="#000000",Rv=3,Lv=5,$v=100,Fv="Click on each circle to zoom in and explore the different types of transportation.",Ov={B:"A kaleidoscope of bus numbers crisscross Switzerland, each serving its unique route in cities and rural corners alike.",Bus:"A kaleidoscope of bus numbers crisscross Switzerland, each serving its unique route in cities and rural corners alike.",T:"Trams, the urban chariots, mark their presence in the bustling cities of Geneva, Zurich, Basel, and Bern, weaving through the cityscape.",M:"Lausanne boasts the only metro system in Switzerland - the M1, a modern marvel darting beneath the city.",Metro:"Lausanne boasts the only metro system in Switzerland - the M1, a modern marvel darting beneath the city.",Train:"Switzerland's train network, from local 'S' trains to high-speed ICEs, weaves a diverse tapestry of punctuality, efficiency, and connectivity.",CC:"From the scenic trails of Montreux to the peak of Jungfraujoch, rack railways conquer the Swiss mountains, providing unforgettable journeys.","Rack Railway":"From the scenic trails of Montreux to the peak of Jungfraujoch, rack railways conquer the Swiss mountains, providing unforgettable journeys.",Boat:"Whether it's the serene Lac de Thoune or the expansive Lac des Quatre Cantons, boats gently cut through the tranquil Swiss waters, offering a unique perspective of the landscape.",BAT:"Whether it's the serene Lac de Thoune or the expansive Lac des Quatre Cantons, boats gently cut through the tranquil Swiss waters, offering a unique perspective of the landscape.",S:"The local 'S' trains serve as the reliable veins of the Swiss rail system, connecting suburbs to city centers.",R:"'R' trains, or Regional trains, make frequent stops, ensuring even the smallest towns are connected.",RE:"The Regional Express (RE) trains, quicker than the 'R', make fewer stops, bringing regions closer together.",IC:"InterCity (IC) trains link major Swiss cities, providing a swift and comfortable journey.",TER:"Transport Express Rgional (TER) trains ensure the smooth running of regional transport, serving both urban and rural areas.",RJX:"Railjet Express (RJX) is the high-speed star, offering a swift connection between major cities.",RJ:"Railjet (RJ) trains, while not as fast as RJX, still offer quick, long-distance travel across the country.",EC:"EuroCity (EC) trains reach beyond Swiss borders, connecting Switzerland with neighboring European countries.",ICE:"The InterCity Express (ICE) trains are the epitome of speed and comfort, bringing distant cities within easy reach.",Z:"The 'Z' trains, a rare sight, are special trains often used for seasonal routes or specific events.",RB:"RegionalBahn (RB) trains are the workhorses of the Swiss rail system, stopping at each station within a region.",NJ:"NightJet (NJ) trains turn travel time into rest time, offering sleeping facilities for long-distance overnight journeys.",PE:"The Panorama Express (PE) offers scenic rides through some of the most beautiful landscapes Switzerland has to offer.",IRE:"InterRegio-Express (IRE) trains offer regional services with fewer stops, connecting regions quickly and efficiently.",EXT:"The 'EXT' trains are extra trains deployed during peak times or special events to ensure everyone gets where they're going.",IR:"InterRegio (IR) trains are crucial connectors, bridging the gap between local and long-distance services by linking smaller cities with major Swiss hubs.",TGV:"The TGV (Train  Grande Vitesse), or 'High-Speed Train', is France's intercity high-speed rail service, but its influence extends beyond French borders, including into Switzerland.",RBus:"The 'R' buses, similar to 'R' trains, are regional buses. They serve a vital role in connecting smaller towns and regions that may not have direct train services.",CAR:"The 'CAR' buses in Switzerland refer to coach services, usually providing longer distance intercity connections or international routes."};class Iv{constructor(){q(this,"data");q(this,"width");q(this,"height");this.loadData().then(()=>{this.initDimensions(),this.initPacking()})}async loadData(){return new Promise(e=>{No(Av).then(n=>{this.data=n,e()})})}initDimensions(){const e=document.getElementById(Ds);if(e){const n=Math.min(e.clientWidth,e.clientHeight);this.width=n,this.height=n}}initPacking(){const n=(f=>km().size([this.width,this.height]).padding(Rv)(Wr(f).sum(d=>d.value).sort((d,p)=>p.value-d.value)))(this.data);let r=n;const i=Yr().domain([0,2]).range([Rs,Nv]),o=Vm().domain([du(n.descendants(),f=>f.r),vo(n.descendants(),f=>f.r)]).range([Lv,$v]),a=ut(`#${Ds}`).append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox",`-${this.width/2} -${this.height/2} ${this.width} ${this.height}`).style("display","block").style("background",i(0)).style("cursor","pointer").on("click",f=>l(f,n)),s=a.append("g").selectAll("circle").data(n.descendants().slice(1)).join("circle").attr("fill",f=>f.children?i(f.depth):Rs).attr("pointer-events",f=>f.children?null:"none").on("mouseover",function(){ut(this).attr("stroke",Dv)}).on("mouseout",function(){ut(this).attr("stroke",null)}).on("click",(f,d)=>r!==d&&(l(f,d),f.stopPropagation())),u=a.append("g").style("font-family","var(--default-font-family)").attr("pointer-events","none").attr("text-anchor","middle").selectAll("text").data(n.descendants()).join("text").attr("dy","0.3em").style("font-size",f=>`${o(f.r)}px`).style("fill-opacity",f=>f.parent===n?1:0).style("display",f=>f.parent===n?"inline":"none").text(f=>f.data.name);let c;const h=f=>{const d=this.width/f[2];c=f,u.attr("transform",p=>`translate(${(p.x-f[0])*d},${(p.y-f[1])*d})`),s.attr("transform",p=>`translate(${(p.x-f[0])*d},${(p.y-f[1])*d})`),s.attr("r",p=>p.r*d)};h([n.x,n.y,n.r*2]);function l(f,d){const p=document.getElementById(Tv);if(p){const g=p.getElementsByTagName("p")[0];console.log(d.data.name);const m=Ov[d.data.name]||Fv;g.innerHTML=m}r=d;const v=a.transition().duration(f.altKey?7500:750).tween("zoom",()=>{const g=Fu(c,[r.x,r.y,r.r*2]);return m=>h(g(m))});u.filter(function(g){return g.parent===r||this.style.display==="inline"}).transition(v).style("fill-opacity",g=>g.parent===r?1:0).on("start",function(g){g.parent===r&&(this.style.display="inline")}).on("end",function(g){g.parent!==r&&(this.style.display="none")})}}}var Pt="$";function kr(){}kr.prototype=Bo.prototype={constructor:kr,has:function(t){return Pt+t in this},get:function(t){return this[Pt+t]},set:function(t,e){return this[Pt+t]=e,this},remove:function(t){var e=Pt+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===Pt&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===Pt&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===Pt&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===Pt&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===Pt&&++t;return t},empty:function(){for(var t in this)if(t[0]===Pt)return!1;return!0},each:function(t){for(var e in this)e[0]===Pt&&t(this[e],e.slice(1),this)}};function Bo(t,e){var n=new kr;if(t instanceof kr)t.each(function(s,u){n.set(u,s)});else if(Array.isArray(t)){var r=-1,i=t.length,o;if(e==null)for(;++r<i;)n.set(r,t[r]);else for(;++r<i;)n.set(e(o=t[r],r,t),o)}else if(t)for(var a in t)n.set(a,t[a]);return n}function Ls(){}var be=Bo.prototype;Ls.prototype={constructor:Ls,has:be.has,add:function(t){return t+="",this[Pt+t]=t,this},remove:be.remove,clear:be.clear,values:be.keys,size:be.size,empty:be.empty,each:be.each};var ro="http://www.w3.org/1999/xhtml";const $s={svg:"http://www.w3.org/2000/svg",xhtml:ro,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Dc(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),$s.hasOwnProperty(e)?{space:$s[e],local:t}:t}function kv(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ro&&e.documentElement.namespaceURI===ro?e.createElement(t):e.createElementNS(n,t)}}function Pv(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Rc(t){var e=Dc(t);return(e.local?Pv:kv)(e)}function Gv(){}function Lc(t){return t==null?Gv:function(){return this.querySelector(t)}}function zv(t){typeof t!="function"&&(t=Lc(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=new Array(a),u,c,h=0;h<a;++h)(u=o[h])&&(c=t.call(u,u.__data__,h,o))&&("__data__"in u&&(c.__data__=u.__data__),s[h]=c);return new It(r,this._parents)}function Uv(){return[]}function Bv(t){return t==null?Uv:function(){return this.querySelectorAll(t)}}function Hv(t){typeof t!="function"&&(t=Bv(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],s=a.length,u,c=0;c<s;++c)(u=a[c])&&(r.push(t.call(u,u.__data__,c,a)),i.push(u));return new It(r,i)}function Wv(t){return function(){return this.matches(t)}}function Yv(t){typeof t!="function"&&(t=Wv(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],u,c=0;c<a;++c)(u=o[c])&&t.call(u,u.__data__,c,o)&&s.push(u);return new It(r,this._parents)}function $c(t){return new Array(t.length)}function qv(){return new It(this._enter||this._groups.map($c),this._parents)}function Pr(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Pr.prototype={constructor:Pr,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function jv(t){return function(){return t}}var Fs="$";function Vv(t,e,n,r,i,o){for(var a=0,s,u=e.length,c=o.length;a<c;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new Pr(t,o[a]);for(;a<u;++a)(s=e[a])&&(i[a]=s)}function Xv(t,e,n,r,i,o,a){var s,u,c={},h=e.length,l=o.length,f=new Array(h),d;for(s=0;s<h;++s)(u=e[s])&&(f[s]=d=Fs+a.call(u,u.__data__,s,e),d in c?i[s]=u:c[d]=u);for(s=0;s<l;++s)d=Fs+a.call(t,o[s],s,o),(u=c[d])?(r[s]=u,u.__data__=o[s],c[d]=null):n[s]=new Pr(t,o[s]);for(s=0;s<h;++s)(u=e[s])&&c[f[s]]===u&&(i[s]=u)}function Zv(t,e){if(!t)return d=new Array(this.size()),c=-1,this.each(function(S){d[++c]=S}),d;var n=e?Xv:Vv,r=this._parents,i=this._groups;typeof t!="function"&&(t=jv(t));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),c=0;c<o;++c){var h=r[c],l=i[c],f=l.length,d=t.call(h,h&&h.__data__,c,r),p=d.length,v=s[c]=new Array(p),g=a[c]=new Array(p),m=u[c]=new Array(f);n(h,l,v,g,m,d,e);for(var y=0,E=0,C,M;y<p;++y)if(C=v[y]){for(y>=E&&(E=y+1);!(M=g[E])&&++E<p;);C._next=M||null}}return a=new It(a,r),a._enter=s,a._exit=u,a}function Kv(){return new It(this._exit||this._groups.map($c),this._parents)}function Qv(t,e,n){var r=this.enter(),i=this,o=this.exit();return r=typeof t=="function"?t(r):r.append(t+""),e!=null&&(i=e(i)),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Jv(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u=e[s],c=n[s],h=u.length,l=a[s]=new Array(h),f,d=0;d<h;++d)(f=u[d]||c[d])&&(l[d]=f);for(;s<r;++s)a[s]=e[s];return new It(a,this._parents)}function t0(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function e0(t){t||(t=n0);function e(l,f){return l&&f?t(l.__data__,f.__data__):!l-!f}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,u=i[o]=new Array(s),c,h=0;h<s;++h)(c=a[h])&&(u[h]=c);u.sort(e)}return new It(i,this._parents).order()}function n0(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function r0(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function i0(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function o0(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function a0(){var t=0;return this.each(function(){++t}),t}function s0(){return!this.node()}function u0(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function c0(t){return function(){this.removeAttribute(t)}}function h0(t){return function(){this.removeAttributeNS(t.space,t.local)}}function l0(t,e){return function(){this.setAttribute(t,e)}}function f0(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function d0(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function p0(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function g0(t,e){var n=Dc(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?h0:c0:typeof e=="function"?n.local?p0:d0:n.local?f0:l0)(n,e))}function Fc(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function m0(t){return function(){this.style.removeProperty(t)}}function y0(t,e,n){return function(){this.style.setProperty(t,e,n)}}function v0(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function _0(t,e,n){return arguments.length>1?this.each((e==null?m0:typeof e=="function"?v0:y0)(t,e,n??"")):w0(this.node(),t)}function w0(t,e){return t.style.getPropertyValue(e)||Fc(t).getComputedStyle(t,null).getPropertyValue(e)}function b0(t){return function(){delete this[t]}}function x0(t,e){return function(){this[t]=e}}function E0(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function S0(t,e){return arguments.length>1?this.each((e==null?b0:typeof e=="function"?E0:x0)(t,e)):this.node()[t]}function Oc(t){return t.trim().split(/^|\s+/)}function Ho(t){return t.classList||new Ic(t)}function Ic(t){this._node=t,this._names=Oc(t.getAttribute("class")||"")}Ic.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function kc(t,e){for(var n=Ho(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Pc(t,e){for(var n=Ho(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function C0(t){return function(){kc(this,t)}}function M0(t){return function(){Pc(this,t)}}function A0(t,e){return function(){(e.apply(this,arguments)?kc:Pc)(this,t)}}function T0(t,e){var n=Oc(t+"");if(arguments.length<2){for(var r=Ho(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?A0:e?C0:M0)(n,e))}function N0(){this.textContent=""}function D0(t){return function(){this.textContent=t}}function R0(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function L0(t){return arguments.length?this.each(t==null?N0:(typeof t=="function"?R0:D0)(t)):this.node().textContent}function $0(){this.innerHTML=""}function F0(t){return function(){this.innerHTML=t}}function O0(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function I0(t){return arguments.length?this.each(t==null?$0:(typeof t=="function"?O0:F0)(t)):this.node().innerHTML}function k0(){this.nextSibling&&this.parentNode.appendChild(this)}function P0(){return this.each(k0)}function G0(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function z0(){return this.each(G0)}function U0(t){var e=typeof t=="function"?t:Rc(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function B0(){return null}function H0(t,e){var n=typeof t=="function"?t:Rc(t),r=e==null?B0:typeof e=="function"?e:Lc(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function W0(){var t=this.parentNode;t&&t.removeChild(this)}function Y0(){return this.each(W0)}function q0(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function j0(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function V0(t){return this.select(t?j0:q0)}function X0(t){return arguments.length?this.property("__data__",t):this.node().__data__}var Gc={};if(typeof document<"u"){var Z0=document.documentElement;"onmouseenter"in Z0||(Gc={mouseenter:"mouseover",mouseleave:"mouseout"})}function K0(t,e,n){return t=zc(t,e,n),function(r){var i=r.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,r)}}function zc(t,e,n){return function(r){try{t.call(this,this.__data__,e,n)}finally{}}}function Q0(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function J0(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.capture):e[++r]=o;++r?e.length=r:delete this.__on}}}function t_(t,e,n){var r=Gc.hasOwnProperty(t.type)?K0:zc;return function(i,o,a){var s=this.__on,u,c=r(e,o,a);if(s){for(var h=0,l=s.length;h<l;++h)if((u=s[h]).type===t.type&&u.name===t.name){this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=c,u.capture=n),u.value=e;return}}this.addEventListener(t.type,c,n),u={type:t.type,name:t.name,value:e,listener:c,capture:n},s?s.push(u):this.__on=[u]}}function e_(t,e,n){var r=Q0(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,c=s.length,h;u<c;++u)for(i=0,h=s[u];i<o;++i)if((a=r[i]).type===h.type&&a.name===h.name)return h.value}return}for(s=e?t_:J0,n==null&&(n=!1),i=0;i<o;++i)this.each(s(r[i],e,n));return this}function Uc(t,e,n){var r=Fc(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function n_(t,e){return function(){return Uc(this,t,e)}}function r_(t,e){return function(){return Uc(this,t,e.apply(this,arguments))}}function i_(t,e){return this.each((typeof e=="function"?r_:n_)(t,e))}var Bc=[null];function It(t,e){this._groups=t,this._parents=e}function io(){return new It([[document.documentElement]],Bc)}It.prototype=io.prototype={constructor:It,select:zv,selectAll:Hv,filter:Yv,data:Zv,enter:qv,exit:Kv,join:Qv,merge:Jv,order:t0,sort:e0,call:r0,nodes:i0,node:o0,size:a0,empty:s0,each:u0,attr:g0,style:_0,property:S0,classed:T0,text:L0,html:I0,raise:P0,lower:z0,append:U0,insert:H0,remove:Y0,clone:V0,datum:X0,on:e_,dispatch:i_};function Os(t){return typeof t=="string"?new It([[document.querySelector(t)]],[document.documentElement]):new It([[t]],Bc)}function o_(){var t=c,e=h,n=l,r=document.body,i=S(),o=null,a=null,s=null;function u(b){o=T(b),o&&(a=o.createSVGPoint(),r.appendChild(i))}u.show=function(){var b=Array.prototype.slice.call(arguments);b[b.length-1]instanceof SVGElement&&(s=b.pop());var z=n.apply(this,b),F=e.apply(this,b),_=t.apply(this,b),w=R(),x=d.length,A,I=document.documentElement.scrollTop||r.scrollTop,k=document.documentElement.scrollLeft||r.scrollLeft;for(w.html(z).style("opacity",1).style("pointer-events","all");x--;)w.classed(d[x],!1);return A=f.get(_).apply(this),w.classed(_,!0).style("top",A.top+F[0]+I+"px").style("left",A.left+F[1]+k+"px"),u},u.hide=function(){var b=R();return b.style("opacity",0).style("pointer-events","none"),u},u.attr=function(b,z){if(arguments.length<2&&typeof b=="string")return R().attr(b);var F=Array.prototype.slice.call(arguments);return io.prototype.attr.apply(R(),F),u},u.style=function(b,z){if(arguments.length<2&&typeof b=="string")return R().style(b);var F=Array.prototype.slice.call(arguments);return io.prototype.style.apply(R(),F),u},u.direction=function(b){return arguments.length?(t=b==null?b:G(b),u):t},u.offset=function(b){return arguments.length?(e=b==null?b:G(b),u):e},u.html=function(b){return arguments.length?(n=b==null?b:G(b),u):n},u.rootElement=function(b){return arguments.length?(r=b==null?b:G(b),u):r},u.destroy=function(){return i&&(R().remove(),i=null),u};function c(){return"n"}function h(){return[0,0]}function l(){return" "}var f=Bo({n:p,s:v,e:g,w:m,nw:y,ne:E,sw:C,se:M}),d=f.keys();function p(){var b=L(this);return{top:b.n.y-i.offsetHeight,left:b.n.x-i.offsetWidth/2}}function v(){var b=L(this);return{top:b.s.y,left:b.s.x-i.offsetWidth/2}}function g(){var b=L(this);return{top:b.e.y-i.offsetHeight/2,left:b.e.x}}function m(){var b=L(this);return{top:b.w.y-i.offsetHeight/2,left:b.w.x-i.offsetWidth}}function y(){var b=L(this);return{top:b.nw.y-i.offsetHeight,left:b.nw.x-i.offsetWidth}}function E(){var b=L(this);return{top:b.ne.y-i.offsetHeight,left:b.ne.x}}function C(){var b=L(this);return{top:b.sw.y,left:b.sw.x-i.offsetWidth}}function M(){var b=L(this);return{top:b.se.y,left:b.se.x}}function S(){var b=Os(document.createElement("div"));return b.style("position","absolute").style("top",0).style("opacity",0).style("pointer-events","none").style("box-sizing","border-box"),b.node()}function T(b){var z=b.node();return z?z.tagName.toLowerCase()==="svg"?z:z.ownerSVGElement:null}function R(){return i==null&&(i=S(),r.appendChild(i)),Os(i)}function L(b){for(var z=s||b;z.getScreenCTM==null&&z.parentNode!=null;)z=z.parentNode;var F={},_=z.getScreenCTM(),w=z.getBBox(),x=w.width,A=w.height,I=w.x,k=w.y;return a.x=I,a.y=k,F.nw=a.matrixTransform(_),a.x+=x,F.ne=a.matrixTransform(_),a.y+=A,F.se=a.matrixTransform(_),a.x-=x,F.sw=a.matrixTransform(_),a.y-=A/2,F.w=a.matrixTransform(_),a.x+=x,F.e=a.matrixTransform(_),a.x-=x/2,a.y-=A/2,F.n=a.matrixTransform(_),a.y+=A,F.s=a.matrixTransform(_),F}function G(b){return typeof b=="function"?b:function(){return b}}return u}const Hc="data/network/networks/transports/web_data/",a_=`${Hc}network_edges.csv`,s_=`${Hc}network_nodes.csv`,bi="hierarchy-plot",u_=200,c_=20,Is=1.5,h_=1,l_=10,f_=.1,d_=10,Sn={ZH:"#c94be1",BE:"#b2e431",LU:"#8547e4",UR:"#6cd44c",SZ:"#5527b6",OW:"#ccc842",NW:"#8270f6",GL:"#57dc84",ZG:"#d63ebf",FR:"#6eae45",SO:"#7557d3",BS:"#db9326",BL:"#5581f2",SH:"#e4441c",AR:"#3d1b7f",AI:"#c85d2c",SG:"#7d6cd5",GR:"#d13f3c",AG:"#7638a1",TG:"#da305f",TI:"#d077dd",VD:"#e85684",GE:"#a93a99",NE:"#d22e75",VS:"#d940a3",JU:"#d53e8d"},p_="#EB0000",ks=5,Zt=750;class g_{constructor(){q(this,"root");q(this,"edges");q(this,"nodes");q(this,"selectedEdges");q(this,"selectedNodes");q(this,"width");q(this,"height");q(this,"radius");q(this,"margin",u_);q(this,"svg");q(this,"g");q(this,"zoomBehavior");q(this,"weightScale");q(this,"defaultZoomState",An);this.loadData().then(()=>{this.initDimensions(),this.initStaticElements(),this.updateBundle(),new v_(this)})}async loadData(){return new Promise(e=>{Promise.all([La(s_),La(a_)]).then(([n,r])=>{n=n.filter(function(a){return a.is_train_stop==="True"}),r=r.filter(function(a){return n.some(function(s){return s.id===a.source&&s.is_train_stop==="True"})&&n.some(function(s){return s.id===a.target&&s.is_train_stop==="True"})});const i=du(r,function(a){return parseInt(a.weight)})??0,o=vo(r,function(a){return parseInt(a.weight)})??0;this.weightScale=Yr().domain([i,o]).range([h_,l_]),this.nodes=n,this.edges=r,this.filterByCantons([],!1),e()})})}initDimensions(){const e=document.getElementById(bi);if(e){const n=Math.min(e.clientWidth,e.clientHeight);this.width=n,this.height=n}}initStaticElements(){this.zoomBehavior=Mv().scaleExtent([f_,d_]).on("zoom",e=>this.zoomed(e)),this.svg=ut(`#${bi}`).append("svg").attr("width",this.width).attr("height",this.height).call(this.zoomBehavior),this.g=this.svg.append("g"),this.g.append("g").attr("class","links"),this.g.append("g").attr("class","nodes")}buildRoot(){const e={name:"Network",children:[]};ca(this.selectedNodes,a=>a.canton).forEach((a,s)=>{const u={name:s,children:[]};ca(a,h=>h.city).forEach((h,l)=>{const f={name:l,children:[]};h.forEach(d=>{f.children.push({id:d.id,name:d.label,canton:d.canton,city:d.city})}),u.children.push(f)}),e.children.push(u)});const r={};this.selectedNodes.forEach(function(a){r[a.id]=a.label}),this.selectedEdges=this.selectedEdges.map(function(a){return[{name:r[a.source],id:a.source,weight:a.weight},{name:r[a.target],id:a.target,weight:a.weight}]}),this.root=Wr(e),nm().size([360,this.radius])(this.root);const o=new Map(this.root.leaves().map(a=>[a.data.name,a]));for(const a of this.root.leaves())a.incoming=[],a.outgoing=[],this.selectedEdges.filter(u=>u[0].name===a.data.name).forEach(u=>{const c=o.get(u[1].name);c&&a.outgoing.push({nodes:[a,c],weight:u[0].weight})});for(const a of this.root.leaves())for(const s of a.outgoing)s.nodes[1].incoming.push(s)}updateBundle(){this.radius=c_*this.selectedNodes.length/(2*Math.PI);const e=Math.min(this.width,this.height)/(2*(this.radius+this.margin)),n=this.width/2,r=this.height/2;this.defaultZoomState=An.translate(n,r).scale(e),this.zoomBehavior.transform(this.svg.transition().duration(Zt),this.defaultZoomState),this.g.transition().duration(Zt).attr("transform",this.defaultZoomState.toString()),this.buildRoot(),this.g.select("g.nodes").selectAll("g.node").data(this.root.descendants().filter(a=>a.children===void 0&&a.parent!==null),a=>`${a.data.id}`).join(a=>{const s=a.append("g").filter(u=>u.children===void 0&&u.parent!==null).attr("class","node").attr("transform","rotate(0)translate(0)");s.append("circle").attr("r",4.5).attr("fill",function(u){return Sn[u.data.canton]}),s.append("text").attr("dy",".31em").attr("x",u=>u.x<180?8:-8).style("text-anchor",u=>u.x<180?"start":"end").attr("transform",u=>u.x<180?null:"rotate(180)").text(u=>u.data.name).each(function(u){u.text=this}).attr("fill",u=>Sn[u.data.canton]),s.each(function(u){u.text=this}),s.on("mouseover",(u,c)=>this.overed(u,c)).on("mouseout",(u,c)=>this.outed(u,c)),s.transition().duration(Zt).attr("transform",function(u){return"rotate("+(u.x-90)+")translate("+u.y+")"})},a=>{a.transition().duration(Zt).attr("transform",function(s){return"rotate("+(s.x-90)+")translate("+s.y+")"}),a.each(function(s){s.text=this}),a.on("mouseover",(s,u)=>this.overed(s,u)).on("mouseout",(s,u)=>this.outed(s,u)),a.select("circle").transition().duration(Zt).attr("fill",function(s){return Sn[s.data.canton]}),a.select("text").transition().duration(Zt).attr("x",function(s){return s.x<180?8:-8}).style("text-anchor",function(s){return s.x<180?"start":"end"}).attr("transform",function(s){return s.x<180?null:"rotate(180)"}).text(function(s){return s.data.name}).attr("fill",function(s){return Sn[s.data.canton]})},a=>a.transition().duration(Zt).attr("transform",s=>{const u=this.radius+1e3;return"rotate("+(s.x-90)+")translate("+u+")"}).remove());const i=Ms().curve(Ts.beta(.5)).radius(a=>a.y).angle(a=>a.x*Math.PI/180),o=Ms().curve(Ts.beta(.5)).radius(0).angle(a=>a.x*Math.PI/180);this.g.select("g.links").selectAll("path").data(this.root.leaves().flatMap(a=>a.outgoing),a=>`${a.nodes[0].data.name},${a.nodes[0].data.city},${a.nodes[0].data.canton}->${a.nodes[1].data.name},${a.nodes[1].data.city},${a.nodes[1].data.canton}`).join(a=>{const s=a.append("path").attr("stroke","black").attr("fill","none").attr("stroke-width",u=>this.weightScale(u.weight)).attr("d",u=>o(u.nodes[0].path(u.nodes[1]))).attr("stroke-opacity",0);s.each(function(u){u.path=this}),s.transition().duration(Zt).attr("d",u=>i(u.nodes[0].path(u.nodes[1]))).attr("stroke-opacity",1)},a=>{a.transition().duration(Zt).attr("d",s=>i(s.nodes[0].path(s.nodes[1]))).attr("stroke-width",s=>this.weightScale(s.weight))},a=>{a.transition().duration(Zt/2).attr("stroke-opacity",0).remove()})}overed(e,n){this.g.select("g.links").style("mix-blend-mode",null);const i=e.currentTarget,o=parseFloat(ut(i).style("font-size"));ut(i).attr("font-weight","bold").attr("font-size",o*Is),this.g.selectAll("path").filter(a=>n.incoming.some(s=>s===a)||n.outgoing.some(s=>s===a)).each(function(){const a=parseFloat(ut(this).style("stroke-width"));ut(this).attr("stroke",p_).attr("stroke-width",a+ks)}),Gn(n.incoming.map(a=>a.nodes[0].text)).attr("font-weight","bold"),Gn(n.outgoing.map(a=>a.nodes[1].text)).attr("font-weight","bold")}outed(e,n){this.g.select("g.links").style("mix-blend-mode","multiply");const i=e.currentTarget,o=parseFloat(ut(i).style("font-size"));ut(i).attr("font-weight",null).attr("font-size",o/Is),this.g.selectAll("path").filter(a=>n.incoming.some(s=>s===a)||n.outgoing.some(s=>s===a)).each(function(){const a=parseFloat(ut(this).style("stroke-width"));ut(this).attr("stroke","black").attr("stroke-width",a-ks)}),Gn(n.incoming.map(a=>a.nodes[0].text)).attr("font-weight",null),Gn(n.outgoing.map(a=>a.nodes[1].text)).attr("font-weight",null)}filterByCantons(e,n=!1){this.selectedNodes=this.nodes.filter(r=>e.includes(r.canton)),this.selectedEdges=this.edges.filter(r=>this.selectedNodes.some(i=>i.id===r.source)&&this.selectedNodes.some(i=>i.id===r.target)),n&&this.updateBundle()}zoomed(e){const n=An.translate(e.transform.x,e.transform.y).scale(e.transform.k);ut(`#${bi} svg g`).attr("transform",n)}}const m_="data/swiss_map_by_canton.json",Ps="hierarchy-minimap",Kn={Zrich:"ZH",Bern:"BE",Luzern:"LU",Uri:"UR",Schwyz:"SZ",Obwalden:"OW",Nidwalden:"NW",Glarus:"GL",Zug:"ZG",Fribourg:"FR",Solothurn:"SO","Basel-Stadt":"BS","Basel-Landschaft":"BL",Schaffhausen:"SH","Appenzell Ausserrhoden":"AR","Appenzell Innerrhoden":"AI","St. Gallen":"SG",Graubnden:"GR",Aargau:"AG",Thurgau:"TG",Ticino:"TI",Vaud:"VD",Valais:"VS",Neuchtel:"NE",Genve:"GE",Jura:"JU"},Gs="rgba(0, 0, 0, 0)",y_=20;class v_{constructor(e){q(this,"width");q(this,"height");q(this,"data");q(this,"svg");q(this,"projection");q(this,"pathGenerator");q(this,"heb");q(this,"selectedCantons",[]);this.heb=e,this.loadData().then(()=>{this.initDimensions(),this.initStaticElements(),this.drawMap()})}async loadData(){return new Promise(e=>{No(m_).then(n=>{this.data=n,this.data.features.forEach(r=>{const i=r.geometry.coordinates[0];r.geometry.coordinates[0]=i.reverse()}),e()})})}initDimensions(){const e=document.getElementById(Ps);e&&(this.width=e.clientWidth,this.height=e.clientHeight)}initStaticElements(){this.svg=ut(`#${Ps}`).append("svg").attr("width",this.width).attr("height",this.height-y_).attr("viewBox",[0,0,this.width,this.height]),this.projection=jg().fitSize([this.width,this.height],this.data),this.pathGenerator=Og().projection(this.projection)}drawMap(){const e=(r,i)=>{const o=Kn[i.properties.NAME]??null,a=this.selectedCantons.indexOf(o);a===-1?this.selectedCantons.push(o):this.selectedCantons.splice(a,1),this.heb.filterByCantons(this.selectedCantons,!0),this.svg.selectAll("path").filter(s=>this.selectedCantons.includes(Kn[s.properties.NAME])).attr("fill",s=>Sn[Kn[s.properties.NAME]]).call(n),this.svg.selectAll("path").filter(s=>!this.selectedCantons.includes(Kn[s.properties.NAME])).attr("fill",Gs).call(n)},n=o_().attr("class","d3-tip").html((r,i)=>i.properties.NAME).direction("n").offset([-10,0]);n.style("background-color","var(--green)").style("color","var(--off-white)").style("border-radius","5px").style("padding","8px").style("font-size","var(--small-font-size)").style("font-family","var(--default-font-family)"),this.svg.call(n),this.svg.selectAll("path").data(this.data.features).join("path").attr("d",this.pathGenerator).attr("fill",Gs).attr("stroke","black").attr("stroke-width",1.5).on("click",e).call(n).on("mouseover",n.show).on("mouseout",n.hide)}}const zs=20,__="data/hourly_plot",Us="hourly-bar-chart",w_="hourly-bar-buttons",Ie={top:20,right:20,bottom:30,left:50},ke=.016,b_={Train:"#00A59B",Bus:"#6F2282",Boat:"#E84E10",Metro:"#FCBB00",Tram:"#143A85","Rack Railway":"#00973B"},x_="Train";class E_{constructor(){q(this,"svg");q(this,"data");q(this,"parseTime",xc("%H:%M:%S"));q(this,"xScale");q(this,"yScale");q(this,"startTime");q(this,"endTime");q(this,"bars");this.initDimensions(),this.initStaticElements(),this.initPlot()}initDimensions(){const e=document.getElementById(Us);e&&(this.width=e.clientWidth,this.height=e.clientHeight/2)}initStaticElements(){this.svg=ut(`#${Us}`).append("svg").attr("width",this.width+Ie.left+Ie.right).attr("height",this.height+Ie.top+Ie.bottom).append("g").attr("transform",`translate(${Ie.left},${Ie.top})`)}async loadData(e){const n=`${__}/df_${e.toLowerCase().replace(" ","_")}.json`;return new Promise((r,i)=>{No(n).then(o=>{r(o)})})}initData(){this.data.forEach(n=>{n.departure_time=this.parseTime(n.departure_time),n.departure_time.setYear(1970)});const e=Xh(this.data,n=>n.departure_time);this.startTime=new Date(e[0]),this.startTime.setMinutes(this.startTime.getMinutes()-zs),this.endTime=new Date(e[1]),this.endTime.setMinutes(this.endTime.getMinutes()+zs),this.xScale=dv().domain([this.startTime,this.endTime]).range([0,this.width]),this.yScale=Yr().domain([0,vo(this.data,n=>n.count)]).nice().range([this.height,0])}createLine(){Mc().x(e=>this.xScale(e.departure_time)).y(e=>this.yScale(e.count))}createBars(){this.bars=this.svg.selectAll(".bar").data(this.data).enter().append("rect").attr("class","bar").attr("x",e=>this.xScale(e.departure_time)-this.width*ke/2).attr("y",e=>this.yScale(e.count)).attr("width",this.width*ke).attr("height",e=>this.height-this.yScale(e.count)).attr("fill","#00A59B")}createAxes(){this.svg.append("g").attr("class","x axis").attr("transform",`translate(0,${this.height})`).call(la(this.xScale).tickFormat(Ir("%H:%M"))),this.svg.append("g").attr("class","y axis").call(fa(this.yScale)),this.svg.selectAll(".tick").attr("font-size","var(--small-font-size)")}initPlot(){this.loadData(x_).then(e=>{this.data=e,this.initData(),this.createLine(),this.createBars(),this.createAxes(),this.addButtons()})}async updatePlot(e){return new Promise((n,r)=>{this.loadData(e).then(i=>{this.data=i,this.initData(),this.bars=this.svg.selectAll(".bar").data(this.data),this.bars.join(o=>o.append("rect").attr("class","bar").attr("x",a=>this.xScale(a.departure_time)-this.width*ke/2).attr("y",this.yScale(0)).attr("width",this.width*ke).attr("height",0).attr("fill","steelblue"),o=>o.transition().duration(1e3).attr("x",a=>this.xScale(a.departure_time)-this.width*ke/2).attr("y",a=>this.yScale(a.count)).attr("width",this.width*ke).attr("height",a=>this.height-this.yScale(a.count)).attr("fill",b_[e]),o=>o.transition().duration(1e3).attr("y",this.yScale(0)).attr("height",0).remove()),this.svg.select(".x.axis").transition().duration(1e3).call(la(this.xScale).tickFormat(Ir("%H:%M"))),this.svg.select(".y.axis").transition().duration(1e3).call(fa(this.yScale))})})}addButtons(){const e=["Train","Bus","Boat","Metro","Tram","Rack Railway"];for(let n=0;n<e.length;n++){const r=e[n],i=document.createElement("button");i.setAttribute("type","button"),i.setAttribute("id",r),i.innerHTML=r,i.onclick=()=>{this.updatePlot(r)},document.getElementById(w_).appendChild(i)}}}var $=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fn={},S_={get exports(){return Fn},set exports(t){Fn=t}},We=typeof Reflect=="object"?Reflect:null,Bs=We&&typeof We.apply=="function"?We.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},lr;We&&typeof We.ownKeys=="function"?lr=We.ownKeys:Object.getOwnPropertySymbols?lr=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:lr=function(e){return Object.getOwnPropertyNames(e)};function C_(t){console&&console.warn&&console.warn(t)}var Wc=Number.isNaN||function(e){return e!==e};function Q(){Q.init.call(this)}S_.exports=Q;Fn.once=N_;Q.EventEmitter=Q;Q.prototype._events=void 0;Q.prototype._eventsCount=0;Q.prototype._maxListeners=void 0;var Hs=10;function jr(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Q,"defaultMaxListeners",{enumerable:!0,get:function(){return Hs},set:function(t){if(typeof t!="number"||t<0||Wc(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Hs=t}});Q.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Q.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Wc(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Yc(t){return t._maxListeners===void 0?Q.defaultMaxListeners:t._maxListeners}Q.prototype.getMaxListeners=function(){return Yc(this)};Q.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var a;if(n.length>0&&(a=n[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=o[e];if(u===void 0)return!1;if(typeof u=="function")Bs(u,this,n);else for(var c=u.length,h=Zc(u,c),r=0;r<c;++r)Bs(h[r],this,n);return!0};function qc(t,e,n,r){var i,o,a;if(jr(n),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),a===void 0)a=o[e]=n,++t._eventsCount;else if(typeof a=="function"?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),i=Yc(t),i>0&&a.length>i&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=a.length,C_(s)}return t}Q.prototype.addListener=function(e,n){return qc(this,e,n,!1)};Q.prototype.on=Q.prototype.addListener;Q.prototype.prependListener=function(e,n){return qc(this,e,n,!0)};function M_(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function jc(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=M_.bind(r);return i.listener=n,r.wrapFn=i,i}Q.prototype.once=function(e,n){return jr(n),this.on(e,jc(this,e,n)),this};Q.prototype.prependOnceListener=function(e,n){return jr(n),this.prependListener(e,jc(this,e,n)),this};Q.prototype.removeListener=function(e,n){var r,i,o,a,s;if(jr(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(o=-1,a=r.length-1;a>=0;a--)if(r[a]===n||r[a].listener===n){s=r[a].listener,o=a;break}if(o<0)return this;o===0?r.shift():A_(r,o),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,s||n)}return this};Q.prototype.off=Q.prototype.removeListener;Q.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var o=Object.keys(r),a;for(i=0;i<o.length;++i)a=o[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function Vc(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?T_(i):Zc(i,i.length)}Q.prototype.listeners=function(e){return Vc(this,e,!0)};Q.prototype.rawListeners=function(e){return Vc(this,e,!1)};Q.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Xc.call(t,e)};Q.prototype.listenerCount=Xc;function Xc(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Q.prototype.eventNames=function(){return this._eventsCount>0?lr(this._events):[]};function Zc(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function A_(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function T_(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function N_(t,e){return new Promise(function(n,r){function i(a){t.removeListener(e,o),r(a)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}Kc(t,e,o,{once:!0}),e!=="error"&&D_(t,i,{once:!0})})}function D_(t,e,n){typeof t.on=="function"&&Kc(t,"error",e,n)}function Kc(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){r.once&&t.removeEventListener(e,i),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}function ie(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(ie.prototype[Symbol.iterator]=function(){return this});ie.of=function(){var t=arguments,e=t.length,n=0;return new ie(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};ie.empty=function(){var t=new ie(function(){return{done:!0}});return t};ie.fromSequence=function(t){var e=0,n=t.length;return new ie(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};ie.is=function(t){return t instanceof ie?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var Dt=ie,Wo={};Wo.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Wo.SYMBOL_SUPPORT=typeof Symbol<"u";var R_=Dt,Qc=Wo,L_=Qc.ARRAY_BUFFER_SUPPORT,$_=Qc.SYMBOL_SUPPORT;function F_(t){return typeof t=="string"||Array.isArray(t)||L_&&ArrayBuffer.isView(t)?R_.fromSequence(t):typeof t!="object"||t===null?null:$_&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var Jc=function(e){var n=F_(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},O_=Jc,th=function(e,n){for(var r=arguments.length>1?n:1/0,i=r!==1/0?new Array(r):[],o,a=0,s=O_(e);;){if(a===r)return i;if(o=s.next(),o.done)return a!==n&&(i.length=a),i;i[a++]=o.value}},I_=Dt,k_=Jc,he=function(){var e=arguments,n=null,r=-1;return new I_(function(){var o=null;do{if(n===null){if(r++,r>=e.length)return{done:!0};n=k_(e[r])}if(o=n.next(),o.done===!0){n=null;continue}break}while(!0);return o})};function P_(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const r in arguments[e])t[r]=arguments[e][r];return t}let dt=P_;typeof Object.assign=="function"&&(dt=Object.assign);function Bt(t,e,n,r){const i=t._nodes.get(e);let o=null;return i&&(r==="mixed"?o=i.out&&i.out[n]||i.undirected&&i.undirected[n]:r==="directed"?o=i.out&&i.out[n]:o=i.undirected&&i.undirected[n]),o}function mt(t){return typeof t=="object"&&t!==null&&t.constructor===Object}function eh(t){let e;for(e in t)return!1;return!0}function kt(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function Yt(t,e,n){const r={enumerable:!0,configurable:!0};typeof n=="function"?r.get=n:(r.value=n,r.writable=!1),Object.defineProperty(t,e,r)}function Ws(t){return!(!mt(t)||t.attributes&&!Array.isArray(t.attributes))}function G_(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class Yo extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class O extends Yo{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,O.prototype.constructor)}}class D extends Yo{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,D.prototype.constructor)}}class U extends Yo{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,U.prototype.constructor)}}function nh(t,e){this.key=t,this.attributes=e,this.clear()}nh.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function rh(t,e){this.key=t,this.attributes=e,this.clear()}rh.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function ih(t,e){this.key=t,this.attributes=e,this.clear()}ih.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function nn(t,e,n,r,i){this.key=e,this.attributes=i,this.undirected=t,this.source=n,this.target=r}nn.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,r=this.target.key;this.source[t][r]=this,!(this.undirected&&n===r)&&(this.target[e][n]=this)};nn.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,r=this.target.key;this.undirected&&(t=e="undirected");const i=this.source[t],o=i[r];if(typeof o>"u"){i[r]=this,this.undirected&&n===r||(this.target[e][n]=this);return}o.previous=this,this.next=o,i[r]=this,this.target[e][n]=this};nn.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),delete this.source[n][e],delete this.target[r][t]};nn.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[r][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[r][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const oh=0,ah=1,z_=2,sh=3;function pe(t,e,n,r,i,o,a){let s,u,c,h;if(r=""+r,n===oh){if(s=t._nodes.get(r),!s)throw new D(`Graph.${e}: could not find the "${r}" node in the graph.`);c=i,h=o}else if(n===sh){if(i=""+i,u=t._edges.get(i),!u)throw new D(`Graph.${e}: could not find the "${i}" edge in the graph.`);const l=u.source.key,f=u.target.key;if(r===l)s=u.target;else if(r===f)s=u.source;else throw new D(`Graph.${e}: the "${r}" node is not attached to the "${i}" edge (${l}, ${f}).`);c=o,h=a}else{if(u=t._edges.get(r),!u)throw new D(`Graph.${e}: could not find the "${r}" edge in the graph.`);n===ah?s=u.source:s=u.target,c=i,h=o}return[s,c,h]}function U_(t,e,n){t.prototype[e]=function(r,i,o){const[a,s]=pe(this,e,n,r,i,o);return a.attributes[s]}}function B_(t,e,n){t.prototype[e]=function(r,i){const[o]=pe(this,e,n,r,i);return o.attributes}}function H_(t,e,n){t.prototype[e]=function(r,i,o){const[a,s]=pe(this,e,n,r,i,o);return a.attributes.hasOwnProperty(s)}}function W_(t,e,n){t.prototype[e]=function(r,i,o,a){const[s,u,c]=pe(this,e,n,r,i,o,a);return s.attributes[u]=c,this.emit("nodeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:u}),this}}function Y_(t,e,n){t.prototype[e]=function(r,i,o,a){const[s,u,c]=pe(this,e,n,r,i,o,a);if(typeof c!="function")throw new O(`Graph.${e}: updater should be a function.`);const h=s.attributes,l=c(h[u]);return h[u]=l,this.emit("nodeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:u}),this}}function q_(t,e,n){t.prototype[e]=function(r,i,o){const[a,s]=pe(this,e,n,r,i,o);return delete a.attributes[s],this.emit("nodeAttributesUpdated",{key:a.key,type:"remove",attributes:a.attributes,name:s}),this}}function j_(t,e,n){t.prototype[e]=function(r,i,o){const[a,s]=pe(this,e,n,r,i,o);if(!mt(s))throw new O(`Graph.${e}: provided attributes are not a plain object.`);return a.attributes=s,this.emit("nodeAttributesUpdated",{key:a.key,type:"replace",attributes:a.attributes}),this}}function V_(t,e,n){t.prototype[e]=function(r,i,o){const[a,s]=pe(this,e,n,r,i,o);if(!mt(s))throw new O(`Graph.${e}: provided attributes are not a plain object.`);return dt(a.attributes,s),this.emit("nodeAttributesUpdated",{key:a.key,type:"merge",attributes:a.attributes,data:s}),this}}function X_(t,e,n){t.prototype[e]=function(r,i,o){const[a,s]=pe(this,e,n,r,i,o);if(typeof s!="function")throw new O(`Graph.${e}: provided updater is not a function.`);return a.attributes=s(a.attributes),this.emit("nodeAttributesUpdated",{key:a.key,type:"update",attributes:a.attributes}),this}}const Z_=[{name:t=>`get${t}Attribute`,attacher:U_},{name:t=>`get${t}Attributes`,attacher:B_},{name:t=>`has${t}Attribute`,attacher:H_},{name:t=>`set${t}Attribute`,attacher:W_},{name:t=>`update${t}Attribute`,attacher:Y_},{name:t=>`remove${t}Attribute`,attacher:q_},{name:t=>`replace${t}Attributes`,attacher:j_},{name:t=>`merge${t}Attributes`,attacher:V_},{name:t=>`update${t}Attributes`,attacher:X_}];function K_(t){Z_.forEach(function({name:e,attacher:n}){n(t,e("Node"),oh),n(t,e("Source"),ah),n(t,e("Target"),z_),n(t,e("Opposite"),sh)})}function Q_(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new U(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new U(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+i;if(i=arguments[2],o=Bt(this,a,s,n),!o)throw new D(`Graph.${e}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(n!=="mixed")throw new U(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new D(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes[i]}}function J_(t,e,n){t.prototype[e]=function(r){let i;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new U(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new U(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+arguments[1];if(i=Bt(this,o,a,n),!i)throw new D(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new U(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new D(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return i.attributes}}function tw(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new U(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new U(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+i;if(i=arguments[2],o=Bt(this,a,s,n),!o)throw new D(`Graph.${e}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(n!=="mixed")throw new U(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new D(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes.hasOwnProperty(i)}}function ew(t,e,n){t.prototype[e]=function(r,i,o){let a;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new U(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new U(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,u=""+i;if(i=arguments[2],o=arguments[3],a=Bt(this,s,u,n),!a)throw new D(`Graph.${e}: could not find an edge for the given path ("${s}" - "${u}").`)}else{if(n!=="mixed")throw new U(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new D(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return a.attributes[i]=o,this.emit("edgeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:i}),this}}function nw(t,e,n){t.prototype[e]=function(r,i,o){let a;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new U(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new U(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,u=""+i;if(i=arguments[2],o=arguments[3],a=Bt(this,s,u,n),!a)throw new D(`Graph.${e}: could not find an edge for the given path ("${s}" - "${u}").`)}else{if(n!=="mixed")throw new U(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new D(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof o!="function")throw new O(`Graph.${e}: updater should be a function.`);return a.attributes[i]=o(a.attributes[i]),this.emit("edgeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:i}),this}}function rw(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new U(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new U(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+i;if(i=arguments[2],o=Bt(this,a,s,n),!o)throw new D(`Graph.${e}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(n!=="mixed")throw new U(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new D(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return delete o.attributes[i],this.emit("edgeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:i}),this}}function iw(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new U(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new U(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+i;if(i=arguments[2],o=Bt(this,a,s,n),!o)throw new D(`Graph.${e}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(n!=="mixed")throw new U(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new D(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!mt(i))throw new O(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=i,this.emit("edgeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function ow(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new U(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new U(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+i;if(i=arguments[2],o=Bt(this,a,s,n),!o)throw new D(`Graph.${e}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(n!=="mixed")throw new U(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new D(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!mt(i))throw new O(`Graph.${e}: provided attributes are not a plain object.`);return dt(o.attributes,i),this.emit("edgeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:i}),this}}function aw(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new U(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new U(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+i;if(i=arguments[2],o=Bt(this,a,s,n),!o)throw new D(`Graph.${e}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(n!=="mixed")throw new U(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new D(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof i!="function")throw new O(`Graph.${e}: provided updater is not a function.`);return o.attributes=i(o.attributes),this.emit("edgeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const sw=[{name:t=>`get${t}Attribute`,attacher:Q_},{name:t=>`get${t}Attributes`,attacher:J_},{name:t=>`has${t}Attribute`,attacher:tw},{name:t=>`set${t}Attribute`,attacher:ew},{name:t=>`update${t}Attribute`,attacher:nw},{name:t=>`remove${t}Attribute`,attacher:rw},{name:t=>`replace${t}Attributes`,attacher:iw},{name:t=>`merge${t}Attributes`,attacher:ow},{name:t=>`update${t}Attributes`,attacher:aw}];function uw(t){sw.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const cw=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function hw(t,e,n,r){let i=!1;for(const o in e){if(o===r)continue;const a=e[o];if(i=n(a.key,a.attributes,a.source.key,a.target.key,a.source.attributes,a.target.attributes,a.undirected),t&&i)return a.key}}function lw(t,e,n,r){let i,o,a,s=!1;for(const u in e)if(u!==r){i=e[u];do{if(o=i.source,a=i.target,s=n(i.key,i.attributes,o.key,a.key,o.attributes,a.attributes,i.undirected),t&&s)return i.key;i=i.next}while(i!==void 0)}}function xi(t,e){const n=Object.keys(t),r=n.length;let i,o=0;return new Dt(function(){do if(i)i=i.next;else{if(o>=r)return{done:!0};const s=n[o++];if(s===e){i=void 0;continue}i=t[s]}while(!i);return{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}}})}function fw(t,e,n,r){const i=e[n];if(!i)return;const o=i.source,a=i.target;if(r(i.key,i.attributes,o.key,a.key,o.attributes,a.attributes,i.undirected)&&t)return i.key}function dw(t,e,n,r){let i=e[n];if(!i)return;let o=!1;do{if(o=r(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),t&&o)return i.key;i=i.next}while(i!==void 0)}function Ei(t,e){let n=t[e];return n.next!==void 0?new Dt(function(){if(!n)return{done:!0};const r={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:r}}):Dt.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function pw(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):th(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,r=new Array(n),i=e==="undirected",o=t._edges.values();let a=0,s,u;for(;s=o.next(),s.done!==!0;)u=s.value,u.undirected===i&&(r[a++]=u.key);return r}function uh(t,e,n,r){if(e.size===0)return;const i=n!=="mixed"&&n!==e.type,o=n==="undirected";let a,s,u=!1;const c=e._edges.values();for(;a=c.next(),a.done!==!0;){if(s=a.value,i&&s.undirected!==o)continue;const{key:h,attributes:l,source:f,target:d}=s;if(u=r(h,l,f.key,d.key,f.attributes,d.attributes,s.undirected),t&&u)return h}}function gw(t,e){if(t.size===0)return Dt.empty();const n=e!=="mixed"&&e!==t.type,r=e==="undirected",i=t._edges.values();return new Dt(function(){let a,s;for(;;){if(a=i.next(),a.done)return a;if(s=a.value,!(n&&s.undirected!==r))break}return{value:{edge:s.key,attributes:s.attributes,source:s.source.key,target:s.target.key,sourceAttributes:s.source.attributes,targetAttributes:s.target.attributes,undirected:s.undirected},done:!1}})}function qo(t,e,n,r,i,o){const a=e?lw:hw;let s;if(n!=="undirected"&&(r!=="out"&&(s=a(t,i.in,o),t&&s)||r!=="in"&&(s=a(t,i.out,o,r?void 0:i.key),t&&s))||n!=="directed"&&(s=a(t,i.undirected,o),t&&s))return s}function mw(t,e,n,r){const i=[];return qo(!1,t,e,n,r,function(o){i.push(o)}),i}function yw(t,e,n){let r=Dt.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(r=he(r,xi(n.in))),e!=="in"&&typeof n.out<"u"&&(r=he(r,xi(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(r=he(r,xi(n.undirected))),r}function jo(t,e,n,r,i,o,a){const s=n?dw:fw;let u;if(e!=="undirected"&&(typeof i.in<"u"&&r!=="out"&&(u=s(t,i.in,o,a),t&&u)||typeof i.out<"u"&&r!=="in"&&(r||i.key!==o)&&(u=s(t,i.out,o,a),t&&u))||e!=="directed"&&typeof i.undirected<"u"&&(u=s(t,i.undirected,o,a),t&&u))return u}function vw(t,e,n,r,i){const o=[];return jo(!1,t,e,n,r,i,function(a){o.push(a)}),o}function _w(t,e,n,r){let i=Dt.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&r in n.in&&(i=he(i,Ei(n.in,r))),typeof n.out<"u"&&e!=="in"&&r in n.out&&(e||n.key!==r)&&(i=he(i,Ei(n.out,r)))),t!=="directed"&&typeof n.undirected<"u"&&r in n.undirected&&(i=he(i,Ei(n.undirected,r))),i}function ww(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(o,a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return pw(this,r);if(arguments.length===1){o=""+o;const s=this._nodes.get(o);if(typeof s>"u")throw new D(`Graph.${n}: could not find the "${o}" node in the graph.`);return mw(this.multi,r==="mixed"?this.type:r,i,s)}if(arguments.length===2){o=""+o,a=""+a;const s=this._nodes.get(o);if(!s)throw new D(`Graph.${n}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new D(`Graph.${n}:  could not find the "${a}" target node in the graph.`);return vw(r,this.multi,i,s,a)}throw new O(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function bw(t,e){const{name:n,type:r,direction:i}=e,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(c,h,l){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return l=c,uh(!1,this,r,l);if(arguments.length===2){c=""+c,l=h;const f=this._nodes.get(c);if(typeof f>"u")throw new D(`Graph.${o}: could not find the "${c}" node in the graph.`);return qo(!1,this.multi,r==="mixed"?this.type:r,i,f,l)}if(arguments.length===3){c=""+c,h=""+h;const f=this._nodes.get(c);if(!f)throw new D(`Graph.${o}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(h))throw new D(`Graph.${o}:  could not find the "${h}" target node in the graph.`);return jo(!1,r,this.multi,i,f,h,l)}throw new O(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const a="map"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),h=c.pop();let l;if(c.length===0){let f=0;r!=="directed"&&(f+=this.undirectedSize),r!=="undirected"&&(f+=this.directedSize),l=new Array(f);let d=0;c.push((p,v,g,m,y,E,C)=>{l[d++]=h(p,v,g,m,y,E,C)})}else l=[],c.push((f,d,p,v,g,m,y)=>{l.push(h(f,d,p,v,g,m,y))});return this[o].apply(this,c),l};const s="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[s]=function(){const c=Array.prototype.slice.call(arguments),h=c.pop(),l=[];return c.push((f,d,p,v,g,m,y)=>{h(f,d,p,v,g,m,y)&&l.push(f)}),this[o].apply(this,c),l};const u="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[u]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new O(`Graph.${u}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new O(`Graph.${u}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h,l;c.length===2?(h=c[0],l=c[1],c=[]):c.length===3?(h=c[1],l=c[2],c=[c[0]]):c.length===4&&(h=c[2],l=c[3],c=[c[0],c[1]]);let f=l;return c.push((d,p,v,g,m,y,E)=>{f=h(f,d,p,v,g,m,y,E)}),this[o].apply(this,c),f}}function xw(t,e){const{name:n,type:r,direction:i}=e,o="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(u,c,h){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return h=u,uh(!0,this,r,h);if(arguments.length===2){u=""+u,h=c;const l=this._nodes.get(u);if(typeof l>"u")throw new D(`Graph.${o}: could not find the "${u}" node in the graph.`);return qo(!0,this.multi,r==="mixed"?this.type:r,i,l,h)}if(arguments.length===3){u=""+u,c=""+c;const l=this._nodes.get(u);if(!l)throw new D(`Graph.${o}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(c))throw new D(`Graph.${o}:  could not find the "${c}" target node in the graph.`);return jo(!0,r,this.multi,i,l,c,h)}throw new O(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const a="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();return u.push((l,f,d,p,v,g,m)=>c(l,f,d,p,v,g,m)),!!this[o].apply(this,u)};const s="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();return u.push((l,f,d,p,v,g,m)=>!c(l,f,d,p,v,g,m)),!this[o].apply(this,u)}}function Ew(t,e){const{name:n,type:r,direction:i}=e,o=n.slice(0,-1)+"Entries";t.prototype[o]=function(a,s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Dt.empty();if(!arguments.length)return gw(this,r);if(arguments.length===1){a=""+a;const u=this._nodes.get(a);if(!u)throw new D(`Graph.${o}: could not find the "${a}" node in the graph.`);return yw(r,i,u)}if(arguments.length===2){a=""+a,s=""+s;const u=this._nodes.get(a);if(!u)throw new D(`Graph.${o}:  could not find the "${a}" source node in the graph.`);if(!this._nodes.has(s))throw new D(`Graph.${o}:  could not find the "${s}" target node in the graph.`);return _w(r,i,u,s)}throw new O(`Graph.${o}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Sw(t){cw.forEach(e=>{ww(t,e),bw(t,e),xw(t,e),Ew(t,e)})}const Cw=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Vr(){this.A=null,this.B=null}Vr.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};Vr.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function fn(t,e,n,r,i){for(const o in r){const a=r[o],s=a.source,u=a.target,c=s===n?u:s;if(e&&e.has(c.key))continue;const h=i(c.key,c.attributes);if(t&&h)return c.key}}function Vo(t,e,n,r,i){if(e!=="mixed"){if(e==="undirected")return fn(t,null,r,r.undirected,i);if(typeof n=="string")return fn(t,null,r,r[n],i)}const o=new Vr;let a;if(e!=="undirected"){if(n!=="out"){if(a=fn(t,null,r,r.in,i),t&&a)return a;o.wrap(r.in)}if(n!=="in"){if(a=fn(t,o,r,r.out,i),t&&a)return a;o.wrap(r.out)}}if(e!=="directed"&&(a=fn(t,o,r,r.undirected,i),t&&a))return a}function Mw(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const r=[];return Vo(!1,t,e,n,function(i){r.push(i)}),r}function dn(t,e,n){const r=Object.keys(n),i=r.length;let o=0;return new Dt(function(){let s=null;do{if(o>=i)return t&&t.wrap(n),{done:!0};const u=n[r[o++]],c=u.source,h=u.target;if(s=c===e?h:c,t&&t.has(s.key)){s=null;continue}}while(s===null);return{done:!1,value:{neighbor:s.key,attributes:s.attributes}}})}function Aw(t,e,n){if(t!=="mixed"){if(t==="undirected")return dn(null,n,n.undirected);if(typeof e=="string")return dn(null,n,n[e])}let r=Dt.empty();const i=new Vr;return t!=="undirected"&&(e!=="out"&&(r=he(r,dn(i,n,n.in))),e!=="in"&&(r=he(r,dn(i,n,n.out)))),t!=="directed"&&(r=he(r,dn(i,n,n.undirected))),r}function Tw(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new D(`Graph.${n}: could not find the "${o}" node in the graph.`);return Mw(r==="mixed"?this.type:r,i,a)}}function Nw(t,e){const{name:n,type:r,direction:i}=e,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(c,h){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;c=""+c;const l=this._nodes.get(c);if(typeof l>"u")throw new D(`Graph.${o}: could not find the "${c}" node in the graph.`);Vo(!1,r==="mixed"?this.type:r,i,l,h)};const a="map"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(c,h){const l=[];return this[o](c,(f,d)=>{l.push(h(f,d))}),l};const s="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[s]=function(c,h){const l=[];return this[o](c,(f,d)=>{h(f,d)&&l.push(f)}),l};const u="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[u]=function(c,h,l){if(arguments.length<3)throw new O(`Graph.${u}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let f=l;return this[o](c,(d,p)=>{f=h(f,d,p)}),f}}function Dw(t,e){const{name:n,type:r,direction:i}=e,o=n[0].toUpperCase()+n.slice(1,-1),a="find"+o;t.prototype[a]=function(c,h){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;c=""+c;const l=this._nodes.get(c);if(typeof l>"u")throw new D(`Graph.${a}: could not find the "${c}" node in the graph.`);return Vo(!0,r==="mixed"?this.type:r,i,l,h)};const s="some"+o;t.prototype[s]=function(c,h){return!!this[a](c,h)};const u="every"+o;t.prototype[u]=function(c,h){return!this[a](c,(f,d)=>!h(f,d))}}function Rw(t,e){const{name:n,type:r,direction:i}=e,o=n.slice(0,-1)+"Entries";t.prototype[o]=function(a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Dt.empty();a=""+a;const s=this._nodes.get(a);if(typeof s>"u")throw new D(`Graph.${o}: could not find the "${a}" node in the graph.`);return Aw(r==="mixed"?this.type:r,i,s)}}function Lw(t){Cw.forEach(e=>{Tw(t,e),Nw(t,e),Dw(t,e),Rw(t,e)})}function Qn(t,e,n,r,i){const o=r._nodes.values(),a=r.type;let s,u,c,h,l,f,d;for(;s=o.next(),s.done!==!0;){let p=!1;if(u=s.value,a!=="undirected"){h=u.out;for(c in h){l=h[c];do{if(f=l.target,p=!0,d=i(u.key,f.key,u.attributes,f.attributes,l.key,l.attributes,l.undirected),t&&d)return l;l=l.next}while(l)}}if(a!=="directed"){h=u.undirected;for(c in h)if(!(e&&u.key>c)){l=h[c];do{if(f=l.target,f.key!==c&&(f=l.source),p=!0,d=i(u.key,f.key,u.attributes,f.attributes,l.key,l.attributes,l.undirected),t&&d)return l;l=l.next}while(l)}}if(n&&!p&&(d=i(u.key,null,u.attributes,null,null,null,null),t&&d))return null}}function $w(t,e){const n={key:t};return eh(e.attributes)||(n.attributes=dt({},e.attributes)),n}function Fw(t,e,n){const r={key:e,source:n.source.key,target:n.target.key};return eh(n.attributes)||(r.attributes=dt({},n.attributes)),t==="mixed"&&n.undirected&&(r.undirected=!0),r}function Ow(t){if(!mt(t))throw new O('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new O("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!mt(t.attributes)||t.attributes===null))throw new O("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Iw(t){if(!mt(t))throw new O('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new O("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new O("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!mt(t.attributes)||t.attributes===null))throw new O("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new O("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const kw=G_(),Pw=new Set(["directed","undirected","mixed"]),Ys=new Set(["domain","_events","_eventsCount","_maxListeners"]),Gw=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],zw={allowSelfLoops:!0,multi:!1,type:"mixed"};function Uw(t,e,n){if(n&&!mt(n))throw new O(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new U(`Graph.addNode: the "${e}" node already exist in the graph.`);const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function qs(t,e,n){const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function ch(t,e,n,r,i,o,a,s){if(!r&&t.type==="undirected")throw new U(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new U(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(s&&!mt(s))throw new O(`Graph.${e}: invalid attributes. Expecting an object but got "${s}"`);if(o=""+o,a=""+a,s=s||{},!t.allowSelfLoops&&o===a)throw new U(`Graph.${e}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const u=t._nodes.get(o),c=t._nodes.get(a);if(!u)throw new D(`Graph.${e}: source node "${o}" not found.`);if(!c)throw new D(`Graph.${e}: target node "${a}" not found.`);const h={key:null,undirected:r,source:o,target:a,attributes:s};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new U(`Graph.${e}: the "${i}" edge already exists in the graph.`);if(!t.multi&&(r?typeof u.undirected[a]<"u":typeof u.out[a]<"u"))throw new U(`Graph.${e}: an edge linking "${o}" to "${a}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const l=new nn(r,i,u,c,s);t._edges.set(i,l);const f=o===a;return r?(u.undirectedDegree++,c.undirectedDegree++,f&&(u.undirectedLoops++,t._undirectedSelfLoopCount++)):(u.outDegree++,c.inDegree++,f&&(u.directedLoops++,t._directedSelfLoopCount++)),t.multi?l.attachMulti():l.attach(),r?t._undirectedSize++:t._directedSize++,h.key=i,t.emit("edgeAdded",h),i}function Bw(t,e,n,r,i,o,a,s,u){if(!r&&t.type==="undirected")throw new U(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new U(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(s){if(u){if(typeof s!="function")throw new O(`Graph.${e}: invalid updater function. Expecting a function but got "${s}"`)}else if(!mt(s))throw new O(`Graph.${e}: invalid attributes. Expecting an object but got "${s}"`)}o=""+o,a=""+a;let c;if(u&&(c=s,s=void 0),!t.allowSelfLoops&&o===a)throw new U(`Graph.${e}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let h=t._nodes.get(o),l=t._nodes.get(a),f,d;if(!n&&(f=t._edges.get(i),f)){if((f.source.key!==o||f.target.key!==a)&&(!r||f.source.key!==a||f.target.key!==o))throw new U(`Graph.${e}: inconsistency detected when attempting to merge the "${i}" edge with "${o}" source & "${a}" target vs. ("${f.source.key}", "${f.target.key}").`);d=f}if(!d&&!t.multi&&h&&(d=r?h.undirected[a]:h.out[a]),d){const y=[d.key,!1,!1,!1];if(u?!c:!s)return y;if(u){const E=d.attributes;d.attributes=c(E),t.emit("edgeAttributesUpdated",{type:"replace",key:d.key,attributes:d.attributes})}else dt(d.attributes,s),t.emit("edgeAttributesUpdated",{type:"merge",key:d.key,attributes:d.attributes,data:s});return y}s=s||{},u&&c&&(s=c(s));const p={key:null,undirected:r,source:o,target:a,attributes:s};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new U(`Graph.${e}: the "${i}" edge already exists in the graph.`);let v=!1,g=!1;h||(h=qs(t,o,{}),v=!0,o===a&&(l=h,g=!0)),l||(l=qs(t,a,{}),g=!0),f=new nn(r,i,h,l,s),t._edges.set(i,f);const m=o===a;return r?(h.undirectedDegree++,l.undirectedDegree++,m&&(h.undirectedLoops++,t._undirectedSelfLoopCount++)):(h.outDegree++,l.inDegree++,m&&(h.directedLoops++,t._directedSelfLoopCount++)),t.multi?f.attachMulti():f.attach(),r?t._undirectedSize++:t._directedSize++,p.key=i,t.emit("edgeAdded",p),[i,!0,v,g]}function Pe(t,e){t._edges.delete(e.key);const{source:n,target:r,attributes:i}=e,o=e.undirected,a=n===r;o?(n.undirectedDegree--,r.undirectedDegree--,a&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,r.inDegree--,a&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),o?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:i,source:n.key,target:r.key,undirected:o})}class J extends Fn.EventEmitter{constructor(e){if(super(),e=dt({},zw,e),typeof e.multi!="boolean")throw new O(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!Pw.has(e.type))throw new O(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new O(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?nh:e.type==="directed"?rh:ih;kt(this,"NodeDataClass",n);const r="geid_"+kw()+"_";let i=0;const o=()=>{let a;do a=r+i++;while(this._edges.has(a));return a};kt(this,"_attributes",{}),kt(this,"_nodes",new Map),kt(this,"_edges",new Map),kt(this,"_directedSize",0),kt(this,"_undirectedSize",0),kt(this,"_directedSelfLoopCount",0),kt(this,"_undirectedSelfLoopCount",0),kt(this,"_edgeKeyGenerator",o),kt(this,"_options",e),Ys.forEach(a=>kt(this,a,this[a])),Yt(this,"order",()=>this._nodes.size),Yt(this,"size",()=>this._edges.size),Yt(this,"directedSize",()=>this._directedSize),Yt(this,"undirectedSize",()=>this._undirectedSize),Yt(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Yt(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Yt(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Yt(this,"multi",this._options.multi),Yt(this,"type",this._options.type),Yt(this,"allowSelfLoops",this._options.allowSelfLoops),Yt(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&!i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.out.hasOwnProperty(n):!1}throw new O(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.undirected.hasOwnProperty(n):!1}throw new O(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const r=""+e;return this._edges.has(r)}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?typeof r.out<"u"&&r.out.hasOwnProperty(n)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(n):!1}throw new O(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new U("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(e);if(!r)throw new D(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new D(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||void 0;if(i)return i.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new U("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(e);if(!r)throw new D(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new D(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const i=r.undirected&&r.undirected[n]||void 0;if(i)return i.key}edge(e,n){if(this.multi)throw new U("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new D(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new D(`Graph.edge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||r.undirected&&r.undirected[n]||void 0;if(i)return i.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new D(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in||n in r.out}areOutNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new D(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.out}areInNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new D(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new D(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in r.undirected}areNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new D(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in r.in||n in r.out)||this.type!=="directed"&&n in r.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new D(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.in||this.type!=="directed"&&n in r.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new D(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.out||this.type!=="directed"&&n in r.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new D(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new D(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new D(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new D(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new D(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree),r}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new D(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.outDegree),r}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new D(`Graph.degree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree),r}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new D(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new D(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new D(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new D(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new D(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree,i+=n.directedLoops),r-i}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new D(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.outDegree,i+=n.directedLoops),r-i}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new D(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree,i+=n.directedLoops*2),r-i}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new D(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new D(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new D(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const r=this._edges.get(n);if(!r)throw new D(`Graph.opposite: could not find the "${n}" edge in the graph.`);const i=r.source.key,o=r.target.key;if(e===i)return o;if(e===o)return i;throw new D(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${i}, ${o}).`)}hasExtremity(e,n){e=""+e,n=""+n;const r=this._edges.get(e);if(!r)throw new D(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return r.source.key===n||r.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new D(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new D(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new D(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return Uw(this,e,n).key}mergeNode(e,n){if(n&&!mt(n))throw new O(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let r=this._nodes.get(e);return r?(n&&(dt(r.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:r.attributes,data:n})),[e,!1]):(r=new this.NodeDataClass(e,n),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new O(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let r=this._nodes.get(e);if(r){if(n){const o=r.attributes;r.attributes=n(o),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:r.attributes})}return[e,!1]}const i=n?n({}):{};return r=new this.NodeDataClass(e,i),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:i}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new D(`Graph.dropNode: could not find the "${e}" node in the graph.`);let r;if(this.type!=="undirected"){for(const i in n.out){r=n.out[i];do Pe(this,r),r=r.next;while(r)}for(const i in n.in){r=n.in[i];do Pe(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const i in n.undirected){r=n.undirected[i];do Pe(this,r),r=r.next;while(r)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const r=""+arguments[0],i=""+arguments[1];if(n=Bt(this,r,i,this.type),!n)throw new D(`Graph.dropEdge: could not find the "${r}" -> "${i}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new D(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return Pe(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new U("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new U("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const r=Bt(this,e,n,"directed");if(!r)throw new D(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Pe(this,r),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new U("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new U("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=Bt(this,e,n,"undirected");if(!r)throw new D(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Pe(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new O("Graph.updateAttribute: updater should be a function.");const r=this._attributes[e];return this._attributes[e]=n(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!mt(e))throw new O("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!mt(e))throw new O("Graph.mergeAttributes: provided attributes are not a plain object.");return dt(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new O("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new O("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!Ws(n))throw new O("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let i,o;for(;i=r.next(),i.done!==!0;)o=i.value,o.attributes=e(o.key,o.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new O("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!Ws(n))throw new O("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let i,o,a,s;for(;i=r.next(),i.done!==!0;)o=i.value,a=o.source,s=o.target,o.attributes=e(o.key,o.attributes,a.key,s.key,a.attributes,s.attributes,o.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new O("Graph.forEachAdjacencyEntry: expecting a callback.");Qn(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new O("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Qn(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new O("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Qn(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new O("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Qn(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):th(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new O("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)}findNode(e){if(typeof e!="function")throw new O("Graph.findNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return i.key}mapNodes(e){if(typeof e!="function")throw new O("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let r,i;const o=new Array(this.order);let a=0;for(;r=n.next(),r.done!==!0;)i=r.value,o[a++]=e(i.key,i.attributes);return o}someNode(e){if(typeof e!="function")throw new O("Graph.someNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new O("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,!e(i.key,i.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new O("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let r,i;const o=[];for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)&&o.push(i.key);return o}reduceNodes(e,n){if(typeof e!="function")throw new O("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new O("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=n;const i=this._nodes.values();let o,a;for(;o=i.next(),o.done!==!0;)a=o.value,r=e(r,a.key,a.attributes);return r}nodeEntries(){const e=this._nodes.values();return new Dt(()=>{const n=e.next();if(n.done)return n;const r=n.value;return{value:{node:r.key,attributes:r.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((i,o)=>{e[n++]=$w(o,i)});const r=new Array(this._edges.size);return n=0,this._edges.forEach((i,o)=>{r[n++]=Fw(this.type,o,i)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:r}}import(e,n=!1){if(e instanceof J)return e.forEachNode((u,c)=>{n?this.mergeNode(u,c):this.addNode(u,c)}),e.forEachEdge((u,c,h,l,f,d,p)=>{n?p?this.mergeUndirectedEdgeWithKey(u,h,l,c):this.mergeDirectedEdgeWithKey(u,h,l,c):p?this.addUndirectedEdgeWithKey(u,h,l,c):this.addDirectedEdgeWithKey(u,h,l,c)}),this;if(!mt(e))throw new O("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!mt(e.attributes))throw new O("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let r,i,o,a,s;if(e.nodes){if(o=e.nodes,!Array.isArray(o))throw new O("Graph.import: invalid nodes. Expecting an array.");for(r=0,i=o.length;r<i;r++){a=o[r],Ow(a);const{key:u,attributes:c}=a;n?this.mergeNode(u,c):this.addNode(u,c)}}if(e.edges){let u=!1;if(this.type==="undirected"&&(u=!0),o=e.edges,!Array.isArray(o))throw new O("Graph.import: invalid edges. Expecting an array.");for(r=0,i=o.length;r<i;r++){s=o[r],Iw(s);const{source:c,target:h,attributes:l,undirected:f=u}=s;let d;"key"in s?(d=n?f?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:f?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,d.call(this,s.key,c,h,l)):(d=n?f?this.mergeUndirectedEdge:this.mergeDirectedEdge:f?this.addUndirectedEdge:this.addDirectedEdge,d.call(this,c,h,l))}}return this}nullCopy(e){const n=new J(dt({},this._options,e));return n.replaceAttributes(dt({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((r,i)=>{const o=dt({},r.attributes);r=new n.NodeDataClass(i,o),n._nodes.set(i,r)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new U(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new U("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new U("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),r=this._edges.values();let i,o;for(;i=r.next(),i.done!==!0;)o=i.value,ch(n,"copy",!1,o.undirected,o.key,o.source.key,o.target.key,dt({},o.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((o,a)=>{e[a]=o.attributes});const n={},r={};this._edges.forEach((o,a)=>{const s=o.undirected?"--":"->";let u="",c=o.source.key,h=o.target.key,l;o.undirected&&c>h&&(l=c,c=h,h=l);const f=`(${c})${s}(${h})`;a.startsWith("geid_")?this.multi&&(typeof r[f]>"u"?r[f]=0:r[f]++,u+=`${r[f]}. `):u+=`[${a}]: `,u+=f,n[u]=o.attributes});const i={};for(const o in this)this.hasOwnProperty(o)&&!Ys.has(o)&&typeof this[o]!="function"&&typeof o!="symbol"&&(i[o]=this[o]);return i.attributes=this._attributes,i.nodes=e,i.edges=n,kt(i,"constructor",this.constructor),i}}typeof Symbol<"u"&&(J.prototype[Symbol.for("nodejs.util.inspect.custom")]=J.prototype.inspect);Gw.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),r=e==="add"?ch:Bw;t.generateKey?J.prototype[n]=function(i,o,a){return r(this,n,!0,(t.type||this.type)==="undirected",null,i,o,a,e==="update")}:J.prototype[n]=function(i,o,a,s){return r(this,n,!1,(t.type||this.type)==="undirected",i,o,a,s,e==="update")}})});K_(J);uw(J);Sw(J);Lw(J);class hh extends J{constructor(e){const n=dt({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new O("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new O('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class lh extends J{constructor(e){const n=dt({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new O("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new O('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class fh extends J{constructor(e){const n=dt({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new O("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class dh extends J{constructor(e){const n=dt({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new O("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new O('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class ph extends J{constructor(e){const n=dt({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new O("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new O('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function rn(t){t.from=function(e,n){const r=dt({},e.options,n),i=new t(r);return i.import(e),i}}rn(J);rn(hh);rn(lh);rn(fh);rn(dh);rn(ph);J.Graph=J;J.DirectedGraph=hh;J.UndirectedGraph=lh;J.MultiGraph=fh;J.MultiDirectedGraph=dh;J.MultiUndirectedGraph=ph;J.InvalidArgumentsGraphError=O;J.NotFoundGraphError=D;J.UsageGraphError=U;var ee={},Xo={},gh=function(e,n){var r=n.length;if(r!==0){var i=e.length;e.length+=r;for(var o=0;o<r;o++)e[i+o]=n[o]}},Xr={},Zr={},B={},Hw=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},vt={};Object.defineProperty(vt,"__esModule",{value:!0});vt.multiplyVec2=vt.multiply=vt.translate=vt.rotate=vt.scale=vt.identity=void 0;function Ww(){return Float32Array.of(1,0,0,0,1,0,0,0,1)}vt.identity=Ww;function Yw(t,e,n){return t[0]=e,t[4]=typeof n=="number"?n:e,t}vt.scale=Yw;function qw(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[3]=-n,t[4]=r,t}vt.rotate=qw;function jw(t,e,n){return t[6]=e,t[7]=n,t}vt.translate=jw;function Vw(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],h=t[8],l=e[0],f=e[1],d=e[2],p=e[3],v=e[4],g=e[5],m=e[6],y=e[7],E=e[8];return t[0]=l*n+f*o+d*u,t[1]=l*r+f*a+d*c,t[2]=l*i+f*s+d*h,t[3]=p*n+v*o+g*u,t[4]=p*r+v*a+g*c,t[5]=p*i+v*s+g*h,t[6]=m*n+y*o+E*u,t[7]=m*r+y*a+E*c,t[8]=m*i+y*s+E*h,t}vt.multiply=Vw;function Xw(t,e,n){n===void 0&&(n=1);var r=t[0],i=t[1],o=t[3],a=t[4],s=t[6],u=t[7],c=e.x,h=e.y;return{x:c*r+h*o+s*n,y:c*i+h*a+u*n}}vt.multiplyVec2=Xw;var Kr={};Object.defineProperty(Kr,"__esModule",{value:!0});Kr.HTML_COLORS=void 0;Kr.HTML_COLORS={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"};var js=$&&$.__read||function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},Zw=$&&$.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(B,"__esModule",{value:!0});B.validateGraph=B.canUse32BitsIndices=B.extractPixel=B.getMatrixImpact=B.matrixFromCamera=B.getCorrectionRatio=B.floatColor=B.floatArrayColor=B.parseColor=B.zIndexOrdering=B.createNormalizationFunction=B.graphExtent=B.getPixelRatio=B.createElement=B.cancelFrame=B.requestFrame=B.assignDeep=B.assign=B.isPlainObject=void 0;var Kw=Zw(Hw),et=vt,fr=Kr;function mh(t){return typeof t=="object"&&t!==null&&t.constructor===Object}B.isPlainObject=mh;function Qw(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t=t||{};for(var r=0,i=e.length;r<i;r++){var o=e[r];o&&Object.assign(t,o)}return t}B.assign=Qw;function yh(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t=t||{};for(var r=0,i=e.length;r<i;r++){var o=e[r];if(o)for(var a in o)mh(o[a])?t[a]=yh(t[a],o[a]):t[a]=o[a]}return t}B.assignDeep=yh;B.requestFrame=typeof requestAnimationFrame<"u"?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,0)};B.cancelFrame=typeof cancelAnimationFrame<"u"?function(t){return cancelAnimationFrame(t)}:function(t){return clearTimeout(t)};function Jw(t,e,n){var r=document.createElement(t);if(e)for(var i in e)r.style[i]=e[i];if(n)for(var i in n)r.setAttribute(i,n[i]);return r}B.createElement=Jw;function t1(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1}B.getPixelRatio=t1;function e1(t){if(!t.order)return{x:[0,1],y:[0,1]};var e=1/0,n=-1/0,r=1/0,i=-1/0;return t.forEachNode(function(o,a){var s=a.x,u=a.y;s<e&&(e=s),s>n&&(n=s),u<r&&(r=u),u>i&&(i=u)}),{x:[e,n],y:[r,i]}}B.graphExtent=e1;function n1(t){var e=js(t.x,2),n=e[0],r=e[1],i=js(t.y,2),o=i[0],a=i[1],s=Math.max(r-n,a-o),u=(r+n)/2,c=(a+o)/2;(s===0||Math.abs(s)===1/0||isNaN(s))&&(s=1),isNaN(u)&&(u=0),isNaN(c)&&(c=0);var h=function(l){return{x:.5+(l.x-u)/s,y:.5+(l.y-c)/s}};return h.applyTo=function(l){l.x=.5+(l.x-u)/s,l.y=.5+(l.y-c)/s},h.inverse=function(l){return{x:u+s*(l.x-.5),y:c+s*(l.y-.5)}},h.ratio=s,h}B.createNormalizationFunction=n1;function r1(t,e,n){return n.sort(function(r,i){var o=e(r)||0,a=e(i)||0;return o<a?-1:o>a?1:0})}B.zIndexOrdering=r1;var vh=new Int8Array(4),i1=new Int32Array(vh.buffer,0,1),o1=new Float32Array(vh.buffer,0,1),a1=/^\s*rgba?\s*\(/,s1=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function Zo(t){var e=0,n=0,r=0,i=1;if(t[0]==="#")t.length===4?(e=parseInt(t.charAt(1)+t.charAt(1),16),n=parseInt(t.charAt(2)+t.charAt(2),16),r=parseInt(t.charAt(3)+t.charAt(3),16)):(e=parseInt(t.charAt(1)+t.charAt(2),16),n=parseInt(t.charAt(3)+t.charAt(4),16),r=parseInt(t.charAt(5)+t.charAt(6),16)),t.length===9&&(i=parseInt(t.charAt(7)+t.charAt(8),16)/255);else if(a1.test(t)){var o=t.match(s1);o&&(e=+o[1],n=+o[2],r=+o[3],o[4]&&(i=+o[4]))}return{r:e,g:n,b:r,a:i}}B.parseColor=Zo;var Ye={};for(var Jn in fr.HTML_COLORS)Ye[Jn]=_h(fr.HTML_COLORS[Jn]),Ye[fr.HTML_COLORS[Jn]]=Ye[Jn];function u1(t){t=fr.HTML_COLORS[t]||t;var e=Zo(t),n=e.r,r=e.g,i=e.b,o=e.a;return new Float32Array([n/255,r/255,i/255,o])}B.floatArrayColor=u1;function _h(t){if(typeof Ye[t]<"u")return Ye[t];var e=Zo(t),n=e.r,r=e.g,i=e.b,o=e.a;o=o*255|0,i1[0]=(o<<24|i<<16|r<<8|n)&4278190079;var a=o1[0];return Ye[t]=a,a}B.floatColor=_h;function wh(t,e){var n=t.height/t.width,r=e.height/e.width;return n<1&&r>1||n>1&&r<1?1:Math.min(Math.max(r,1/r),Math.max(1/n,n))}B.getCorrectionRatio=wh;function c1(t,e,n,r,i){var o=t.angle,a=t.ratio,s=t.x,u=t.y,c=e.width,h=e.height,l=(0,et.identity)(),f=Math.min(c,h)-2*r,d=wh(e,n);return i?((0,et.multiply)(l,(0,et.translate)((0,et.identity)(),s,u)),(0,et.multiply)(l,(0,et.scale)((0,et.identity)(),a)),(0,et.multiply)(l,(0,et.rotate)((0,et.identity)(),o)),(0,et.multiply)(l,(0,et.scale)((0,et.identity)(),c/f/2/d,h/f/2/d))):((0,et.multiply)(l,(0,et.scale)((0,et.identity)(),2*(f/c)*d,2*(f/h)*d)),(0,et.multiply)(l,(0,et.rotate)((0,et.identity)(),-o)),(0,et.multiply)(l,(0,et.scale)((0,et.identity)(),1/a)),(0,et.multiply)(l,(0,et.translate)((0,et.identity)(),-s,-u))),l}B.matrixFromCamera=c1;function h1(t,e,n){var r=(0,et.multiplyVec2)(t,{x:Math.cos(e.angle),y:Math.sin(e.angle)},0),i=r.x,o=r.y;return 1/Math.sqrt(Math.pow(i,2)+Math.pow(o,2))/n.width}B.getMatrixImpact=h1;function l1(t,e,n,r){var i=r||new Uint8Array(4);return t.readPixels(e,n,1,1,t.RGBA,t.UNSIGNED_BYTE,i),i}B.extractPixel=l1;function f1(t){var e=typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext;return e||!!t.getExtension("OES_element_index_uint")}B.canUse32BitsIndices=f1;function d1(t){if(!(0,Kw.default)(t))throw new Error("Sigma: invalid graph instance.");t.forEachNode(function(e,n){if(!Number.isFinite(n.x)||!Number.isFinite(n.y))throw new Error("Sigma: Coordinates of node ".concat(e," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}B.validateGraph=d1;var Ko={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.cubicInOut=t.cubicOut=t.cubicIn=t.quadraticInOut=t.quadraticOut=t.quadraticIn=t.linear=void 0;var e=function(c){return c};t.linear=e;var n=function(c){return c*c};t.quadraticIn=n;var r=function(c){return c*(2-c)};t.quadraticOut=r;var i=function(c){return(c*=2)<1?.5*c*c:-.5*(--c*(c-2)-1)};t.quadraticInOut=i;var o=function(c){return c*c*c};t.cubicIn=o;var a=function(c){return--c*c*c+1};t.cubicOut=a;var s=function(c){return(c*=2)<1?.5*c*c*c:.5*((c-=2)*c*c+2)};t.cubicInOut=s;var u={linear:t.linear,quadraticIn:t.quadraticIn,quadraticOut:t.quadraticOut,quadraticInOut:t.quadraticInOut,cubicIn:t.cubicIn,cubicOut:t.cubicOut,cubicInOut:t.cubicInOut};t.default=u})(Ko);(function(t){var e=$&&$.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(t,"__esModule",{value:!0}),t.animateNodes=t.ANIMATE_DEFAULTS=void 0;var n=B,r=e(Ko);t.ANIMATE_DEFAULTS={easing:"quadraticInOut",duration:150};function i(o,a,s,u){var c=Object.assign({},t.ANIMATE_DEFAULTS,s),h=typeof c.easing=="function"?c.easing:r.default[c.easing],l=Date.now(),f={};for(var d in a){var p=a[d];f[d]={};for(var v in p)f[d][v]=o.getNodeAttribute(d,v)}var g=null,m=function(){g=null;var y=(Date.now()-l)/c.duration;if(y>=1){for(var E in a){var C=a[E];for(var M in C)o.setNodeAttribute(E,M,C[M])}typeof u=="function"&&u();return}y=h(y);for(var E in a){var C=a[E],S=f[E];for(var M in C)o.setNodeAttribute(E,M,C[M]*y+S[M]*(1-y))}g=(0,n.requestFrame)(m)};return m(),function(){g&&(0,n.cancelFrame)(g)}}t.animateNodes=i})(Zr);var on={},p1=$&&$.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(on,"__esModule",{value:!0});on.TypedEventEmitter=void 0;var g1=Fn,m1=function(t){p1(e,t);function e(){var n=t.call(this)||this;return n.rawEmitter=n,n}return e}(g1.EventEmitter);on.TypedEventEmitter=m1;var y1=$&&$.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),v1=$&&$.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xr,"__esModule",{value:!0});var _1=Zr,w1=v1(Ko),Si=B,b1=on,tr=1.5,x1=function(t){y1(e,t);function e(){var n=t.call(this)||this;return n.x=.5,n.y=.5,n.angle=0,n.ratio=1,n.minRatio=null,n.maxRatio=null,n.nextFrame=null,n.previousState=null,n.enabled=!0,n.previousState=n.getState(),n}return e.from=function(n){var r=new e;return r.setState(n)},e.prototype.enable=function(){return this.enabled=!0,this},e.prototype.disable=function(){return this.enabled=!1,this},e.prototype.getState=function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}},e.prototype.hasState=function(n){return this.x===n.x&&this.y===n.y&&this.ratio===n.ratio&&this.angle===n.angle},e.prototype.getPreviousState=function(){var n=this.previousState;return n?{x:n.x,y:n.y,angle:n.angle,ratio:n.ratio}:null},e.prototype.getBoundedRatio=function(n){var r=n;return typeof this.minRatio=="number"&&(r=Math.max(r,this.minRatio)),typeof this.maxRatio=="number"&&(r=Math.min(r,this.maxRatio)),r},e.prototype.validateState=function(n){var r={};return typeof n.x=="number"&&(r.x=n.x),typeof n.y=="number"&&(r.y=n.y),typeof n.angle=="number"&&(r.angle=n.angle),typeof n.ratio=="number"&&(r.ratio=this.getBoundedRatio(n.ratio)),r},e.prototype.isAnimated=function(){return!!this.nextFrame},e.prototype.setState=function(n){if(!this.enabled)return this;this.previousState=this.getState();var r=this.validateState(n);return typeof r.x=="number"&&(this.x=r.x),typeof r.y=="number"&&(this.y=r.y),typeof r.angle=="number"&&(this.angle=r.angle),typeof r.ratio=="number"&&(this.ratio=r.ratio),this.hasState(this.previousState)||this.emit("updated",this.getState()),this},e.prototype.updateState=function(n){return this.setState(n(this.getState())),this},e.prototype.animate=function(n,r,i){var o=this;if(this.enabled){var a=Object.assign({},_1.ANIMATE_DEFAULTS,r),s=this.validateState(n),u=typeof a.easing=="function"?a.easing:w1.default[a.easing],c=Date.now(),h=this.getState(),l=function(){var f=(Date.now()-c)/a.duration;if(f>=1){o.nextFrame=null,o.setState(s),o.animationCallback&&(o.animationCallback.call(null),o.animationCallback=void 0);return}var d=u(f),p={};typeof s.x=="number"&&(p.x=h.x+(s.x-h.x)*d),typeof s.y=="number"&&(p.y=h.y+(s.y-h.y)*d),typeof s.angle=="number"&&(p.angle=h.angle+(s.angle-h.angle)*d),typeof s.ratio=="number"&&(p.ratio=h.ratio+(s.ratio-h.ratio)*d),o.setState(p),o.nextFrame=(0,Si.requestFrame)(l)};this.nextFrame?((0,Si.cancelFrame)(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=(0,Si.requestFrame)(l)):l(),this.animationCallback=i}},e.prototype.animatedZoom=function(n){if(!n)this.animate({ratio:this.ratio/tr});else{if(typeof n=="number")return this.animate({ratio:this.ratio/n});this.animate({ratio:this.ratio/(n.factor||tr)},n)}},e.prototype.animatedUnzoom=function(n){if(!n)this.animate({ratio:this.ratio*tr});else{if(typeof n=="number")return this.animate({ratio:this.ratio*n});this.animate({ratio:this.ratio*(n.factor||tr)},n)}},e.prototype.animatedReset=function(n){this.animate({x:.5,y:.5,ratio:1,angle:0},n)},e.prototype.copy=function(){return e.from(this.getState())},e}(b1.TypedEventEmitter);Xr.default=x1;var Qr={},yt={},E1=$&&$.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Je=$&&$.__assign||function(){return Je=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Je.apply(this,arguments)};Object.defineProperty(yt,"__esModule",{value:!0});yt.getWheelDelta=yt.getTouchCoords=yt.getTouchesArray=yt.getWheelCoords=yt.getMouseCoords=yt.getPosition=void 0;var S1=on;function Qo(t,e){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}yt.getPosition=Qo;function bh(t,e){var n=Je(Je({},Qo(t,e)),{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){n.sigmaDefaultPrevented=!0},original:t});return n}yt.getMouseCoords=bh;function C1(t,e){return Je(Je({},bh(t,e)),{delta:Eh(t)})}yt.getWheelCoords=C1;var M1=2;function xh(t){for(var e=[],n=0,r=Math.min(t.length,M1);n<r;n++)e.push(t[n]);return e}yt.getTouchesArray=xh;function A1(t,e){return{touches:xh(t.touches).map(function(n){return Qo(n,e)}),original:t}}yt.getTouchCoords=A1;function Eh(t){if(typeof t.deltaY<"u")return t.deltaY*-3/360;if(typeof t.detail<"u")return t.detail/-9;throw new Error("Captor: could not extract delta from event.")}yt.getWheelDelta=Eh;var T1=function(t){E1(e,t);function e(n,r){var i=t.call(this)||this;return i.container=n,i.renderer=r,i}return e}(S1.TypedEventEmitter);yt.default=T1;var N1=$&&$.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),D1=$&&$.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),R1=$&&$.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),L1=$&&$.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&D1(e,t,n);return R1(e,t),e};Object.defineProperty(Qr,"__esModule",{value:!0});var Ct=L1(yt),$1=100,F1=3,O1=200,Vs=3,Xs=250,Zs=1.7,I1=300,k1=2.2,P1=200,G1=function(t){N1(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.enabled=!0,i.draggedEvents=0,i.downStartTime=null,i.lastMouseX=null,i.lastMouseY=null,i.isMouseDown=!1,i.isMoving=!1,i.movingTimeout=null,i.startCameraState=null,i.clicks=0,i.doubleClickTimeout=null,i.currentWheelDirection=0,i.handleClick=i.handleClick.bind(i),i.handleRightClick=i.handleRightClick.bind(i),i.handleDown=i.handleDown.bind(i),i.handleUp=i.handleUp.bind(i),i.handleMove=i.handleMove.bind(i),i.handleWheel=i.handleWheel.bind(i),i.handleOut=i.handleOut.bind(i),n.addEventListener("click",i.handleClick,!1),n.addEventListener("contextmenu",i.handleRightClick,!1),n.addEventListener("mousedown",i.handleDown,!1),n.addEventListener("wheel",i.handleWheel,!1),n.addEventListener("mouseout",i.handleOut,!1),document.addEventListener("mousemove",i.handleMove,!1),document.addEventListener("mouseup",i.handleUp,!1),i}return e.prototype.kill=function(){var n=this.container;n.removeEventListener("click",this.handleClick),n.removeEventListener("contextmenu",this.handleRightClick),n.removeEventListener("mousedown",this.handleDown),n.removeEventListener("wheel",this.handleWheel),n.removeEventListener("mouseout",this.handleOut),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)},e.prototype.handleClick=function(n){var r=this;if(this.enabled){if(this.clicks++,this.clicks===2)return this.clicks=0,typeof this.doubleClickTimeout=="number"&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(n);setTimeout(function(){r.clicks=0,r.doubleClickTimeout=null},I1),this.draggedEvents<F1&&this.emit("click",(0,Ct.getMouseCoords)(n,this.container))}},e.prototype.handleRightClick=function(n){this.enabled&&this.emit("rightClick",(0,Ct.getMouseCoords)(n,this.container))},e.prototype.handleDoubleClick=function(n){if(this.enabled){n.preventDefault(),n.stopPropagation();var r=(0,Ct.getMouseCoords)(n,this.container);if(this.emit("doubleClick",r),!r.sigmaDefaultPrevented){var i=this.renderer.getCamera(),o=i.getBoundedRatio(i.getState().ratio/k1);i.animate(this.renderer.getViewportZoomedState((0,Ct.getPosition)(n,this.container),o),{easing:"quadraticInOut",duration:P1})}}},e.prototype.handleDown=function(n){if(this.enabled){if(n.button===0){this.startCameraState=this.renderer.getCamera().getState();var r=(0,Ct.getPosition)(n,this.container),i=r.x,o=r.y;this.lastMouseX=i,this.lastMouseY=o,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0}this.emit("mousedown",(0,Ct.getMouseCoords)(n,this.container))}},e.prototype.handleUp=function(n){var r=this;if(!(!this.enabled||!this.isMouseDown)){var i=this.renderer.getCamera();this.isMouseDown=!1,typeof this.movingTimeout=="number"&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var o=(0,Ct.getPosition)(n,this.container),a=o.x,s=o.y,u=i.getState(),c=i.getPreviousState()||{x:0,y:0};this.isMoving?i.animate({x:u.x+Vs*(u.x-c.x),y:u.y+Vs*(u.y-c.y)},{duration:O1,easing:"quadraticOut"}):(this.lastMouseX!==a||this.lastMouseY!==s)&&i.setState({x:u.x,y:u.y}),this.isMoving=!1,setTimeout(function(){r.draggedEvents=0,r.renderer.refresh()},0),this.emit("mouseup",(0,Ct.getMouseCoords)(n,this.container))}},e.prototype.handleMove=function(n){var r=this;if(this.enabled){var i=(0,Ct.getMouseCoords)(n,this.container);if(this.emit("mousemovebody",i),n.target===this.container&&this.emit("mousemove",i),!i.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,typeof this.movingTimeout=="number"&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){r.movingTimeout=null,r.isMoving=!1},$1);var o=this.renderer.getCamera(),a=(0,Ct.getPosition)(n,this.container),s=a.x,u=a.y,c=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),h=this.renderer.viewportToFramedGraph({x:s,y:u}),l=c.x-h.x,f=c.y-h.y,d=o.getState(),p=d.x+l,v=d.y+f;o.setState({x:p,y:v}),this.lastMouseX=s,this.lastMouseY=u,n.preventDefault(),n.stopPropagation()}}},e.prototype.handleWheel=function(n){var r=this;if(this.enabled){n.preventDefault(),n.stopPropagation();var i=(0,Ct.getWheelDelta)(n);if(i){var o=(0,Ct.getWheelCoords)(n,this.container);if(this.emit("wheel",o),!o.sigmaDefaultPrevented){var a=i>0?1/Zs:Zs,s=this.renderer.getCamera(),u=s.getBoundedRatio(s.getState().ratio*a),c=i>0?1:-1,h=Date.now();this.currentWheelDirection===c&&this.lastWheelTriggerTime&&h-this.lastWheelTriggerTime<Xs/5||(s.animate(this.renderer.getViewportZoomedState((0,Ct.getPosition)(n,this.container),u),{easing:"quadraticOut",duration:Xs},function(){r.currentWheelDirection=0}),this.currentWheelDirection=c,this.lastWheelTriggerTime=h)}}}},e.prototype.handleOut=function(){},e}(Ct.default);Qr.default=G1;var Ut={},z1=$&&$.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ut,"__esModule",{value:!0});Ut.rectangleCollidesWithQuad=Ut.squareCollidesWithQuad=Ut.getCircumscribedAlignedRectangle=Ut.isRectangleAligned=void 0;var oo=z1(gh),Nt=4,pn=5,Be=5460,_t=0,wt=1,bt=2,xt=3,U1=1,B1=2,H1=3,W1=4,Ks=!1;function Sh(t){return t.x1===t.x2||t.y1===t.y2}Ut.isRectangleAligned=Sh;function Ch(t){var e=Math.sqrt(Math.pow(t.x2-t.x1,2)+Math.pow(t.y2-t.y1,2)),n={x:(t.y1-t.y2)*t.height/e,y:(t.x2-t.x1)*t.height/e},r={x:t.x1,y:t.y1},i={x:t.x2,y:t.y2},o={x:t.x1+n.x,y:t.y1+n.y},a={x:t.x2+n.x,y:t.y2+n.y},s=Math.min(r.x,i.x,o.x,a.x),u=Math.max(r.x,i.x,o.x,a.x),c=Math.min(r.y,i.y,o.y,a.y),h=Math.max(r.y,i.y,o.y,a.y);return{x1:s,y1:c,x2:u,y2:c,height:h-c}}Ut.getCircumscribedAlignedRectangle=Ch;function Cn(t,e,n,r,i,o,a){return t<r+o&&t+n>r&&e<i+a&&e+n>i}Ut.squareCollidesWithQuad=Cn;function Mn(t,e,n,r,i,o,a,s){return t<i+a&&t+n>i&&e<o+s&&e+r>o}Ut.rectangleCollidesWithQuad=Mn;function Y1(t,e,n,r,i,o){var a=n+i/2,s=r+o/2,u=e<s,c=t<a;return u?c?U1:B1:c?H1:W1}function q1(t,e){for(var n=[0,0];n.length;){var r=n.pop(),i=n.pop(),o=4*i+Nt,a=4*i+2*Nt,s=4*i+3*Nt,u=4*i+4*Nt,c=e[i+_t],h=e[i+wt],l=e[i+bt],f=e[i+xt],d=l/2,p=f/2;e[o+_t]=c,e[o+wt]=h,e[o+bt]=d,e[o+xt]=p,e[a+_t]=c+d,e[a+wt]=h,e[a+bt]=d,e[a+xt]=p,e[s+_t]=c,e[s+wt]=h+p,e[s+bt]=d,e[s+xt]=p,e[u+_t]=c+d,e[u+wt]=h+p,e[u+bt]=d,e[u+xt]=p,r<t-1&&(n.push(u,r+1),n.push(s,r+1),n.push(a,r+1),n.push(o,r+1))}}function j1(t,e,n,r,i,o,a){for(var s=i-a,u=o-a,c=a*2,h=0,l=0;;){if(h>=t){n[l]=n[l]||[],n[l].push(r);return}var f=4*l+Nt,d=4*l+2*Nt,p=4*l+3*Nt,v=4*l+4*Nt,g=Cn(s,u,c,e[f+_t],e[f+wt],e[f+bt],e[f+xt]),m=Cn(s,u,c,e[d+_t],e[d+wt],e[d+bt],e[d+xt]),y=Cn(s,u,c,e[p+_t],e[p+wt],e[p+bt],e[p+xt]),E=Cn(s,u,c,e[v+_t],e[v+wt],e[v+bt],e[v+xt]),C=[g,m,y,E].reduce(function(M,S){return S?M+1:M},0);if(C===0&&h===0){n[Be].push(r),!Ks&&n[Be].length>=5&&(Ks=!0,console.warn("sigma/quadtree.insertNode: At least 5 nodes are outside the global quadtree zone. You might have a problem with the normalization function or the custom bounding box."));return}if(C===0)throw new Error("sigma/quadtree.insertNode: no collision (level: ".concat(h,", key: ").concat(r,", x: ").concat(i,", y: ").concat(o,", size: ").concat(a,")."));if(C===3)throw new Error("sigma/quadtree.insertNode: 3 impossible collisions (level: ".concat(h,", key: ").concat(r,", x: ").concat(i,", y: ").concat(o,", size: ").concat(a,")."));if(C>1){n[l]=n[l]||[],n[l].push(r);return}else h++;g&&(l=f),m&&(l=d),y&&(l=p),E&&(l=v)}}function V1(t,e,n,r,i,o,a){for(var s=[0,0],u=[],c;s.length;){var h=s.pop(),l=s.pop();if(c=n[l],c&&(0,oo.default)(u,c),!(h>=t)){var f=4*l+Nt,d=4*l+2*Nt,p=4*l+3*Nt,v=4*l+4*Nt,g=Mn(r,i,o,a,e[f+_t],e[f+wt],e[f+bt],e[f+xt]),m=Mn(r,i,o,a,e[d+_t],e[d+wt],e[d+bt],e[d+xt]),y=Mn(r,i,o,a,e[p+_t],e[p+wt],e[p+bt],e[p+xt]),E=Mn(r,i,o,a,e[v+_t],e[v+wt],e[v+bt],e[v+xt]);g&&s.push(f,h+1),m&&s.push(d,h+1),y&&s.push(p,h+1),E&&s.push(v,h+1)}}return u}var X1=function(){function t(e){var n;e===void 0&&(e={}),this.containers=(n={},n[Be]=[],n),this.cache=null,this.lastRectangle=null;var r=Math.pow(4,pn);this.data=new Float32Array(Nt*((4*r-1)/3)),e.boundaries?this.resize(e.boundaries):this.resize({x:0,y:0,width:1,height:1})}return t.prototype.add=function(e,n,r,i){return j1(pn,this.data,this.containers,e,n,r,i),this},t.prototype.resize=function(e){this.clear(),this.data[_t]=e.x,this.data[wt]=e.y,this.data[bt]=e.width,this.data[xt]=e.height,q1(pn,this.data)},t.prototype.clear=function(){var e;return this.containers=(e={},e[Be]=[],e),this},t.prototype.point=function(e,n){var r=this.containers[Be].slice(),i=0,o=0;do{this.containers[i]&&(0,oo.default)(r,this.containers[i]);var a=Y1(e,n,this.data[i+_t],this.data[i+wt],this.data[i+bt],this.data[i+xt]);i=4*i+a*Nt,o++}while(o<=pn);return r},t.prototype.rectangle=function(e,n,r,i,o){var a=this.lastRectangle;return a&&e===a.x1&&r===a.x2&&n===a.y1&&i===a.y2&&o===a.height?this.cache:(this.lastRectangle={x1:e,y1:n,x2:r,y2:i,height:o},Sh(this.lastRectangle)||(this.lastRectangle=Ch(this.lastRectangle)),this.cache=V1(pn,this.data,this.containers,e,n,Math.abs(e-r)||Math.abs(n-i),o),(0,oo.default)(this.cache,this.containers[Be]),this.cache)},t}();Ut.default=X1;var tn={};Object.defineProperty(tn,"__esModule",{value:!0});tn.edgeLabelsToDisplayFromNodes=tn.LabelGrid=void 0;var Qs=function(){function t(e,n){this.key=e,this.size=n}return t.compare=function(e,n){return e.size>n.size?-1:e.size<n.size||e.key>n.key?1:-1},t}(),Z1=function(){function t(){this.width=0,this.height=0,this.cellSize=0,this.columns=0,this.rows=0,this.cells={}}return t.prototype.resizeAndClear=function(e,n){this.width=e.width,this.height=e.height,this.cellSize=n,this.columns=Math.ceil(e.width/n),this.rows=Math.ceil(e.height/n),this.cells={}},t.prototype.getIndex=function(e){var n=Math.floor(e.x/this.cellSize),r=Math.floor(e.y/this.cellSize);return r*this.columns+n},t.prototype.add=function(e,n,r){var i=new Qs(e,n),o=this.getIndex(r),a=this.cells[o];a||(a=[],this.cells[o]=a),a.push(i)},t.prototype.organize=function(){for(var e in this.cells){var n=this.cells[e];n.sort(Qs.compare)}},t.prototype.getLabelsToDisplay=function(e,n){var r=this.cellSize*this.cellSize,i=r/e/e,o=i*n/r,a=Math.ceil(o),s=[];for(var u in this.cells)for(var c=this.cells[u],h=0;h<Math.min(a,c.length);h++)s.push(c[h].key);return s},t}();tn.LabelGrid=Z1;function K1(t){var e=t.graph,n=t.hoveredNode,r=t.highlightedNodes,i=t.displayedNodeLabels,o=[];return e.forEachEdge(function(a,s,u,c){(u===n||c===n||r.has(u)||r.has(c)||i.has(u)&&i.has(c))&&o.push(a)}),o}tn.edgeLabelsToDisplayFromNodes=K1;var Mh={},Jr={};Object.defineProperty(Jr,"__esModule",{value:!0});function Q1(t,e,n){if(e.label){var r=n.labelSize,i=n.labelFont,o=n.labelWeight,a=n.labelColor.attribute?e[n.labelColor.attribute]||n.labelColor.color||"#000":n.labelColor.color;t.fillStyle=a,t.font="".concat(o," ").concat(r,"px ").concat(i),t.fillText(e.label,e.x+e.size+3,e.y+r/3)}}Jr.default=Q1;var Jo={},J1=$&&$.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Jo,"__esModule",{value:!0});var tb=J1(Jr);function eb(t,e,n){var r=n.labelSize,i=n.labelFont,o=n.labelWeight;t.font="".concat(o," ").concat(r,"px ").concat(i),t.fillStyle="#FFF",t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=8,t.shadowColor="#000";var a=2;if(typeof e.label=="string"){var s=t.measureText(e.label).width,u=Math.round(s+5),c=Math.round(r+2*a),h=Math.max(e.size,r/2)+a,l=Math.asin(c/2/h),f=Math.sqrt(Math.abs(Math.pow(h,2)-Math.pow(c/2,2)));t.beginPath(),t.moveTo(e.x+f,e.y+c/2),t.lineTo(e.x+h+u,e.y+c/2),t.lineTo(e.x+h+u,e.y-c/2),t.lineTo(e.x+f,e.y-c/2),t.arc(e.x,e.y,h,l,-l),t.closePath(),t.fill()}else t.beginPath(),t.arc(e.x,e.y,e.size+a,0,Math.PI*2),t.closePath(),t.fill();t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,(0,tb.default)(t,e,n)}Jo.default=eb;var ta={};Object.defineProperty(ta,"__esModule",{value:!0});function nb(t,e,n,r,i){var o=i.edgeLabelSize,a=i.edgeLabelFont,s=i.edgeLabelWeight,u=i.edgeLabelColor.attribute?e[i.edgeLabelColor.attribute]||i.edgeLabelColor.color||"#000":i.edgeLabelColor.color,c=e.label;if(c){t.fillStyle=u,t.font="".concat(s," ").concat(o,"px ").concat(a);var h=n.size,l=r.size,f=n.x,d=n.y,p=r.x,v=r.y,g=(f+p)/2,m=(d+v)/2,y=p-f,E=v-d,C=Math.sqrt(y*y+E*E);if(!(C<h+l)){f+=y*h/C,d+=E*h/C,p-=y*l/C,v-=E*l/C,g=(f+p)/2,m=(d+v)/2,y=p-f,E=v-d,C=Math.sqrt(y*y+E*E);var M=t.measureText(c).width;if(M>C){var S="";for(c=c+S,M=t.measureText(c).width;M>C&&c.length>1;)c=c.slice(0,-2)+S,M=t.measureText(c).width;if(c.length<4)return}var T;y>0?E>0?T=Math.acos(y/C):T=Math.asin(E/C):E>0?T=Math.acos(y/C)+Math.PI:T=Math.asin(y/C)+Math.PI/2,t.save(),t.translate(g,m),t.rotate(T),t.fillText(c,-M/2,e.size/2+o),t.restore()}}}ta.default=nb;var ea={},ye={},De={},ve={};Object.defineProperty(ve,"__esModule",{value:!0});ve.loadProgram=ve.loadFragmentShader=ve.loadVertexShader=void 0;function Ah(t,e,n){var r=t==="VERTEX"?e.VERTEX_SHADER:e.FRAGMENT_SHADER,i=e.createShader(r);if(i===null)throw new Error("loadShader: error while creating the shader");e.shaderSource(i,n),e.compileShader(i);var o=e.getShaderParameter(i,e.COMPILE_STATUS);if(!o){var a=e.getShaderInfoLog(i);throw e.deleteShader(i),new Error(`loadShader: error while compiling the shader:
`.concat(a,`
`).concat(n))}return i}function rb(t,e){return Ah("VERTEX",t,e)}ve.loadVertexShader=rb;function ib(t,e){return Ah("FRAGMENT",t,e)}ve.loadFragmentShader=ib;function ob(t,e){var n=t.createProgram();if(n===null)throw new Error("loadProgram: error while creating the program.");var r,i;for(r=0,i=e.length;r<i;r++)t.attachShader(n,e[r]);t.linkProgram(n);var o=t.getProgramParameter(n,t.LINK_STATUS);if(!o)throw t.deleteProgram(n),new Error("loadProgram: error while linking the program.");return n}ve.loadProgram=ob;var Kt;Object.defineProperty(De,"__esModule",{value:!0});De.Program=De.AbstractProgram=void 0;var ab=B,Ci=ve,sb=(Kt={},Kt[WebGL2RenderingContext.BOOL]=1,Kt[WebGL2RenderingContext.BYTE]=1,Kt[WebGL2RenderingContext.UNSIGNED_BYTE]=1,Kt[WebGL2RenderingContext.SHORT]=2,Kt[WebGL2RenderingContext.UNSIGNED_SHORT]=2,Kt[WebGL2RenderingContext.INT]=4,Kt[WebGL2RenderingContext.UNSIGNED_INT]=4,Kt[WebGL2RenderingContext.FLOAT]=4,Kt),ub=function(){function t(e,n){}return t}();De.AbstractProgram=ub;var cb=function(){function t(e,n){var r=this;this.array=new Float32Array,this.indicesArray=null,this.uniformLocations={},this.attributeLocations={},this.capacity=0,this.verticesCount=0;var i=this.getDefinition();this.VERTICES=i.VERTICES,this.ARRAY_ITEMS_PER_VERTEX=i.ARRAY_ITEMS_PER_VERTEX,this.VERTEX_SHADER_SOURCE=i.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=i.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=i.UNIFORMS,this.ATTRIBUTES=i.ATTRIBUTES,this.STRIDE=this.VERTICES*this.ARRAY_ITEMS_PER_VERTEX,this.gl=e,this.renderer=n;var o=e.createBuffer();if(o===null)throw new Error("Program: error while creating the webgl buffer.");this.buffer=o;var a=e.createBuffer();if(a===null)throw new Error("Program: error while creating the webgl indices buffer.");this.indicesBuffer=a,this.vertexShader=(0,Ci.loadVertexShader)(this.gl,this.VERTEX_SHADER_SOURCE),this.fragmentShader=(0,Ci.loadFragmentShader)(this.gl,this.FRAGMENT_SHADER_SOURCE),this.program=(0,Ci.loadProgram)(this.gl,[this.vertexShader,this.fragmentShader]),this.canUse32BitsIndices=(0,ab.canUse32BitsIndices)(this.gl),this.indicesType=this.canUse32BitsIndices?e.UNSIGNED_INT:e.UNSIGNED_SHORT,this.IndicesArray=this.canUse32BitsIndices?Uint32Array:Uint16Array,this.UNIFORMS.forEach(function(s){var u=r.gl.getUniformLocation(r.program,s);if(u===null)throw new Error('Program: error while getting location for uniform "'.concat(s,'".'));r.uniformLocations[s]=u}),this.ATTRIBUTES.forEach(function(s){var u=r.gl.getAttribLocation(r.program,s.name);if(u===-1)throw new Error('Program: error while getting location for attribute "'.concat(s.name,'".'));r.attributeLocations[s.name]=u})}return t.prototype.bind=function(){var e=this,n=this.gl;n.bindBuffer(n.ARRAY_BUFFER,this.buffer),this.indicesArray&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indicesBuffer);for(var r in this.attributeLocations)n.enableVertexAttribArray(this.attributeLocations[r]);var i=0;this.ATTRIBUTES.forEach(function(o){var a=e.attributeLocations[o.name];n.vertexAttribPointer(a,o.size,o.type,o.normalized||!1,e.ARRAY_ITEMS_PER_VERTEX*Float32Array.BYTES_PER_ELEMENT,i);var s=sb[o.type];if(typeof s!="number")throw new Error('Program.bind: yet unsupported attribute type "'.concat(o.type,'"!'));i+=o.size*s})},t.prototype.bufferData=function(){var e=this.gl;this.gl.bufferData(e.ARRAY_BUFFER,this.array,e.DYNAMIC_DRAW),this.indicesArray&&this.gl.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indicesArray,e.STATIC_DRAW)},t.prototype.reallocateIndices=function(){},t.prototype.reallocate=function(e){e!==this.capacity&&(this.capacity=e,this.verticesCount=this.VERTICES*e,this.array=new Float32Array(this.verticesCount*this.ARRAY_ITEMS_PER_VERTEX),typeof this.reallocateIndices=="function"&&this.reallocateIndices())},t.prototype.hasNothingToRender=function(){return this.verticesCount===0},t.prototype.render=function(e){this.hasNothingToRender()||(this.bind(),this.bufferData(),this.gl.useProgram(this.program),this.draw(e))},t}();De.Program=cb;var Th=$&&$.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(ye,"__esModule",{value:!0});ye.createNodeCompoundProgram=ye.NodeProgram=ye.AbstractNodeProgram=void 0;var Nh=De,hb=function(t){Th(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Nh.AbstractProgram);ye.AbstractNodeProgram=hb;var lb=function(t){Th(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.process=function(n,r){var i=n*this.STRIDE;if(r.hidden){for(var o=i+this.STRIDE;i<o;i++)this.array[i]=0;return}return this.processVisibleItem(i,r)},e}(Nh.Program);ye.NodeProgram=lb;function fb(t){return function(){function e(n,r){this.programs=t.map(function(i){return new i(n,r)})}return e.prototype.reallocate=function(n){this.programs.forEach(function(r){return r.reallocate(n)})},e.prototype.process=function(n,r){this.programs.forEach(function(i){return i.process(n,r)})},e.prototype.render=function(n){this.programs.forEach(function(r){return r.render(n)})},e}()}ye.createNodeCompoundProgram=fb;var ao={},db={get exports(){return ao},set exports(t){ao=t}};(()=>{var t={d:(r,i)=>{for(var o in i)t.o(i,o)&&!t.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:i[o]})},o:(r,i)=>Object.prototype.hasOwnProperty.call(r,i),r:r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{default:()=>n});const n=`attribute vec2 a_position;
attribute float a_size;
attribute vec4 a_color;

uniform float u_sizeRatio;
uniform float u_pixelRatio;
uniform mat3 u_matrix;

varying vec4 v_color;
varying float v_border;

const float bias = 255.0 / 254.0;

void main() {
  gl_Position = vec4(
    (u_matrix * vec3(a_position, 1)).xy,
    0,
    1
  );

  // Multiply the point size twice:
  //  - x SCALING_RATIO to correct the canvas scaling
  //  - x 2 to correct the formulae
  gl_PointSize = a_size / u_sizeRatio * u_pixelRatio * 2.0;

  v_border = (0.5 / a_size) * u_sizeRatio;

  // Extract the color:
  v_color = a_color;
  v_color.a *= bias;
}
`;db.exports=e})();var so={},pb={get exports(){return so},set exports(t){so=t}};(()=>{var t={d:(r,i)=>{for(var o in i)t.o(i,o)&&!t.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:i[o]})},o:(r,i)=>Object.prototype.hasOwnProperty.call(r,i),r:r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{default:()=>n});const n=`precision mediump float;

varying vec4 v_color;
varying float v_border;

const float radius = 0.5;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  vec2 m = gl_PointCoord - vec2(0.5, 0.5);
  float dist = radius - length(m);

  float t = 0.0;
  if (dist > v_border)
    t = 1.0;
  else if (dist > 0.0)
    t = dist / v_border;

  gl_FragColor = mix(transparent, v_color, t);
}
`;pb.exports=e})();var gb=$&&$.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dh=$&&$.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ea,"__esModule",{value:!0});var mb=B,yb=ye,vb=Dh(ao),_b=Dh(so),wb=WebGLRenderingContext.UNSIGNED_BYTE,Js=WebGLRenderingContext.FLOAT,bb=["u_sizeRatio","u_pixelRatio","u_matrix"],xb=function(t){gb(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefinition=function(){return{VERTICES:1,ARRAY_ITEMS_PER_VERTEX:4,VERTEX_SHADER_SOURCE:vb.default,FRAGMENT_SHADER_SOURCE:_b.default,UNIFORMS:bb,ATTRIBUTES:[{name:"a_position",size:2,type:Js},{name:"a_size",size:1,type:Js},{name:"a_color",size:4,type:wb,normalized:!0}]}},e.prototype.processVisibleItem=function(n,r){var i=this.array;i[n++]=r.x,i[n++]=r.y,i[n++]=r.size,i[n]=(0,mb.floatColor)(r.color)},e.prototype.draw=function(n){var r=this.gl,i=this.uniformLocations,o=i.u_sizeRatio,a=i.u_pixelRatio,s=i.u_matrix;r.uniform1f(o,n.sizeRatio),r.uniform1f(a,n.pixelRatio),r.uniformMatrix3fv(s,!1,n.matrix),r.drawArrays(r.POINTS,0,this.verticesCount)},e}(yb.NodeProgram);ea.default=xb;var ti={},re={},Rh=$&&$.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(re,"__esModule",{value:!0});re.createEdgeCompoundProgram=re.EdgeProgram=re.AbstractEdgeProgram=void 0;var Lh=De,Eb=function(t){Rh(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Lh.AbstractProgram);re.AbstractEdgeProgram=Eb;var Sb=function(t){Rh(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.process=function(n,r,i,o){var a=n*this.STRIDE;if(o.hidden||r.hidden||i.hidden){for(var s=a+this.STRIDE;a<s;a++)this.array[a]=0;return}return this.processVisibleItem(a,r,i,o)},e}(Lh.Program);re.EdgeProgram=Sb;function Cb(t){return function(){function e(n,r){this.programs=t.map(function(i){return new i(n,r)})}return e.prototype.reallocate=function(n){this.programs.forEach(function(r){return r.reallocate(n)})},e.prototype.process=function(n,r,i,o){this.programs.forEach(function(a){return a.process(n,r,i,o)})},e.prototype.render=function(n){this.programs.forEach(function(r){return r.render(n)})},e}()}re.createEdgeCompoundProgram=Cb;var uo={},Mb={get exports(){return uo},set exports(t){uo=t}};(()=>{var t={d:(r,i)=>{for(var o in i)t.o(i,o)&&!t.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:i[o]})},o:(r,i)=>Object.prototype.hasOwnProperty.call(r,i),r:r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{default:()=>n});const n=`attribute vec4 a_color;
attribute vec2 a_normal;
attribute vec2 a_position;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_zoomRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;

const float minThickness = 1.7;
const float bias = 255.0 / 254.0;

void main() {
  float normalLength = length(a_normal);
  vec2 unitNormal = a_normal / normalLength;

  // We require edges to be at least \`minThickness\` pixels thick *on screen*
  // (so we need to compensate the size ratio):
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);

  // Then, we need to retrieve the normalized thickness of the edge in the WebGL
  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction
  // ratio:
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * webGLThickness, 1)).xy, 0, 1);

  // For the fragment shader though, we need a thickness that takes the "magic"
  // correction ratio into account (as in webGLThickness), but so that the
  // antialiasing effect does not depend on the zoom level. So here's yet
  // another thickness version:
  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;
  v_color = a_color;
  v_color.a *= bias;
}
`;Mb.exports=e})();var co={},Ab={get exports(){return co},set exports(t){co=t}};(()=>{var t={d:(r,i)=>{for(var o in i)t.o(i,o)&&!t.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:i[o]})},o:(r,i)=>Object.prototype.hasOwnProperty.call(r,i),r:r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{default:()=>n});const n=`precision mediump float;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;

const float feather = 0.001;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float dist = length(v_normal) * v_thickness;

  float t = smoothstep(
    v_thickness - feather,
    v_thickness,
    dist
  );

  gl_FragColor = mix(v_color, transparent, t);
}
`;Ab.exports=e})();var Tb=$&&$.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$h=$&&$.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ti,"__esModule",{value:!0});var Nb=B,Db=re,Rb=$h(uo),Lb=$h(co),$b=WebGLRenderingContext.UNSIGNED_BYTE,tu=WebGLRenderingContext.FLOAT,Fb=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio"],Ob=function(t){Tb(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefinition=function(){return{VERTICES:4,ARRAY_ITEMS_PER_VERTEX:5,VERTEX_SHADER_SOURCE:Rb.default,FRAGMENT_SHADER_SOURCE:Lb.default,UNIFORMS:Fb,ATTRIBUTES:[{name:"a_position",size:2,type:tu},{name:"a_normal",size:2,type:tu},{name:"a_color",size:4,type:$b,normalized:!0}]}},e.prototype.reallocateIndices=function(){for(var n=this.verticesCount,r=n+n/2,i=new this.IndicesArray(r),o=0,a=0;o<n;o+=4)i[a++]=o,i[a++]=o+1,i[a++]=o+2,i[a++]=o+2,i[a++]=o+1,i[a++]=o+3;this.indicesArray=i},e.prototype.processVisibleItem=function(n,r,i,o){var a=o.size||1,s=r.x,u=r.y,c=i.x,h=i.y,l=(0,Nb.floatColor)(o.color),f=c-s,d=h-u,p=f*f+d*d,v=0,g=0;p&&(p=1/Math.sqrt(p),v=-d*p*a,g=f*p*a);var m=this.array;m[n++]=s,m[n++]=u,m[n++]=v,m[n++]=g,m[n++]=l,m[n++]=s,m[n++]=u,m[n++]=-v,m[n++]=-g,m[n++]=l,m[n++]=c,m[n++]=h,m[n++]=v,m[n++]=g,m[n++]=l,m[n++]=c,m[n++]=h,m[n++]=-v,m[n++]=-g,m[n]=l},e.prototype.draw=function(n){var r=this.gl,i=this.uniformLocations,o=i.u_matrix,a=i.u_zoomRatio,s=i.u_correctionRatio,u=i.u_sizeRatio;if(r.uniformMatrix3fv(o,!1,n.matrix),r.uniform1f(a,n.zoomRatio),r.uniform1f(u,n.sizeRatio),r.uniform1f(s,n.correctionRatio),!this.indicesArray)throw new Error("EdgeRectangleProgram: indicesArray should be allocated when drawing!");r.drawElements(r.TRIANGLES,this.indicesArray.length,this.indicesType,0)},e}(Db.EdgeProgram);ti.default=Ob;var na={},ra={},ho={},Ib={get exports(){return ho},set exports(t){ho=t}};(()=>{var t={d:(r,i)=>{for(var o in i)t.o(i,o)&&!t.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:i[o]})},o:(r,i)=>Object.prototype.hasOwnProperty.call(r,i),r:r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{default:()=>n});const n=`attribute vec2 a_position;
attribute vec2 a_normal;
attribute float a_radius;
attribute vec4 a_color;
attribute vec3 a_barycentric;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;

const float minThickness = 1.7;
const float bias = 255.0 / 254.0;
const float arrowHeadWidthLengthRatio = 0.66;
const float arrowHeadLengthThicknessRatio = 2.5;

void main() {
  float normalLength = length(a_normal);
  vec2 unitNormal = a_normal / normalLength;

  // These first computations are taken from edge.vert.glsl and
  // edge.clamped.vert.glsl. Please read it to get better comments on what's
  // happening:
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;
  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * 2.0 * arrowHeadLengthThicknessRatio;
  float webGLArrowHeadHalfWidth = webGLArrowHeadLength * arrowHeadWidthLengthRatio / 2.0;

  float da = a_barycentric.x;
  float db = a_barycentric.y;
  float dc = a_barycentric.z;

  vec2 delta = vec2(
      da * (webGLNodeRadius * unitNormal.y)
    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadHalfWidth * unitNormal.x)
    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadHalfWidth * unitNormal.x),

      da * (-webGLNodeRadius * unitNormal.x)
    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadHalfWidth * unitNormal.y)
    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadHalfWidth * unitNormal.y)
  );

  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;

  gl_Position = vec4(position, 0, 1);

  // Extract the color:
  v_color = a_color;
  v_color.a *= bias;
}
`;Ib.exports=e})();var lo={},kb={get exports(){return lo},set exports(t){lo=t}};(()=>{var t={d:(r,i)=>{for(var o in i)t.o(i,o)&&!t.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:i[o]})},o:(r,i)=>Object.prototype.hasOwnProperty.call(r,i),r:r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{default:()=>n});const n=`precision mediump float;

varying vec4 v_color;

void main(void) {
  gl_FragColor = v_color;
}
`;kb.exports=e})();var Pb=$&&$.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fh=$&&$.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ra,"__esModule",{value:!0});var Gb=B,zb=re,Ub=Fh(ho),Bb=Fh(lo),Hb=WebGLRenderingContext.UNSIGNED_BYTE,er=WebGLRenderingContext.FLOAT,Wb=["u_matrix","u_sizeRatio","u_correctionRatio"],Yb=function(t){Pb(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefinition=function(){return{VERTICES:3,ARRAY_ITEMS_PER_VERTEX:9,VERTEX_SHADER_SOURCE:Ub.default,FRAGMENT_SHADER_SOURCE:Bb.default,UNIFORMS:Wb,ATTRIBUTES:[{name:"a_position",size:2,type:er},{name:"a_normal",size:2,type:er},{name:"a_radius",size:1,type:er},{name:"a_color",size:4,type:Hb,normalized:!0},{name:"a_barycentric",size:3,type:er}]}},e.prototype.processVisibleItem=function(n,r,i,o){var a=o.size||1,s=i.size||1,u=r.x,c=r.y,h=i.x,l=i.y,f=(0,Gb.floatColor)(o.color),d=h-u,p=l-c,v=d*d+p*p,g=0,m=0;v&&(v=1/Math.sqrt(v),g=-p*v*a,m=d*v*a);var y=this.array;y[n++]=h,y[n++]=l,y[n++]=-g,y[n++]=-m,y[n++]=s,y[n++]=f,y[n++]=1,y[n++]=0,y[n++]=0,y[n++]=h,y[n++]=l,y[n++]=-g,y[n++]=-m,y[n++]=s,y[n++]=f,y[n++]=0,y[n++]=1,y[n++]=0,y[n++]=h,y[n++]=l,y[n++]=-g,y[n++]=-m,y[n++]=s,y[n++]=f,y[n++]=0,y[n++]=0,y[n]=1},e.prototype.draw=function(n){var r=this.gl,i=this.uniformLocations,o=i.u_matrix,a=i.u_sizeRatio,s=i.u_correctionRatio;r.uniformMatrix3fv(o,!1,n.matrix),r.uniform1f(a,n.sizeRatio),r.uniform1f(s,n.correctionRatio),r.drawArrays(r.TRIANGLES,0,this.verticesCount)},e}(zb.EdgeProgram);ra.default=Yb;var ia={},fo={},qb={get exports(){return fo},set exports(t){fo=t}};(()=>{var t={d:(r,i)=>{for(var o in i)t.o(i,o)&&!t.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:i[o]})},o:(r,i)=>Object.prototype.hasOwnProperty.call(r,i),r:r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{default:()=>n});const n=`attribute vec4 a_color;
attribute vec2 a_normal;
attribute vec2 a_position;
attribute float a_radius;

uniform mat3 u_matrix;
uniform float u_zoomRatio;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;

const float minThickness = 1.7;
const float bias = 255.0 / 254.0;
const float arrowHeadLengthThicknessRatio = 2.5;

void main() {
  float normalLength = length(a_normal);
  vec2 unitNormal = a_normal / normalLength;

  // These first computations are taken from edge.vert.glsl. Please read it to
  // get better comments on what's happening:
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here, we move the point to leave space for the arrow head:
  float direction = sign(a_radius);
  float webGLNodeRadius = direction * a_radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * 2.0 * arrowHeadLengthThicknessRatio;

  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);

  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;
  v_color = a_color;
  v_color.a *= bias;
}
`;qb.exports=e})();var jb=$&&$.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gr=$&&$.__assign||function(){return Gr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Gr.apply(this,arguments)},Oh=$&&$.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ia,"__esModule",{value:!0});var Vb=Oh(ti),Xb=Oh(fo),Zb=B,Kb=WebGLRenderingContext.UNSIGNED_BYTE,Mi=WebGLRenderingContext.FLOAT,Qb=function(t){jb(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefinition=function(){return Gr(Gr({},t.prototype.getDefinition.call(this)),{ARRAY_ITEMS_PER_VERTEX:6,VERTEX_SHADER_SOURCE:Xb.default,ATTRIBUTES:[{name:"a_position",size:2,type:Mi},{name:"a_normal",size:2,type:Mi},{name:"a_color",size:4,type:Kb,normalized:!0},{name:"a_radius",size:1,type:Mi}]})},e.prototype.processVisibleItem=function(n,r,i,o){var a=o.size||1,s=r.x,u=r.y,c=i.x,h=i.y,l=(0,Zb.floatColor)(o.color),f=c-s,d=h-u,p=i.size||1,v=f*f+d*d,g=0,m=0;v&&(v=1/Math.sqrt(v),g=-d*v*a,m=f*v*a);var y=this.array;y[n++]=s,y[n++]=u,y[n++]=g,y[n++]=m,y[n++]=l,y[n++]=0,y[n++]=s,y[n++]=u,y[n++]=-g,y[n++]=-m,y[n++]=l,y[n++]=0,y[n++]=c,y[n++]=h,y[n++]=g,y[n++]=m,y[n++]=l,y[n++]=p,y[n++]=c,y[n++]=h,y[n++]=-g,y[n++]=-m,y[n++]=l,y[n]=-p},e}(Vb.default);ia.default=Qb;var Ih=$&&$.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(na,"__esModule",{value:!0});var Jb=re,tx=Ih(ra),ex=Ih(ia),nx=(0,Jb.createEdgeCompoundProgram)([ex.default,tx.default]);na.default=nx;(function(t){var e=$&&$.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSettings=t.validateSettings=t.DEFAULT_EDGE_PROGRAM_CLASSES=t.DEFAULT_NODE_PROGRAM_CLASSES=t.DEFAULT_SETTINGS=void 0;var n=B,r=e(Jr),i=e(Jo),o=e(ta),a=e(ea),s=e(ti),u=e(na);t.DEFAULT_SETTINGS={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeClickEvents:!1,enableEdgeWheelEvents:!1,enableEdgeHoverEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,zoomToSizeRatioFunction:Math.sqrt,itemSizesReference:"screen",labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,labelRenderer:r.default,hoverRenderer:i.default,edgeLabelRenderer:o.default,allowInvalidContainer:!1,nodeProgramClasses:{},nodeHoverProgramClasses:{},edgeProgramClasses:{}},t.DEFAULT_NODE_PROGRAM_CLASSES={circle:a.default},t.DEFAULT_EDGE_PROGRAM_CLASSES={arrow:u.default,line:s.default};function c(l){if(typeof l.labelDensity!="number"||l.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var f=l.minCameraRatio,d=l.maxCameraRatio;if(typeof f=="number"&&typeof d=="number"&&d<f)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")}t.validateSettings=c;function h(l){var f=(0,n.assign)({},t.DEFAULT_SETTINGS,l);return f.nodeProgramClasses=(0,n.assign)({},t.DEFAULT_NODE_PROGRAM_CLASSES,f.nodeProgramClasses),f.edgeProgramClasses=(0,n.assign)({},t.DEFAULT_EDGE_PROGRAM_CLASSES,f.edgeProgramClasses),f}t.resolveSettings=h})(Mh);var oa={},rx=$&&$.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ix=$&&$.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),ox=$&&$.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ax=$&&$.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&ix(e,t,n);return ox(e,t),e},eu=$&&$.__read||function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};Object.defineProperty(oa,"__esModule",{value:!0});var ge=ax(yt),sx=200,nu=3,ux=200,cx=function(t){rx(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.enabled=!0,i.isMoving=!1,i.hasMoved=!1,i.touchMode=0,i.startTouchesPositions=[],i.handleStart=i.handleStart.bind(i),i.handleLeave=i.handleLeave.bind(i),i.handleMove=i.handleMove.bind(i),n.addEventListener("touchstart",i.handleStart,!1),n.addEventListener("touchend",i.handleLeave,!1),n.addEventListener("touchcancel",i.handleLeave,!1),n.addEventListener("touchmove",i.handleMove,!1),i}return e.prototype.kill=function(){var n=this.container;n.removeEventListener("touchstart",this.handleStart),n.removeEventListener("touchend",this.handleLeave),n.removeEventListener("touchcancel",this.handleLeave),n.removeEventListener("touchmove",this.handleMove)},e.prototype.getDimensions=function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}},e.prototype.dispatchRelatedMouseEvent=function(n,r,i,o){var a=i||r.touches[0],s=new MouseEvent(n,{clientX:a.clientX,clientY:a.clientY,altKey:r.altKey,ctrlKey:r.ctrlKey});s.isFakeSigmaMouseEvent=!0,(o||this.container).dispatchEvent(s)},e.prototype.handleStart=function(n){var r=this;if(this.enabled){n.preventDefault(),n.touches.length===1&&this.dispatchRelatedMouseEvent("mousedown",n);var i=(0,ge.getTouchesArray)(n.touches);if(this.touchMode=i.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=i.map(function(f){return(0,ge.getPosition)(f,r.container)}),this.lastTouches=i,this.lastTouchesPositions=this.startTouchesPositions,this.touchMode===2){var o=eu(this.startTouchesPositions,2),a=o[0],s=a.x,u=a.y,c=o[1],h=c.x,l=c.y;this.startTouchesAngle=Math.atan2(l-u,h-s),this.startTouchesDistance=Math.sqrt(Math.pow(h-s,2)+Math.pow(l-u,2))}this.emit("touchdown",(0,ge.getTouchCoords)(n,this.container))}},e.prototype.handleLeave=function(n){if(this.enabled){switch(n.preventDefault(),n.touches.length===0&&this.lastTouches&&this.lastTouches.length&&(this.dispatchRelatedMouseEvent("mouseup",n,this.lastTouches[0],document),this.hasMoved||this.dispatchRelatedMouseEvent("click",n,this.lastTouches[0])),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(n.touches.length===1){this.handleStart(n),n.preventDefault();break}case 1:if(this.isMoving){var r=this.renderer.getCamera(),i=r.getState(),o=r.getPreviousState()||{x:0,y:0};r.animate({x:i.x+nu*(i.x-o.x),y:i.y+nu*(i.y-o.y)},{duration:ux,easing:"quadraticOut"})}this.hasMoved=!1,this.isMoving=!1,this.touchMode=0;break}this.emit("touchup",(0,ge.getTouchCoords)(n,this.container))}},e.prototype.handleMove=function(n){var r,i=this;if(this.enabled){n.preventDefault(),n.touches.length===1&&this.dispatchRelatedMouseEvent("mousemove",n);var o=(0,ge.getTouchesArray)(n.touches),a=o.map(function(w){return(0,ge.getPosition)(w,i.container)});if(this.lastTouches=o,this.lastTouchesPositions=a,this.hasMoved||(this.hasMoved=a.some(function(w,x){var A=i.startTouchesPositions[x];return w.x!==A.x||w.y!==A.y})),!!this.hasMoved){this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){i.isMoving=!1},sx);var s=this.renderer.getCamera(),u=this.startCameraState;switch(this.touchMode){case 1:{var c=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),h=c.x,l=c.y,f=this.renderer.viewportToFramedGraph(a[0]),d=f.x,p=f.y;s.setState({x:u.x+h-d,y:u.y+l-p});break}case 2:{var v={},g=a[0],m=g.x,y=g.y,E=a[1],C=E.x,M=E.y,S=Math.atan2(M-y,C-m)-this.startTouchesAngle,T=Math.hypot(M-y,C-m)/this.startTouchesDistance,R=s.getBoundedRatio(u.ratio/T);v.ratio=R,v.angle=u.angle+S;var L=this.getDimensions(),G=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:u}),b=Math.min(L.width,L.height),z=b/L.width,F=b/L.height,_=R/b,d=m-b/2/z,p=y-b/2/F;r=eu([d*Math.cos(-v.angle)-p*Math.sin(-v.angle),p*Math.cos(-v.angle)+d*Math.sin(-v.angle)],2),d=r[0],p=r[1],v.x=G.x-d*_,v.y=G.y+p*_,s.setState(v);break}}this.emit("touchmove",(0,ge.getTouchCoords)(n,this.container))}}},e}(ge.default);oa.default=cx;var en={};Object.defineProperty(en,"__esModule",{value:!0});en.doEdgeCollideWithPoint=en.isPixelColored=void 0;function hx(t,e,n){var r=new Uint8Array(4);return t.readPixels(e,t.drawingBufferHeight-n,1,1,t.RGBA,t.UNSIGNED_BYTE,r),r[3]>0}en.isPixelColored=hx;function lx(t,e,n,r,i,o,a){if(t<n-a&&t<i-a||e<r-a&&e<o-a||t>n+a&&t>i+a||e>r+a&&e>o+a)return!1;var s=Math.abs((i-n)*(r-e)-(n-t)*(o-r))/Math.sqrt(Math.pow(i-n,2)+Math.pow(o-r,2));return s<a/2}en.doEdgeCollideWithPoint=lx;var fx=$&&$.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),K=$&&$.__assign||function(){return K=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},K.apply(this,arguments)},dx=$&&$.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pn=$&&$.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xo,"__esModule",{value:!0});var px=Pn(gh),ru=Pn(Xr),gx=Pn(Qr),iu=Pn(Ut),mx=on,it=B,ou=tn,nr=Mh,yx=Pn(oa),rr=vt,au=en,su=150,uu=50;function vx(t,e,n){if(!n.hasOwnProperty("x")||!n.hasOwnProperty("y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(e,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return n.color||(n.color=t.defaultNodeColor),!n.label&&n.label!==""&&(n.label=null),n.label!==void 0&&n.label!==null?n.label=""+n.label:n.label=null,n.size||(n.size=2),n.hasOwnProperty("hidden")||(n.hidden=!1),n.hasOwnProperty("highlighted")||(n.highlighted=!1),n.hasOwnProperty("forceLabel")||(n.forceLabel=!1),(!n.type||n.type==="")&&(n.type=t.defaultNodeType),n.zIndex||(n.zIndex=0),n}function _x(t,e,n){return n.color||(n.color=t.defaultEdgeColor),n.label||(n.label=""),n.size||(n.size=.5),n.hasOwnProperty("hidden")||(n.hidden=!1),n.hasOwnProperty("forceLabel")||(n.forceLabel=!1),(!n.type||n.type==="")&&(n.type=t.defaultEdgeType),n.zIndex||(n.zIndex=0),n}var wx=function(t){fx(e,t);function e(n,r,i){i===void 0&&(i={});var o=t.call(this)||this;if(o.elements={},o.canvasContexts={},o.webGLContexts={},o.activeListeners={},o.quadtree=new iu.default,o.labelGrid=new ou.LabelGrid,o.nodeDataCache={},o.edgeDataCache={},o.nodesWithForcedLabels=[],o.edgesWithForcedLabels=[],o.nodeExtent={x:[0,1],y:[0,1]},o.matrix=(0,rr.identity)(),o.invMatrix=(0,rr.identity)(),o.correctionRatio=1,o.customBBox=null,o.normalizationFunction=(0,it.createNormalizationFunction)({x:[0,1],y:[0,1]}),o.graphToViewportRatio=1,o.width=0,o.height=0,o.pixelRatio=(0,it.getPixelRatio)(),o.displayedNodeLabels=new Set,o.displayedEdgeLabels=new Set,o.highlightedNodes=new Set,o.hoveredNode=null,o.hoveredEdge=null,o.renderFrame=null,o.renderHighlightedNodesFrame=null,o.needToProcess=!1,o.checkEdgesEventsFrame=null,o.nodePrograms={},o.nodeHoverPrograms={},o.edgePrograms={},o.settings=(0,nr.resolveSettings)(i),(0,nr.validateSettings)(o.settings),(0,it.validateGraph)(n),!(r instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");o.graph=n,o.container=r,o.createWebGLContext("edges",{preserveDrawingBuffer:!0}),o.createCanvasContext("edgeLabels"),o.createWebGLContext("nodes"),o.createCanvasContext("labels"),o.createCanvasContext("hovers"),o.createWebGLContext("hoverNodes"),o.createCanvasContext("mouse");for(var a in o.webGLContexts){var s=o.webGLContexts[a];s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.enable(s.BLEND)}for(var u in o.settings.nodeProgramClasses){var c=o.settings.nodeProgramClasses[u];o.nodePrograms[u]=new c(o.webGLContexts.nodes,o);var h=c;u in o.settings.nodeHoverProgramClasses&&(h=o.settings.nodeHoverProgramClasses[u]),o.nodeHoverPrograms[u]=new h(o.webGLContexts.hoverNodes,o)}for(var u in o.settings.edgeProgramClasses){var l=o.settings.edgeProgramClasses[u];o.edgePrograms[u]=new l(o.webGLContexts.edges,o)}return o.resize(),o.camera=new ru.default,o.bindCameraHandlers(),o.mouseCaptor=new gx.default(o.elements.mouse,o),o.touchCaptor=new yx.default(o.elements.mouse,o),o.bindEventHandlers(),o.bindGraphHandlers(),o.handleSettingsUpdate(),o.refresh(),o}return e.prototype.createCanvas=function(n){var r=(0,it.createElement)("canvas",{position:"absolute"},{class:"sigma-".concat(n)});return this.elements[n]=r,this.container.appendChild(r),r},e.prototype.createCanvasContext=function(n){var r=this.createCanvas(n),i={preserveDrawingBuffer:!1,antialias:!1};return this.canvasContexts[n]=r.getContext("2d",i),this},e.prototype.createWebGLContext=function(n,r){var i=this.createCanvas(n),o=K({preserveDrawingBuffer:!1,antialias:!1},r||{}),a;return a=i.getContext("webgl2",o),a||(a=i.getContext("webgl",o)),a||(a=i.getContext("experimental-webgl",o)),this.webGLContexts[n]=a,this},e.prototype.bindCameraHandlers=function(){var n=this;return this.activeListeners.camera=function(){n.scheduleRender()},this.camera.on("updated",this.activeListeners.camera),this},e.prototype.unbindCameraHandlers=function(){return this.camera.removeListener("updated",this.activeListeners.camera),this},e.prototype.mouseIsOnNode=function(n,r,i){var o=n.x,a=n.y,s=r.x,u=r.y;return o>s-i&&o<s+i&&a>u-i&&a<u+i&&Math.sqrt(Math.pow(o-s,2)+Math.pow(a-u,2))<i},e.prototype.getQuadNodes=function(n){var r=this.viewportToFramedGraph(n);return this.quadtree.point(r.x,1-r.y)},e.prototype.getNodeAtPosition=function(n){for(var r=n.x,i=n.y,o=this.getQuadNodes(n),a=1/0,s=null,u=0,c=o.length;u<c;u++){var h=o[u],l=this.nodeDataCache[h],f=this.framedGraphToViewport(l),d=this.scaleSize(l.size);if(!l.hidden&&this.mouseIsOnNode(n,f,d)){var p=Math.sqrt(Math.pow(r-f.x,2)+Math.pow(i-f.y,2));p<a&&(a=p,s=h)}}return s},e.prototype.bindEventHandlers=function(){var n=this;this.activeListeners.handleResize=function(){n.scheduleRender()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(i){var o={event:i,preventSigmaDefault:function(){i.preventSigmaDefault()}},a=n.getNodeAtPosition(i);if(a&&n.hoveredNode!==a&&!n.nodeDataCache[a].hidden){n.hoveredNode&&n.emit("leaveNode",K(K({},o),{node:n.hoveredNode})),n.hoveredNode=a,n.emit("enterNode",K(K({},o),{node:a})),n.scheduleHighlightedNodesRender();return}if(n.hoveredNode){var s=n.nodeDataCache[n.hoveredNode],u=n.framedGraphToViewport(s),c=n.scaleSize(s.size);if(!n.mouseIsOnNode(i,u,c)){var h=n.hoveredNode;n.hoveredNode=null,n.emit("leaveNode",K(K({},o),{node:h})),n.scheduleHighlightedNodesRender();return}}n.settings.enableEdgeHoverEvents===!0?n.checkEdgeHoverEvents(o):n.settings.enableEdgeHoverEvents==="debounce"&&(n.checkEdgesEventsFrame||(n.checkEdgesEventsFrame=(0,it.requestFrame)(function(){n.checkEdgeHoverEvents(o),n.checkEdgesEventsFrame=null})))};var r=function(i){return function(o){var a={event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}},s=o.original.isFakeSigmaMouseEvent,u=s?n.getNodeAtPosition(o):n.hoveredNode;if(u)return n.emit("".concat(i,"Node"),K(K({},a),{node:u}));if(i==="wheel"?n.settings.enableEdgeWheelEvents:n.settings.enableEdgeClickEvents){var c=n.getEdgeAtPoint(o.x,o.y);if(c)return n.emit("".concat(i,"Edge"),K(K({},a),{edge:c}))}return n.emit("".concat(i,"Stage"),a)}};return this.activeListeners.handleClick=r("click"),this.activeListeners.handleRightClick=r("rightClick"),this.activeListeners.handleDoubleClick=r("doubleClick"),this.activeListeners.handleWheel=r("wheel"),this.activeListeners.handleDown=r("down"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this},e.prototype.bindGraphHandlers=function(){var n=this,r=this.graph;return this.activeListeners.graphUpdate=function(){n.scheduleRefresh()},this.activeListeners.dropNodeGraphUpdate=function(i){delete n.nodeDataCache[i.key],n.hoveredNode===i.key&&(n.hoveredNode=null),n.activeListeners.graphUpdate()},this.activeListeners.dropEdgeGraphUpdate=function(i){delete n.edgeDataCache[i.key],n.hoveredEdge===i.key&&(n.hoveredEdge=null),n.activeListeners.graphUpdate()},this.activeListeners.clearEdgesGraphUpdate=function(){n.edgeDataCache={},n.hoveredEdge=null,n.activeListeners.graphUpdate()},this.activeListeners.clearGraphUpdate=function(){n.nodeDataCache={},n.hoveredNode=null,n.activeListeners.clearEdgesGraphUpdate()},r.on("nodeAdded",this.activeListeners.graphUpdate),r.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),r.on("nodeAttributesUpdated",this.activeListeners.graphUpdate),r.on("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),r.on("edgeAdded",this.activeListeners.graphUpdate),r.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),r.on("edgeAttributesUpdated",this.activeListeners.graphUpdate),r.on("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),r.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),r.on("cleared",this.activeListeners.clearGraphUpdate),this},e.prototype.unbindGraphHandlers=function(){var n=this.graph;n.removeListener("nodeAdded",this.activeListeners.graphUpdate),n.removeListener("nodeDropped",this.activeListeners.dropNodeGraphUpdate),n.removeListener("nodeAttributesUpdated",this.activeListeners.graphUpdate),n.removeListener("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),n.removeListener("edgeAdded",this.activeListeners.graphUpdate),n.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),n.removeListener("edgeAttributesUpdated",this.activeListeners.graphUpdate),n.removeListener("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),n.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),n.removeListener("cleared",this.activeListeners.clearGraphUpdate)},e.prototype.checkEdgeHoverEvents=function(n){var r=this.hoveredNode?null:this.getEdgeAtPoint(n.event.x,n.event.y);return r!==this.hoveredEdge&&(this.hoveredEdge&&this.emit("leaveEdge",K(K({},n),{edge:this.hoveredEdge})),r&&this.emit("enterEdge",K(K({},n),{edge:r})),this.hoveredEdge=r),this},e.prototype.getEdgeAtPoint=function(n,r){var i,o,a=this,s=this,u=s.edgeDataCache,c=s.nodeDataCache;if(!(0,au.isPixelColored)(this.webGLContexts.edges,n*this.pixelRatio,r*this.pixelRatio))return null;var h=this.viewportToGraph({x:n,y:r}),l=h.x,f=h.y,d=0;if(this.graph.someEdge(function(M,S,T,R,L,G){var b=L.x,z=L.y,F=G.x,_=G.y;if(u[M].hidden||c[T].hidden||c[R].hidden)return!1;if(b!==F||z!==_){var w=Math.sqrt(Math.pow(F-b,2)+Math.pow(_-z,2)),x=a.graphToViewport({x:b,y:z}),A=x.x,I=x.y,k=a.graphToViewport({x:F,y:_}),H=k.x,W=k.y,V=Math.sqrt(Math.pow(H-A,2)+Math.pow(W-I,2));return d=w/V,!0}}),!d)return null;var p=this.graph.filterEdges(function(M,S,T,R,L,G){if(u[M].hidden||c[T].hidden||c[R].hidden)return!1;if((0,au.doEdgeCollideWithPoint)(l,f,L.x,L.y,G.x,G.y,a.scaleSize(u[M].size*d)))return!0});if(p.length===0)return null;var v=p[p.length-1],g=-1/0;try{for(var m=dx(p),y=m.next();!y.done;y=m.next()){var E=y.value,C=this.graph.getEdgeAttribute(E,"zIndex");C>=g&&(v=E,g=C)}}catch(M){i={error:M}}finally{try{y&&!y.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}return v},e.prototype.process=function(){var n=this,r=this.graph,i=this.settings,o=this.getDimensions(),a=[1/0,-1/0],s=[1/0,-1/0];this.quadtree.clear(),this.labelGrid.resizeAndClear(o,i.labelGridCellSize),this.highlightedNodes=new Set,this.nodeExtent=(0,it.graphExtent)(r),this.nodesWithForcedLabels=[],this.edgesWithForcedLabels=[];var u=new ru.default,c=(0,it.matrixFromCamera)(u.getState(),this.getDimensions(),this.getGraphDimensions(),this.getSetting("stagePadding")||0);this.normalizationFunction=(0,it.createNormalizationFunction)(this.customBBox||this.nodeExtent);for(var h={},l=r.nodes(),f=0,d=l.length;f<d;f++){var p=l[f],v=Object.assign({},r.getNodeAttributes(p));i.nodeReducer&&(v=i.nodeReducer(p,v));var g=vx(this.settings,p,v);h[g.type]=(h[g.type]||0)+1,this.nodeDataCache[p]=g,this.normalizationFunction.applyTo(g),g.forceLabel&&this.nodesWithForcedLabels.push(p),this.settings.zIndex&&(g.zIndex<a[0]&&(a[0]=g.zIndex),g.zIndex>a[1]&&(a[1]=g.zIndex))}for(var m in this.nodePrograms){if(!this.nodePrograms.hasOwnProperty(m))throw new Error('Sigma: could not find a suitable program for node type "'.concat(m,'"!'));this.nodePrograms[m].reallocate(h[m]||0),h[m]=0}this.settings.zIndex&&a[0]!==a[1]&&(l=(0,it.zIndexOrdering)(a,function(G){return n.nodeDataCache[G].zIndex},l));for(var y=this.normalizationFunction.ratio,f=0,d=l.length;f<d;f++){var p=l[f],g=this.nodeDataCache[p];this.quadtree.add(p,g.x,1-g.y,this.scaleSize(g.size,1)/y),typeof g.label=="string"&&!g.hidden&&this.labelGrid.add(p,g.size,this.framedGraphToViewport(g,{matrix:c}));var E=this.nodePrograms[g.type];if(!E)throw new Error('Sigma: could not find a suitable program for node type "'.concat(g.type,'"!'));E.process(h[g.type]++,g),g.highlighted&&!g.hidden&&this.highlightedNodes.add(p)}this.labelGrid.organize();for(var C={},M=r.edges(),f=0,d=M.length;f<d;f++){var S=M[f],v=Object.assign({},r.getEdgeAttributes(S));i.edgeReducer&&(v=i.edgeReducer(S,v));var g=_x(this.settings,S,v);C[g.type]=(C[g.type]||0)+1,this.edgeDataCache[S]=g,g.forceLabel&&!g.hidden&&this.edgesWithForcedLabels.push(S),this.settings.zIndex&&(g.zIndex<s[0]&&(s[0]=g.zIndex),g.zIndex>s[1]&&(s[1]=g.zIndex))}for(var m in this.edgePrograms){if(!this.edgePrograms.hasOwnProperty(m))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(m,'"!'));this.edgePrograms[m].reallocate(C[m]||0),C[m]=0}this.settings.zIndex&&s[0]!==s[1]&&(M=(0,it.zIndexOrdering)(s,function(G){return n.edgeDataCache[G].zIndex},M));for(var f=0,d=M.length;f<d;f++){var S=M[f],g=this.edgeDataCache[S],T=r.extremities(S),R=this.nodeDataCache[T[0]],L=this.nodeDataCache[T[1]];this.edgePrograms[g.type].process(C[g.type]++,R,L,g)}return this},e.prototype.handleSettingsUpdate=function(){return this.camera.minRatio=this.settings.minCameraRatio,this.camera.maxRatio=this.settings.maxCameraRatio,this.camera.setState(this.camera.validateState(this.camera.getState())),this},e.prototype.renderLabels=function(){if(!this.settings.renderLabels)return this;var n=this.camera.getState(),r=this.labelGrid.getLabelsToDisplay(n.ratio,this.settings.labelDensity);(0,px.default)(r,this.nodesWithForcedLabels),this.displayedNodeLabels=new Set;for(var i=this.canvasContexts.labels,o=0,a=r.length;o<a;o++){var s=r[o],u=this.nodeDataCache[s];if(!this.displayedNodeLabels.has(s)&&!u.hidden){var c=this.framedGraphToViewport(u),h=c.x,l=c.y,f=this.scaleSize(u.size);!u.forceLabel&&f<this.settings.labelRenderedSizeThreshold||h<-su||h>this.width+su||l<-uu||l>this.height+uu||(this.displayedNodeLabels.add(s),this.settings.labelRenderer(i,K(K({key:s},u),{size:f,x:h,y:l}),this.settings))}}return this},e.prototype.renderEdgeLabels=function(){if(!this.settings.renderEdgeLabels)return this;var n=this.canvasContexts.edgeLabels;n.clearRect(0,0,this.width,this.height);for(var r=(0,ou.edgeLabelsToDisplayFromNodes)({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedNodeLabels,highlightedNodes:this.highlightedNodes}).concat(this.edgesWithForcedLabels),i=new Set,o=0,a=r.length;o<a;o++){var s=r[o],u=this.graph.extremities(s),c=this.nodeDataCache[u[0]],h=this.nodeDataCache[u[1]],l=this.edgeDataCache[s];i.has(s)||l.hidden||c.hidden||h.hidden||(this.settings.edgeLabelRenderer(n,K(K({key:s},l),{size:this.scaleSize(l.size)}),K(K(K({key:u[0]},c),this.framedGraphToViewport(c)),{size:this.scaleSize(c.size)}),K(K(K({key:u[1]},h),this.framedGraphToViewport(h)),{size:this.scaleSize(h.size)}),this.settings),i.add(s))}return this.displayedEdgeLabels=i,this},e.prototype.renderHighlightedNodes=function(){var n=this,r=this.canvasContexts.hovers;r.clearRect(0,0,this.width,this.height);var i=function(c){var h=n.nodeDataCache[c],l=n.framedGraphToViewport(h),f=l.x,d=l.y,p=n.scaleSize(h.size);n.settings.hoverRenderer(r,K(K({key:c},h),{size:p,x:f,y:d}),n.settings)},o=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&o.push(this.hoveredNode),this.highlightedNodes.forEach(function(c){c!==n.hoveredNode&&o.push(c)}),o.forEach(function(c){return i(c)});var a={};o.forEach(function(c){var h=n.nodeDataCache[c].type;a[h]=(a[h]||0)+1});for(var s in this.nodeHoverPrograms)this.nodeHoverPrograms[s].reallocate(a[s]||0),a[s]=0;o.forEach(function(c){var h=n.nodeDataCache[c];n.nodeHoverPrograms[h.type].process(a[h.type]++,h)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);for(var s in this.nodeHoverPrograms){var u=this.nodeHoverPrograms[s];u.render({matrix:this.matrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio})}},e.prototype.scheduleHighlightedNodesRender=function(){var n=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=(0,it.requestFrame)(function(){n.renderHighlightedNodesFrame=null,n.renderHighlightedNodes(),n.renderEdgeLabels()}))},e.prototype.render=function(){var n=this;this.emit("beforeRender");var r=function(){return n.emit("afterRender"),n};if(this.renderFrame&&((0,it.cancelFrame)(this.renderFrame),this.renderFrame=null),this.resize(),this.needToProcess&&this.process(),this.needToProcess=!1,this.clear(),!this.graph.order)return r();var i=this.mouseCaptor,o=this.camera.isAnimated()||i.isMoving||i.draggedEvents||i.currentWheelDirection,a=this.camera.getState(),s=this.getDimensions(),u=this.getGraphDimensions(),c=this.getSetting("stagePadding")||0;this.matrix=(0,it.matrixFromCamera)(a,s,u,c),this.invMatrix=(0,it.matrixFromCamera)(a,s,u,c,!0),this.correctionRatio=(0,it.getMatrixImpact)(this.matrix,a,s),this.graphToViewportRatio=this.getGraphToViewportRatio();var h={matrix:this.matrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio};for(var l in this.nodePrograms){var f=this.nodePrograms[l];f.render(h)}if(!this.settings.hideEdgesOnMove||!o)for(var l in this.edgePrograms){var f=this.edgePrograms[l];f.render(h)}return this.settings.hideLabelsOnMove&&o||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),r()},e.prototype.getCamera=function(){return this.camera},e.prototype.setCamera=function(n){this.unbindCameraHandlers(),this.camera=n,this.bindCameraHandlers()},e.prototype.getContainer=function(){return this.container},e.prototype.getGraph=function(){return this.graph},e.prototype.setGraph=function(n){n!==this.graph&&(this.unbindGraphHandlers(),this.nodeDataCache={},this.edgeDataCache={},this.displayedNodeLabels.clear(),this.displayedEdgeLabels.clear(),this.highlightedNodes.clear(),this.hoveredNode=null,this.hoveredEdge=null,this.nodesWithForcedLabels.length=0,this.edgesWithForcedLabels.length=0,this.checkEdgesEventsFrame!==null&&((0,it.cancelFrame)(this.checkEdgesEventsFrame),this.checkEdgesEventsFrame=null),this.graph=n,this.bindGraphHandlers(),this.refresh())},e.prototype.getMouseCaptor=function(){return this.mouseCaptor},e.prototype.getTouchCaptor=function(){return this.touchCaptor},e.prototype.getDimensions=function(){return{width:this.width,height:this.height}},e.prototype.getGraphDimensions=function(){var n=this.customBBox||this.nodeExtent;return{width:n.x[1]-n.x[0]||1,height:n.y[1]-n.y[0]||1}},e.prototype.getNodeDisplayData=function(n){var r=this.nodeDataCache[n];return r?Object.assign({},r):void 0},e.prototype.getEdgeDisplayData=function(n){var r=this.edgeDataCache[n];return r?Object.assign({},r):void 0},e.prototype.getNodeDisplayedLabels=function(){return new Set(this.displayedNodeLabels)},e.prototype.getEdgeDisplayedLabels=function(){return new Set(this.displayedEdgeLabels)},e.prototype.getSettings=function(){return K({},this.settings)},e.prototype.getSetting=function(n){return this.settings[n]},e.prototype.setSetting=function(n,r){return this.settings[n]=r,(0,nr.validateSettings)(this.settings),this.handleSettingsUpdate(),this.scheduleRefresh(),this},e.prototype.updateSetting=function(n,r){return this.settings[n]=r(this.settings[n]),(0,nr.validateSettings)(this.settings),this.handleSettingsUpdate(),this.scheduleRefresh(),this},e.prototype.resize=function(){var n=this.width,r=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=(0,it.getPixelRatio)(),this.width===0)if(this.settings.allowInvalidContainer)this.width=1;else throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(this.height===0)if(this.settings.allowInvalidContainer)this.height=1;else throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(n===this.width&&r===this.height)return this;this.emit("resize");for(var i in this.elements){var o=this.elements[i];o.style.width=this.width+"px",o.style.height=this.height+"px"}for(var i in this.canvasContexts)this.elements[i].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[i].setAttribute("height",this.height*this.pixelRatio+"px"),this.pixelRatio!==1&&this.canvasContexts[i].scale(this.pixelRatio,this.pixelRatio);for(var i in this.webGLContexts)this.elements[i].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[i].setAttribute("height",this.height*this.pixelRatio+"px"),this.webGLContexts[i].viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio);return this},e.prototype.clear=function(){return this.webGLContexts.nodes.clear(this.webGLContexts.nodes.COLOR_BUFFER_BIT),this.webGLContexts.edges.clear(this.webGLContexts.edges.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this},e.prototype.refresh=function(){return this.needToProcess=!0,this.render(),this},e.prototype.scheduleRender=function(){var n=this;return this.renderFrame||(this.renderFrame=(0,it.requestFrame)(function(){n.render()})),this},e.prototype.scheduleRefresh=function(){return this.needToProcess=!0,this.scheduleRender(),this},e.prototype.getViewportZoomedState=function(n,r){var i=this.camera.getState(),o=i.ratio,a=i.angle,s=i.x,u=i.y,c=r/o,h={x:this.width/2,y:this.height/2},l=this.viewportToFramedGraph(n),f=this.viewportToFramedGraph(h);return{angle:a,x:(l.x-f.x)*(1-c)+s,y:(l.y-f.y)*(1-c)+u,ratio:r}},e.prototype.viewRectangle=function(){var n=0*this.width/8,r=0*this.height/8,i=this.viewportToFramedGraph({x:0-n,y:0-r}),o=this.viewportToFramedGraph({x:this.width+n,y:0-r}),a=this.viewportToFramedGraph({x:0,y:this.height+r});return{x1:i.x,y1:i.y,x2:o.x,y2:o.y,height:o.y-a.y}},e.prototype.framedGraphToViewport=function(n,r){r===void 0&&(r={});var i=!!r.cameraState||!!r.viewportDimensions||!!r.graphDimensions,o=r.matrix?r.matrix:i?(0,it.matrixFromCamera)(r.cameraState||this.camera.getState(),r.viewportDimensions||this.getDimensions(),r.graphDimensions||this.getGraphDimensions(),r.padding||this.getSetting("stagePadding")||0):this.matrix,a=(0,rr.multiplyVec2)(o,n);return{x:(1+a.x)*this.width/2,y:(1-a.y)*this.height/2}},e.prototype.viewportToFramedGraph=function(n,r){r===void 0&&(r={});var i=!!r.cameraState||!!r.viewportDimensions||!r.graphDimensions,o=r.matrix?r.matrix:i?(0,it.matrixFromCamera)(r.cameraState||this.camera.getState(),r.viewportDimensions||this.getDimensions(),r.graphDimensions||this.getGraphDimensions(),r.padding||this.getSetting("stagePadding")||0,!0):this.invMatrix,a=(0,rr.multiplyVec2)(o,{x:n.x/this.width*2-1,y:1-n.y/this.height*2});return isNaN(a.x)&&(a.x=0),isNaN(a.y)&&(a.y=0),a},e.prototype.viewportToGraph=function(n,r){return r===void 0&&(r={}),this.normalizationFunction.inverse(this.viewportToFramedGraph(n,r))},e.prototype.graphToViewport=function(n,r){return r===void 0&&(r={}),this.framedGraphToViewport(this.normalizationFunction(n),r)},e.prototype.getGraphToViewportRatio=function(){var n={x:0,y:0},r={x:1,y:1},i=Math.sqrt(Math.pow(n.x-r.x,2)+Math.pow(n.y-r.y,2)),o=this.graphToViewport(n),a=this.graphToViewport(r),s=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2));return s/i},e.prototype.getBBox=function(){return(0,it.graphExtent)(this.graph)},e.prototype.getCustomBBox=function(){return this.customBBox},e.prototype.setCustomBBox=function(n){return this.customBBox=n,this.scheduleRender(),this},e.prototype.kill=function(){this.emit("kill"),this.removeAllListeners(),this.unbindCameraHandlers(),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),this.unbindGraphHandlers(),this.quadtree=new iu.default,this.nodeDataCache={},this.edgeDataCache={},this.nodesWithForcedLabels=[],this.edgesWithForcedLabels=[],this.highlightedNodes.clear(),this.renderFrame&&((0,it.cancelFrame)(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&((0,it.cancelFrame)(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var n=this.container;n.firstChild;)n.removeChild(n.firstChild)},e.prototype.scaleSize=function(n,r){return n===void 0&&(n=1),r===void 0&&(r=this.camera.ratio),n/this.settings.zoomToSizeRatioFunction(r)*(this.getSetting("itemSizesReference")==="positions"?r*this.graphToViewportRatio:1)},e.prototype.getCanvases=function(){return K({},this.elements)},e}(mx.TypedEventEmitter);Xo.default=wx;var ei=$&&$.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ee,"__esModule",{value:!0});ee.Sigma=ee.MouseCaptor=ee.QuadTree=ee.Camera=void 0;var kh=ei(Xo);ee.Sigma=kh.default;var bx=ei(Xr);ee.Camera=bx.default;var xx=ei(Ut);ee.QuadTree=xx.default;var Ex=ei(Qr);ee.MouseCaptor=Ex.default;var Sx=ee.default=kh.default;const Cx="graph-container",Mx="select_layout",cu="select_node_size",Ax="graph-description",Tx="edges_opacity",Nx="w_slider",Dx="w_slider_label",Rx="b_slider",Lx="b_slider_label",Ph="search_input",$x="search_suggestions",Fx="search_by_city",Ox="random",Ix=2e3,kx="fixed",Px=1e3,hu=2,zr=1,po=10,Gx="fixed",zx=1e3,go="#0f1d18",st="#db3927",lu="#8d2eb2",Gh="#f7b500",ir="label",Ux=5e4,mo=.5,Bx="rgba(46, 93, 82, "+mo+")",Hx=.05,zh="transports",Wx=`data/network/networks/${zh}/web_data/network_nodes.csv`,Yx=`data/network/networks/${zh}/web_data/network_edges.csv`,qx={fix:"Choose between the different layouts of the graph: random, geographical or force atlas 2.",deg:"Degree is a fundamental metric in graph theory that measures the number of edges connected to a node in a graph. It represents the number of direct connections a node has with other nodes in the graph. In simple terms, the degree of a node indicates the number of neighbors it has. In an undirected graph, the degree of a node is equal to the count of edges incident to that node. In a directed graph, the degree can be further divided into in-degree and out-degree, representing the number of incoming and outgoing edges, respectively. The degree of a node is often used to determine the connectivity and importance of nodes within a graph. Nodes with higher degrees typically have more connections and are considered more influential or central in the network.",bce:"Betweenness centrality is a measure of node importance in a graph based on the concept of how often a node lies on the shortest paths between other pairs of nodes. It quantifies the extent to which a node acts as a bridge or intermediary in connecting different parts of the graph. Nodes with higher betweenness centrality have more control over the flow of information or resources between other nodes, as they are more likely to be on the shortest paths. In essence, betweenness centrality identifies nodes that have a significant influence on the communication and interaction within the graph.",wdeg:"The weighted degree in a graph represents the sum of the weights of the links connected to a particular node. It takes into account the significance or importance of the links based on their weights, which are typically determined by factors such as the number of trains, buses, or trams that travel between the nodes. The weighted degree provides a measure of how well-connected and influential a node is within the transportation system, and can be used to determine the node sizes in your data visualization, reflecting their relative importance or traffic volume.",pgr:"PageRank is an algorithm used to measure the importance or relevance of nodes in a graph. It assigns a numerical value to each node based on the incoming links from other nodes. In simple terms, nodes with a higher PageRank are considered more influential or central in the graph.",egn:"Eigen centrality is a measure of node importance in a graph based on the concept of eigenvectors. It calculates the centrality of a node by considering both its own importance and the importance of its neighbors. Nodes with higher eigen centrality are those that have connections to other highly central nodes in the graph. In other words, eigen centrality identifies nodes that have a significant impact on the flow of information or influence throughout the graph."};class jx{constructor(){this.graph=null,this.renderer=null,this.layoutManager=new Vx(this,this.renderer),this.nodeSizeManager=new Xx(this,this.renderer),this.colorManager=new Zx(this,this.renderer),this.searchManager=new Kx(this,this.renderer)}getNormalizedValue(e,n,r){return(e-n)/(r-n)}getNormalizedNodeSize(e,n,r){return this.getNormalizedValue(e,n,r)*(po-zr)+zr}async loadData(){const n=await(await fetch(Wx)).text(),r=new J;Ra(n,(c,h)=>{if(h===0)return null;const l=c[0];if(!r.hasNode(l)){const f=c[1],d=Math.random(),p=Math.random(),v=parseFloat(c[2]),g=parseFloat(c[3]),m=parseFloat(c[4]),y=parseFloat(c[5]),E=parseFloat(c[6]),C=c[7],M=c[8];c[9];const S=parseFloat(c[16]),T=parseInt(c[18]),R=parseInt(c[19]),L=parseInt(c[20]),G=parseInt(c[21]),b=parseInt(c[22]),z=parseInt(c[23]),F=parseInt(c[24]),_=parseFloat(c[25]),w=parseFloat(c[26]),x=parseFloat(c[33]);r.addNode(l,{label:f,color:go,x:d,y:p,xRdm:d,yRdm:p,xFa2:v,yFa2:g,xGeo:m,yGeo:y,size:hu,sizeFix:hu,sizeBce:E,sizeIde:T,sizeOde:R,sizeDeg:L,sizeWide:G,sizeWode:b,sizeWdeg:z,sizePgr:S,sizeEcc:F,sizeCcl:_,sizeHcl:w,sizeEgn:x,transportType:C,city:M})}return null}),["Fa2","Geo"].forEach(c=>{let h=Math.min(...r.nodes().map(f=>r.getNodeAttribute(f,`x${c}`)));h=Math.min(h,Math.min(...r.nodes().map(f=>r.getNodeAttribute(f,`y${c}`))));let l=Math.max(...r.nodes().map(f=>r.getNodeAttribute(f,`x${c}`)));l=Math.max(l,Math.max(...r.nodes().map(f=>r.getNodeAttribute(f,`y${c}`)))),r.forEachNode((f,d)=>{r.setNodeAttribute(f,`x${c}`,this.getNormalizedValue(d[`x${c}`],h,l)),r.setNodeAttribute(f,`y${c}`,this.getNormalizedValue(d[`y${c}`],h,l))})}),["Ide","Ode","Deg","Bce","Wide","Wode","Wdeg","Pgr","Ecc","Ccl","Hcl","Egn"].forEach(c=>{r.forEachNode((h,l)=>{isNaN(l[`size${c}`])&&r.setNodeAttribute(h,`size${c}`,0)})}),["Fix","Ide","Ode","Deg","Bce","Wide","Wode","Wdeg","Pgr","Ecc","Ccl","Hcl","Egn"].forEach(c=>{const h=Math.min(...r.nodes().map(f=>r.getNodeAttribute(f,`size${c}`))),l=Math.max(...r.nodes().map(f=>r.getNodeAttribute(f,`size${c}`)));r.forEachNode((f,d)=>{r.setNodeAttribute(f,`size${c}`,this.getNormalizedNodeSize(d[`size${c}`],h,l))})});const u=await(await fetch(Yx)).text();return Ra(u,(c,h)=>{if(h===0)return null;const l=c[0],f=c[1],d=c[2],p=c[3];return r.hasEdge(l)||r.addEdgeWithKey(l,f,d,{source:f,target:d,weight:p,color:Bx,size:parseFloat(p)/Ux}),null}),r}load(){if(this.graph){console.error("Graph already loaded.");return}this.loadData().then(e=>{this.graph=e,this.renderer=new Sx(this.graph,document.getElementById(Cx)),this.searchManager.setSearchSuggestions(),document.getElementById(Mx).addEventListener("change",h=>{this.layoutManager.handleLayoutSelectChange(h)}),document.getElementById(cu).addEventListener("change",h=>{this.nodeSizeManager.handleNodeSizeSelectChange(h);const l=h.target.value,f=qx[l],d=document.getElementById(Ax);d.innerHTML=f}),document.getElementById(cu).addEventListener("change",h=>{this.colorManager.handleNodeColorSelectChange(h)}),document.getElementById(Tx).addEventListener("change",h=>{const l=h.target.checked;this.colorManager.handleEdgesOpacityCheckboxChange(l)}),document.getElementById(Nx).addEventListener("input",h=>{const l=parseFloat(h.target.value);this.colorManager.handleWSliderChange(l);const f=document.getElementById(Dx);f.innerHTML=`W ${l.toFixed(2)}`}),document.getElementById(Rx).addEventListener("input",h=>{const l=parseFloat(h.target.value);this.colorManager.handleBSliderChange(l);const f=document.getElementById(Lx);f.innerHTML=`B ${l.toFixed(2)}`});const u=document.getElementById(Ph);u.addEventListener("input",()=>{this.searchManager.setSearchQuery(u.value||"")}),document.getElementById(Fx).addEventListener("change",h=>{const l=h.target.checked;this.searchManager.handleSearchByCityCheckboxChange(l)}),this.refresh()}).catch(e=>{console.error("Error loading data:",e)})}refresh(){if(!this.renderer){console.error("Renderer not initialized.");return}this.renderer.refresh()}}class Vx{constructor(e){this.graphManager=e,this.layoutMode=Ox,this.layoutTransitionDuration=Ix}easeInOutQuad(e){return e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2}setLayoutMode(e,n,r){if(this.layoutMode===e)return;const o=this.graphManager.graph.nodes().reduce((a,s)=>{const u=this.graphManager.graph.getNodeAttributes(s);return a[s]={x:u[n],y:u[r]},a},{});Zr.animateNodes(this.graphManager.graph,o,{duration:this.layoutTransitionDuration,easing:this.easeInOutQuad}),this.layoutMode=e}handleLayoutSelectChange(e){const n=e.target.value,r={rdm:"random",fa2:"forceatlas2",geo:"geographical"},i={rdm:"Rdm",fa2:"Fa2",geo:"Geo"},o=`x${i[n]}`,a=`y${i[n]}`;this.setLayoutMode(r[n],o,a)}}class Xx{constructor(e,n){this.graphManager=e,this.renderer=n,this.nodeSizeMode=kx,this.nodeSizeTransitionDuration=Px}easeInOutQuad(e){return e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2}setNodeSizeMode(e,n){if(this.nodeSizeMode===e)return;const i=this.graphManager.graph.nodes().reduce((o,a)=>{const s=this.graphManager.graph.getNodeAttributes(a);return o[a]={size:s[n]},o},{});Zr.animateNodes(this.graphManager.graph,i,{duration:this.nodeSizeTransitionDuration,easing:this.easeInOutQuad}),this.nodeSizeMode=e}handleNodeSizeSelectChange(e){const n=e.target.value,r={fix:"fixed",ide:"in_degree",ode:"out_degree",deg:"degree",bce:"betweeness_centrality",wide:"weighted_in_degree",wode:"weighted_out_degree",wdeg:"weighted_degree",pgr:"page_rank",ecc:"eccentricity",ccl:"closeness_centrality",hcl:"harmonic_closeness_centrality",egn:"eigen_centrality"},o=`size${{fix:"Fix",ide:"Ide",ode:"Ode",deg:"Deg",bce:"Bce",wide:"Wide",wode:"Wode",wdeg:"Wdeg",pgr:"Pgr",ecc:"Ecc",ccl:"Ccl",hcl:"Hcl",egn:"Egn"}[n]}`;this.setNodeSizeMode(r[n],o)}}class Zx{constructor(e,n){this.graphManager=e,this.renderer=n,this.nodeColorMode=Gx,this.nodeColorTransitionDuration=zx,this.wScale=1,this.bScale=.5}isHexColor(e){return/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(e)}isRgbColor(e){return/^rgb\(\d{1,3},\s*\d{1,3},\s*\d{1,3}\)$/i.test(e)}isRgbaColor(e){return/^rgba\(\d{1,3},\s*\d{1,3},\s*\d{1,3},\s*(0(\.\d+)?|1(\.0+)?)\)$/i.test(e)}hexToRgbMap(e){if(!this.isHexColor(e))return null;const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}}hexToRgbRepr(e){const n=this.hexToRgbMap(e);return n?`rgb(${n.r}, ${n.g}, ${n.b})`:null}hexToRgbaMap(e,n=1){if(!this.isHexColor(e))return null;const r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16),a:n}}hexToRgbaRepr(e,n=1){const r=this.hexToRgbaMap(e,n);return r?`rgba(${r.r}, ${r.g}, ${r.b}, ${r.a})`:null}rgbMapToHex(e){const n=e.r,r=e.g,i=e.b;return"#"+[n,r,i].map(o=>{const a=o.toString(16);return a.length===1?"0"+a:a}).join("")}rgbReprToHex(e){if(!this.isRgbColor(e))return null;const n=e.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/i),r=parseInt(n[1]),i=parseInt(n[2]),o=parseInt(n[3]);return this.rgbMapToHex({r,g:i,b:o})}rgbReprToRgbaRepr(e,n=1){if(!this.isRgbColor(e))return null;const r=e.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/i),i=parseInt(r[1]),o=parseInt(r[2]),a=parseInt(r[3]);return`rgba(${i}, ${o}, ${a}, ${n})`}rgbaReprToHex(e){if(!this.isRgbaColor(e))return null;const n=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)/i),r=parseInt(n[1]),i=parseInt(n[2]),o=parseInt(n[3]);return`#${((1<<24)+(r<<16)+(i<<8)+o).toString(16).slice(1)}`}setRgbaAlpha(e,n){if(!this.isRgbaColor(e))return null;const r=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)/i),i=parseInt(r[1]),o=parseInt(r[2]),a=parseInt(r[3]);return`rgba(${i}, ${o}, ${a}, ${n})`}lerp(e,n,r){return e+(n-e)*r}colorLerp(e,n,r){const i=this.hexToRgbMap(e),o=this.hexToRgbMap(n),a=Math.round(this.lerp(i.r,o.r,r)),s=Math.round(this.lerp(i.g,o.g,r)),u=Math.round(this.lerp(i.b,o.b,r)),c={r:a,g:s,b:u};return this.rgbMapToHex(c)}easeInOutQuad(e){return e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2}animateColorNodes(e,n,r){const i=performance.now(),o={duration:1e3,easing:c=>c,...n},a=new Map,s=new Map;for(const c of this.graphManager.graph.nodes()){const h=this.graphManager.graph.getNodeAttributes(c),l=e[c];a.set(c,{color:h.color}),s.set(c,{color:l.color})}const u=()=>{const c=performance.now(),h=Math.min((c-i)/o.duration,1),l=o.easing(h);for(const f of this.graphManager.graph.nodes()){const d=a.get(f),p=s.get(f),v=this.colorLerp(d.color,p.color,l);this.graphManager.graph.setNodeAttribute(f,"color",v)}this.graphManager.refresh(),h<1?requestAnimationFrame(u):typeof r=="function"&&r()};requestAnimationFrame(u)}setNodeColorMode(e,n,r,i=!1){if(this.nodeColorMode===e&&!i)return;const o=this.graphManager.graph.nodes(),a=o.reduce((s,u)=>{const c=this.graphManager.graph.getNodeAttributes(u);let h=1;r&&(h=c[r],h=(h-this.graphManager.getNormalizedValue(h,zr,po))/(po-zr),h=1/(1+Math.exp(-this.wScale*(h-this.bScale))));const l=this.colorLerp(go,n,h),f=c.searchSelected?Gh:l;return s[u]={color:f,oldColor:l},s},{});i?(o.forEach(s=>{const u=a[s];this.graphManager.graph.setNodeAttribute(s,"color",u.color)}),this.graphManager.renderer.refresh()):(this.animateColorNodes(a,{duration:this.nodeColorTransitionDuration,easing:this.easeInOutQuad}),this.nodeColorMode=e),o.forEach(s=>{const u=a[s];this.graphManager.graph.setNodeAttribute(s,"oldColor",u.oldColor)})}handleNodeColorSelectChange(e){const n=e.target.value,r={fix:"fixed",ide:"in_degree",ode:"out_degree",deg:"degree",bce:"betweeness_centrality",wide:"weighted_in_degree",wode:"weighted_out_degree",wdeg:"weighted_degree",pgr:"page_rank",ecc:"eccentricity",ccl:"closeness_centrality",hcl:"harmonic_closeness_centrality",egn:"eigen_centrality"},i={fix:go,ide:st,ode:st,deg:st,bce:lu,wide:st,wode:st,wdeg:st,pgr:st,ecc:st,ccl:st,hcl:st,egn:st},o={ide:"Ide",ode:"Ode",deg:"Deg",bce:"Bce",wide:"Wide",wode:"Wode",wdeg:"Wdeg",pgr:"Pgr",ecc:"Ecc",ccl:"Ccl",hcl:"Hcl",egn:"Egn"},a=r[n],s=i[n],u=`size${o[n]}`||null;this.setNodeColorMode(a,s,u,!1)}handleSliderChange(){if(this.nodeColorMode==="fixed")return;const e={in_degree:"Ide",out_degree:"Ode",degree:"Deg",betweeness_centrality:"Bce",weighted_in_degree:"Wide",weighted_out_degree:"Wode",weighted_degree:"Wdeg",page_rank:"Pgr",eccentricity:"Ecc",closeness_centrality:"Ccl",harmonic_closeness_centrality:"Hcl",eigen_centrality:"Egn"},n={in_degree:st,out_degree:st,degree:st,betweeness_centrality:lu,weighted_in_degree:st,weighted_out_degree:st,weighted_degree:st,page_rank:st,eccentricity:st,closeness_centrality:st,harmonic_closeness_centrality:st,eigen_centrality:st},r=`size${e[this.nodeColorMode]}`,i=n[this.nodeColorMode];this.setNodeColorMode(this.nodeColorMode,i,r,!0),this.graphManager.renderer.refresh()}handleWSliderChange(e){this.wScale=e,this.handleSliderChange()}handleBSliderChange(e){this.bScale=e,this.handleSliderChange()}handleEdgesOpacityCheckboxChange(e){const n=this.graphManager.graph;e?n.edges().forEach(r=>{const i=n.getEdgeAttributes(r);this.isRgbaColor(i.color)||(this.isHexColor(i.color)?i.color=this.hexToRgbaRepr(i.color,mo):this.isRgbColor(i.color)&&(i.color=this.rgbReprToRgbaRepr(i.color,mo)))}):n.edges().forEach(r=>{const i=n.getEdgeAttributes(r);this.isHexColor(i.color)||(this.isRgbColor(i.color)?i.color=this.rgbReprToHex(i.color):this.isRgbaColor(i.color)&&(i.color=this.rgbaReprToHex(i.color)))}),this.graphManager.renderer.refresh()}}class Kx{constructor(e){this.graphManager=e,this.searchInput=document.getElementById(Ph),this.searchSuggestions=document.getElementById($x),this.searchBy=ir}setSearchSuggestions(){this.setSearchSuggestionBy(this.searchBy)}setSearchSuggestionBy(e){const n=[];this.searchSuggestions.innerHTML=this.graphManager.graph.nodes().map(r=>{const o=this.graphManager.graph.getNodeAttributes(r)[e];return n.includes(o)?"":(n.push(o),`<option value="${o}">`)}).join(`
`)}setSearchQuery(e){let n=null;e===""?n=[]:n=this.graphManager.graph.nodes().map(s=>{const u=this.graphManager.graph.getNodeAttributes(s);return{id:s,searchBy:u[this.searchBy].toLowerCase()}}).filter(({searchBy:s})=>s.includes(e.toLowerCase())).sort((s,u)=>s.searchBy.localeCompare(u.searchBy));const r=n.find(({searchBy:s})=>s===e.toLowerCase());if(this.searchBy===ir&&r){n=[r];const s=this.graphManager.renderer.getNodeDisplayData(r.id).x,u=this.graphManager.renderer.getNodeDisplayData(r.id).y;this.graphManager.renderer.camera.animate({x:s,y:u,ratio:Hx},{duration:1e3})}this.graphManager.graph.forEachNode((s,u)=>{const c=this.searchBy===ir&&s===(r==null?void 0:r.id);this.graphManager.graph.setNodeAttribute(s,"highlighted",c)});const i=this.graphManager.graph.nodes().filter(s=>this.graphManager.graph.getNodeAttributes(s).searchSelected),o=i.filter(s=>!n.find(u=>u.id===s)),a=n.filter(s=>!i.find(u=>u===s.id));o.forEach(s=>{this.graphManager.graph.setNodeAttribute(s,"searchSelected",!1,{skipIndexation:!0}),this.graphManager.graph.setNodeAttribute(s,"color",this.graphManager.graph.getNodeAttributes(s).oldColor),this.graphManager.graph.setNodeAttribute(s,"oldColor",null,{skipIndexation:!0})}),a.forEach(({id:s})=>{this.graphManager.graph.setNodeAttribute(s,"searchSelected",!0,{skipIndexation:!0}),this.graphManager.graph.setNodeAttribute(s,"oldColor",this.graphManager.graph.getNodeAttributes(s).color),this.graphManager.graph.setNodeAttribute(s,"color",Gh,{skipIndexation:!0})}),this.graphManager.renderer.refresh()}handleSearchByCityCheckboxChange(e){this.searchBy=e?"city":ir,this.setSearchSuggestions(),this.setSearchQuery(this.searchInput.value)}}document.addEventListener("DOMContentLoaded",()=>{new Iv,new g_,new E_;const t=document.getElementById("p5-container");if(t){const e=new IntersectionObserver(n=>{n[0].isIntersecting&&(console.log("loading graph"),new jx().load(),e.unobserve(t))},{threshold:1});e.observe(t)}});document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("particle-container"),e=document.getElementById("train");function n(r=0){const i=document.createElement("div");i.classList.add("particle"),i.style.left=e.getBoundingClientRect().left+r+(.5-Math.random())*5+"px",t==null||t.appendChild(i),setTimeout(()=>{const o=(.8-Math.random())*20,a=(.5-Math.random())*20+20;i.style.opacity="1",i.style.transform=`translateY(${o}vh) translateX(${a}vw)`,i.style.transition="transform 5s ease-out, opacity 2s linear"},0),setTimeout(()=>{i.style.opacity="0"},3e3),setTimeout(()=>{t.removeChild(i)},5e3)}setInterval(()=>{var o;const r=e.getBoundingClientRect(),i=(o=document.getElementById("bridge"))==null?void 0:o.getBoundingClientRect();i&&r.left<=i.right&&r.right>=i.left&&(n(e.getBoundingClientRect().width),n(e.getBoundingClientRect().width/2),n(0))},100)});const fu=3e3;document.addEventListener("DOMContentLoaded",()=>{function t(a){const s=a.getBoundingClientRect(),u=window.innerHeight||document.documentElement.clientHeight,c=window.innerWidth||document.documentElement.clientWidth;return s.top>=0&&s.left>=0&&s.bottom<=u+1&&s.right<=c+1}function e(a,s){const u=window.pageYOffset,c=a.getBoundingClientRect().top,h=performance.now();function l(f){const d=f-h,p=Math.min(d/s,1);window.scrollTo({top:u+c*n(p)}),d<s&&window.requestAnimationFrame(l)}window.requestAnimationFrame(l)}function n(a){return a<.5?2*a*a:-1+(4-2*a)*a}function r(a){return a.deltaY>0?"down":"up"}function i(a){a.preventDefault();const s=["title-container","p1-container","p2-container","p3-container","p4-container","p5-container","p6-container","p7-container","p8-container","p9-container","final-container"];for(let u=0;u<s.length;u++){const c=u>=1?document.getElementById(s[u-1]):null,h=document.getElementById(s[u]),l=u<s.length-1?document.getElementById(s[u+1]):null;c&&t(h)&&r(a)==="up"&&e(c,fu),l&&t(h)&&r(a)==="down"&&e(l,fu)}}document.addEventListener("wheel",i,{passive:!1}),document.addEventListener("touchmove",i,{passive:!1});const o=document.getElementById("title-container");e(o,0)});
